{"version":3,"sources":["webpack:///./node_modules/lodash/cloneDeep.js","webpack:///./src/components/button-group/ButtonGroup.js","webpack:///./src/components/button-group/ButtonGroup.scss","webpack:///./src/components/date-picker/index.js","webpack:///./src/components/dropdown-menu/MenuToggle.js","webpack:///./src/components/dropdown-menu/MenuToggle.scss","webpack:///./src/components/radio/RadioButton.js","webpack:///./src/components/radio/RadioButton.scss","webpack:///./src/components/radio/RadioButtonField.js","webpack:///./src/components/radio/RadioGroup.js","webpack:///./src/components/radio/RadioGroupField.js","webpack:///./src/components/radio/index.js","webpack:///./src/components/search-form/SearchForm.js","webpack:///./src/components/search-form/SearchForm.scss","webpack:///./src/components/select-button/SelectButton.js","webpack:///./src/components/select-button/SelectButton.scss","webpack:///./src/components/select-button/index.js","webpack:///./src/components/select-field/BaseSelectField.js","webpack:///./src/components/select-field/MultiSelectField.js","webpack:///./src/components/select-field/SelectField.scss","webpack:///./src/components/select-field/SingleSelectField.js","webpack:///./src/components/text-input/TextInputField.js","webpack:///./src/components/text-input/index.js","webpack:///./src/components/toggle/Toggle.js","webpack:///./src/components/toggle/Toggle.scss","webpack:///./src/components/toggle/ToggleField.js","webpack:///./src/components/toggle/index.js","webpack:///./src/elements/content-sidebar/MetadataSidebar.js","webpack:///./src/elements/content-sidebar/MetadataSidebar.scss","webpack:///./src/features/metadata-instance-editor/CascadePolicy.js","webpack:///./src/features/metadata-instance-editor/CascadePolicy.scss","webpack:///./src/features/metadata-instance-editor/CustomInstance.js","webpack:///./src/features/metadata-instance-editor/CustomInstanceNewField.js","webpack:///./src/features/metadata-instance-editor/CustomInstanceNewField.scss","webpack:///./src/features/metadata-instance-editor/EmptyContent.js","webpack:///./src/features/metadata-instance-editor/EmptyContent.scss","webpack:///./src/features/metadata-instance-editor/Footer.js","webpack:///./src/features/metadata-instance-editor/Footer.scss","webpack:///./src/features/metadata-instance-editor/Instance.js","webpack:///./src/features/metadata-instance-editor/Instance.scss","webpack:///./src/features/metadata-instance-editor/Instances.js","webpack:///./src/features/metadata-instance-editor/MetadataInstanceConfirmDialog.js","webpack:///./src/features/metadata-instance-editor/MetadataInstanceConfirmDialog.scss","webpack:///./src/features/metadata-instance-editor/TemplateDropdown.js","webpack:///./src/features/metadata-instance-editor/TemplateDropdown.scss","webpack:///./src/features/metadata-instance-editor/TemplatedInstance.js","webpack:///./src/features/metadata-instance-editor/TemplatedInstance.scss","webpack:///./src/features/metadata-instance-editor/constants.js","webpack:///./src/features/metadata-instance-editor/fields/CustomField.js","webpack:///./src/features/metadata-instance-editor/fields/CustomField.scss","webpack:///./src/features/metadata-instance-editor/fields/DateField.js","webpack:///./src/features/metadata-instance-editor/fields/DateField.scss","webpack:///./src/features/metadata-instance-editor/fields/EnumField.js","webpack:///./src/features/metadata-instance-editor/fields/EnumField.scss","webpack:///./src/features/metadata-instance-editor/fields/Field.js","webpack:///./src/features/metadata-instance-editor/fields/FloatField.js","webpack:///./src/features/metadata-instance-editor/fields/IntegerField.js","webpack:///./src/features/metadata-instance-editor/fields/MultiSelectField.js","webpack:///./src/features/metadata-instance-editor/fields/MultiSelectField.scss","webpack:///./src/features/metadata-instance-editor/fields/ReadOnlyField.js","webpack:///./src/features/metadata-instance-editor/fields/ReadOnlyField.scss","webpack:///./src/features/metadata-instance-editor/fields/TextField.js","webpack:///./src/features/metadata-instance-editor/fields/TextField.scss","webpack:///./src/features/metadata-instance-editor/fields/validateField.js","webpack:///./src/features/metadata-instance-editor/messages.js","webpack:///./src/features/metadata-instance-editor/metadataUtil.js","webpack:///./src/icons/general/IconAddMetadataEmptyState.js","webpack:///./src/icons/general/IconAlertCircle.js","webpack:///./src/icons/general/IconCheck.js","webpack:///./src/icons/general/IconEdit.js","webpack:///./src/icons/general/IconMetadataColored.js","webpack:///./src/icons/general/IconMinusThin.js","webpack:///./src/icons/general/IconPlusThin.js","webpack:///./src/icons/general/IconSearch.js"],"names":["ButtonGroup","children","className","isDisabled","MenuToggle","onChangeStub","RadioButton","isSelected","description","hideLabel","label","name","value","rest","RadioButtonField","field","form","fieldValue","fieldRest","RadioGroup","React","constructor","props","event","target","onChange","HTMLInputElement","setState","state","render","stateValue","onChangeHandler","map","radio","RadioGroupField","messages","defineMessages","clearButtonTitle","searchButtonTitle","searchLabel","SearchForm","isEmpty","shouldPreventClearEventPropagation","stopPropagation","searchInput","trim","length","elements","onSubmit","element","getSearchInput","getDerivedStateFromProps","action","intl","isLoading","method","queryParams","useClearButton","inputProps","omit","formatMessage","classes","classNames","formClassNames","hiddenInputs","Object","keys","param","index","SearchActions","onClearHandler","LoadableSearchActions","makeLoadable","onSubmitHandler","setInputRef","undefined","injectIntl","SelectButton","error","stopDefaultEvent","preventDefault","toggleOption","options","indexOf","push","splice","OVERLAY_SCROLLABLE_CLASS","BaseSelectField","shouldScrollIntoView","activeItemIndex","setActiveItemID","id","itemEl","document","getElementById","activeItemID","scrollIntoView","block","selectedItems","selectedItem","onOptionSelect","isOpen","closeDropdown","openDropdown","key","itemCount","nextIndex","setActiveItem","prevIndex","selectOption","multiple","selectMultiOption","selectSingleOption","defaultValue","selectedValues","hasDefaultValue","item","newSelectedValues","slice","defaultOptionIndex","findIndex","option","includes","handleChange","filter","handleOptionSelect","placeholder","title","selectedItemCount","selectedOptions","displayText","join","buttonProps","buttonElProps","buttonText","renderButtonText","selectFieldID","onClick","handleButtonClick","onKeyDown","handleButtonKeyDown","role","optionRenderer","separatorIndices","selectOptions","itemProps","onMouseEnter","isActive","forEach","separatorIndex","uniqueId","isScrollable","listboxProps","handleBlur","handleKeyDown","renderSelectButton","OVERLAY_WRAPPER_CLASS","renderSelectOptions","MultiSelectField","SingleSelectField","fieldType","selectedValue","selectFieldProps","isFieldSelected","TextInputField","innerRef","isRequired","errors","touched","isTouched","getProp","Toggle","isOn","isToggleRightAligned","onBlur","toggleElements","reverse","ToggleField","MARK_NAME_JS_READY","ORIGIN_METADATA_SIDEBAR","EVENT_JS_READY","mark","MetadataSidebar","code","newState","onError","status","isValidError","isUserCorrectableError","sidebarMetadataEditingErrorContent","IS_ERROR_DISPLAYED","api","file","editor","getEditor","getMetadataAPI","deleteMetadata","template","onRemoveSuccessHandler","onApiError","editors","clone","createMetadata","onAddSuccessHandler","ops","oldEditor","updateMetadata","newEditor","replaceEditor","onSaveErrorHandler","isDirty","e","sidebarMetadataFetchingErrorContent","templates","selectedTemplateKey","templateFilters","normalizeTemplates","sidebarFileFetchingErrorContent","currentFile","currentCanUpload","FIELD_PERMISSIONS_CAN_UPLOAD","newCanUpload","shouldFetchMetadata","callback","fetchMetadata","noop","logger","onReadyMetric","endMarkName","componentDidMount","fetchFile","canEdit","find","instance","hasError","isFeatureEnabled","getMetadata","fetchMetadataSuccessCallback","fetchMetadataErrorCallback","refreshCache","fileId","getFileAPI","getFile","fetchFileSuccessCallback","fetchFileErrorCallback","fields","FIELD_IS_EXTERNALLY_OWNED","FIELD_PERMISSIONS","refresh","elementId","showEditor","showLoadingIndicator","showTemplateDropdown","showEmptyContent","onAdd","SIDEBAR_VIEW_METADATA","sidebarMetadataTitle","onModification","onRemove","onSave","flow","withLogger","withErrorBoundary","withAPIContext","COMMUNITY_LINK","CascadePolicy","isCascadingEnabled","isCascadingOverwritten","isCustomMetadata","onCascadeToggle","onCascadeModeChange","shouldShowCascadeOptions","readOnlyState","metadataCascadePolicyEnabledInfo","enableCascadePolicy","checked","applyCascadePolicyText","cascadePolicyLearnMore","cannotApplyCascadePolicyText","cascadePolicyModeQuestion","operationNotImmediate","cascadePolicySkipMode","cascadePolicyOverwriteMode","CustomInstance","data","properties","isEqual","onFieldChange","FIELD_TYPE_STRING","onFieldRemove","prevState","isAddFieldVisible","canAddFields","onAddFieldToggle","CustomInstanceNewField","prototype","hasOwnProperty","call","customErrorDuplicateKey","startsWith","customErrorInternalKey","customErrorRequired","attr","currentTarget","isCancellable","onCancel","customNewField","customNewFieldMessage","customKey","onKeyChange","customKeyPlaceholder","customValue","onValueChange","customValuePlaceholder","commonMessages","cancel","customAdd","EmptyContent","canAdd","noMetadata","noMetadataAddTemplate","Footer","showSave","metadataRemoveTemplate","metadataCancel","metadataSave","createFieldKeyToTypeMap","reduce","prev","type","getValue","FIELD_TYPE_FLOAT","parseFloat","FIELD_TYPE_INTEGER","parseInt","Instance","getState","shouldConfirmRemove","isEditing","isBusy","cascadePolicy","originalData","isCascadingPolicyApplicable","currentData","createJSONPatch","isEnabled","overwrite","cloneDeep","isValid","isValidValue","finalErrors","finalData","invalidInput","setDirty","isFile","message","isProperties","templateKey","TEMPLATE_CUSTOM_PROPERTIES","metadataName","displayName","hasDataChanged","hasCascadingChanged","editClassName","metadataEditTooltip","toggleIsEditing","fieldKeyToTypeMap","componentDidUpdate","prevHasError","prevIsDirty","currentElement","collapsibleRef","current","behavior","getTitle","customTitle","bdlWatermelonRed","getConfirmationMessage","renderDeleteMessage","originalValue","path","op","JSON_PATCH_OP_TEST","JSON_PATCH_OP_REPLACE","JSON_PATCH_OP_REMOVE","JSON_PATCH_OP_ADD","isHidden","animationDuration","RESIN_TAG_TARGET","renderEditButton","onConfirmCancel","onConfirmRemove","Instances","MetadataInstanceConfirmDialog","onConfirm","confirmationMessage","customRemove","InputContainer","getAvailableTemplates","allTemplates","usedTemplates","usedTemplate","scope","TemplateDropdown","isDropdownBusy","activeTemplate","defaultTemplateIcon","activeTemplateIcon","hasUnusedTemplates","hasTemplates","hasResults","indicatorOrMessage","metadataTemplatesServerHasNoTemplates","metadataTemplatesNoRemainingTemplates","metadataTemplatesNoResults","renderedTemplates","isTemplateSelected","buttonClassName","getTemplateName","getSelector","filterText","handleUserInput","metadataTemplateSearchPlaceholder","userInput","defaultMessage","toLowerCase","onDropdownToggle","isDropdownOpen","entryButton","buttonToggleClassName","metadataTemplateAdd","prevTemplates","prevUsedTemplates","flyoutClassName","onClose","onOpen","renderEntryButton","getDropdown","TemplatedInstance","hasFields","hasVisibleFields","some","showNoFieldsMessage","showHiddenFieldsMessage","allAttributesAreHidden","noAttributesForTemplate","FIELD_TYPE_DATE","FIELD_TYPE_ENUM","FIELD_TYPE_MULTISELECT","COLOR_999","CustomField","isLast","dataKey","dataValue","addBtn","removeBtn","DateField","day","month","year","date","isoDate","metadataFieldSetDate","convertISOStringToUTCDate","EnumField","isSelectable","metadataFieldSelectValue","unshift","Array","isArray","Field","Error","invalidMetadataFieldType","FloatField","IntegerField","metadataFieldMultiSelectValue","ReadOnlyField","metadataFieldNoValue","TextField","metadataFieldSetValue","floatRegex","integerRegex","floatValidator","match","integerValidator","fileMetadataRemoveTemplateConfirm","folderMetadataRemoveTemplateConfirm","fileMetadataRemoveCustomTemplateConfirm","folderMetadataRemoveCustomTemplateConfirm","metadataTemplatesTitle","metadataTemplatesFetchFailed","obj","hidden","normalizeTemplateFilters","Set","clonedTemplates","normalizedFilters","has","IconAddMetadataEmptyState","color","width","IconAlertCircle","height","IconCheck","IconEdit","IconMetadataColored","fill","bdlPurpleRain","bdlBoxBlue","IconMinusThin","IconPlusThin","IconSearch","bdlGray40"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gBAAgB,mBAAO,CAAC,yDAAc;;AAEtC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,EAAE;AACf;AACA;AACA;AACA,mBAAmB,SAAS,GAAG,SAAS;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;AC3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;;AAUA,IAAMA,WAAW,GAAG;AAAA,MAAC;AAAEC,YAAF;AAAYC,aAAS,GAAG,EAAxB;AAA4BC;AAA5B,GAAD;AAAA,SAChB;AAAK,aAAS,sBAAeD,SAAf,cAA4BC,UAAU,GAAG,aAAH,GAAmB,EAAzD;AAAd,KAA8EF,QAA9E,CADgB;AAAA,CAApB;;AAIeD,0EAAf,E;;;;;;;;;;;ACjBA,uC;;;;;;;;;;;;ACCA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;;AAMA,IAAMI,UAAU,GAAG;AAAA,MAAC;AAAEH;AAAF,GAAD;AAAA,SACf;AAAM,aAAS,EAAC;AAAhB,KACKA,QADL,EAEI,oDAAC,oEAAD;AAAe,aAAS,EAAC,cAAzB;AAAwC,SAAK,EAAE;AAA/C,IAFJ,CADe;AAAA,CAAnB;;AAOeG,yEAAf,E;;;;;;;;;;;AClBA,uC;;;;;;;;;;;;;;;;;;;;;;;ACCA;CAIA;AACA;;AACA,IAAMC,YAAY,GAAG,MAAM,CAAE,CAA7B;;AAYA,IAAMC,WAAW,GAAG;AAAA,MAAC;AACjBH,cADiB;AAEjBI,cAAU,GAAG,KAFI;AAGjBC,eAHiB;AAIjBC,aAAS,GAAG,KAJK;AAKjBC,SALiB;AAMjBC,QANiB;AAOjBC;AAPiB,GAAD;AAAA,MAQbC,IARa;;AAAA,SAUhB;AAAK,aAAS,EAAC;AAAf,KAEI;AAAO,aAAS,EAAC;AAAjB,KACI;AACI,WAAO,EAAEN,UADb;AAEI,YAAQ,EAAEJ,UAFd;AAGI,QAAI,EAAEQ,IAHV;AAII,YAAQ,EAAEN,YAJd;AAKI,QAAI,EAAC,OALT;AAMI,SAAK,EAAEO;AANX,KAOQC,IAPR,EADJ,EAUI,iEAVJ,EAWI;AAAM,aAAS,EAAEJ,SAAS,GAAG,sBAAH,GAA4B;AAAtD,KAA2DC,KAA3D,CAXJ,CAFJ,EAeKF,WAAW,GAAG;AAAK,aAAS,EAAC;AAAf,KAAoCA,WAApC,CAAH,GAA4D,IAf5E,CAVgB;AAAA,CAApB;;AA8BeF,0EAAf,E;;;;;;;;;;;ACjDA,uC;;;;;;;;;;;;;;;;;;;;;;ACEA;AAGA;;AAKA,IAAMQ,gBAAgB,GAAG,UAA4C;AAAA,MAA3C;AAAEC,SAAF;AAASC,QAAT;AAAeJ;AAAf,GAA2C;AAAA,MAAlBC,IAAkB;;AACjE,MAAM;AAAED,SAAK,EAAEK;AAAT,MAAsCF,KAA5C;AAAA,MAA8BG,SAA9B,4BAA4CH,KAA5C;;AACA,SAAO,oDAAC,oDAAD,eAAiBG,SAAjB,EAAgCL,IAAhC;AAAsC,SAAK,EAAED,KAA7C;AAAoD,cAAU,EAAEA,KAAK,KAAKK;AAA1E,KAAP;AACH,CAHD;;AAKeH,+EAAf,E;;;;;;;;;;;;;;;;;;;;;;;;ACdA;AAEA;;AAcA,MAAMK,UAAN,SAAyBC,+CAAzB,CAAuD;AAKnDC,aAAW,CAACC,KAAD,EAAe;AACtB,UAAMA,KAAN;;AADsB,6CAUPC,KAAD,IAA6B;AAC3C,UAAM;AAAEC;AAAF,UAAaD,KAAnB;AACA,UAAM;AAAEE;AAAF,UAAe,KAAKH,KAA1B;;AAEA,UAAIE,MAAM,YAAYE,gBAAtB,EAAwC;AACpC,aAAKC,QAAL,CAAc;AACVf,eAAK,EAAEY,MAAM,CAACZ;AADJ,SAAd;AAGH;;AAED,UAAIa,QAAJ,EAAc;AACVA,gBAAQ,CAACF,KAAD,CAAR;AACH;AACJ,KAvByB;;AAEtB,SAAKK,KAAL,GAAa;AACThB,WAAK,EAAEU,KAAK,CAACV;AADJ,KAAb;AAGH,GAVkD,CAYnD;AACA;;;AAiBAiB,QAAM,GAAG;AACL,QAAM;AAAE5B,cAAF;AAAYC,eAAZ;AAAuBS;AAAvB,QAAgC,KAAKW,KAA3C;AACA,QAAM;AAAEV,WAAK,EAAEkB;AAAT,QAAwB,KAAKF,KAAnC;AAEA,WACI;AAAK,eAAS,wBAAiB1B,SAAjB,CAAd;AAA4C,cAAQ,EAAE,KAAK6B;AAA3D,OACKX,8CAAA,CAAeY,GAAf,CAAmB/B,QAAnB,EAA6BgC,KAAK,IAAI;AACnC,yBAA2BA,KAAK,CAACX,KAAjC;AAAA,UAAM;AAAEV;AAAF,OAAN;AAAA,UAAkBC,IAAlB;;AAEA,aAAO,oDAAC,oDAAD;AAAa,kBAAU,EAAED,KAAK,KAAKkB,UAAnC;AAA+C,YAAI,EAAEnB,IAArD;AAA2D,aAAK,EAAEC;AAAlE,SAA6EC,IAA7E,EAAP;AACH,KAJA,CADL,CADJ;AASH;;AA3CkD;;gBAAjDM,U,kBACoB;AAClBjB,WAAS,EAAE;AADO,C;;AA8CXiB,yEAAf,E;;;;;;;;;;;;;;;;;;;;;;AC9DA;AAGA;;AAKA,IAAMe,eAAe,GAAG,UAAqC;AAAA,MAApC;AAAEnB,SAAF;AAASC;AAAT,GAAoC;AAAA,MAAlBH,IAAkB;;AACzD,MAAM;AAAED;AAAF,MAAYG,KAAlB;AACA,SAAO,oDAAC,mDAAD;AAAqB,OAAG,EAAEH;AAA1B,KAAqCG,KAArC,EAAgDF,IAAhD,EAAP;AACH,CAHD;;AAKeqB,8EAAf,E;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AAEA,IAAMC,QAAQ,GAAGC,iEAAc,CAAC;AAC5BC,kBAAgB;AAAA;AAAA;AAAA,GADY;AAM5BC,mBAAiB;AAAA;AAAA;AAAA,GANW;AAW5BC,aAAW;AAAA;AAAA;AAAA;AAXiB,CAAD,CAA/B;;AA+CA,MAAMC,UAAN,SAAyBpB,+CAAzB,CAAuD;AAAA;AAAA;;AAAA,mCAS3C;AACJqB,aAAO,EAAE;AADL,KAT2C;;AAAA,4CAyBjClB,KAAD,IAA6B;AAC1C,UAAM;AAAEE,gBAAF;AAAYiB;AAAZ,UAAmD,KAAKpB,KAA9D;;AACA,UAAIoB,kCAAJ,EAAwC;AACpCnB,aAAK,CAACoB,eAAN;AACH;;AAED,UAAI,KAAKC,WAAT,EAAsB;AAClB,aAAKA,WAAL,CAAiBhC,KAAjB,GAAyB,EAAzB;AACH;;AACD,WAAKe,QAAL,CAAc;AAAEc,eAAO,EAAE;AAAX,OAAd;;AAEA,UAAIhB,QAAJ,EAAc;AACVA,gBAAQ,CAAC,EAAD,CAAR;AACH;AACJ,KAvCkD;;AAAA,6CAyCjC,UAAgB;AAAA,UAAf;AAAED;AAAF,OAAe;AAC9B,UAAM;AAAEZ;AAAF,UAAYY,MAAlB;AACA,UAAM;AAAEC;AAAF,UAAe,KAAKH,KAA1B;AACA,WAAKK,QAAL,CAAc;AAAEc,eAAO,EAAE,CAAC7B,KAAD,IAAU,CAACA,KAAK,CAACiC,IAAN,GAAaC;AAAnC,OAAd;;AAEA,UAAIrB,QAAJ,EAAc;AACVA,gBAAQ,CAACb,KAAD,CAAR;AACH;AACJ,KAjDkD;;AAAA,6CAmDjCW,KAAK,IAAI;AACvB,UAAM;AAAEX;AAAF,UAAYW,KAAK,CAACC,MAAN,CAAauB,QAAb,CAAsB,CAAtB,CAAlB;AACA,UAAM;AAAEC;AAAF,UAAe,KAAK1B,KAA1B;;AAEA,UAAI0B,QAAJ,EAAc;AACVA,gBAAQ,CAACpC,KAAD,EAAQW,KAAR,CAAR;AACH;AACJ,KA1DkD;;AAAA,yCA4DrC0B,OAAO,IAAI;AACrB,WAAKL,WAAL,GAAmBK,OAAnB;;AAEA,UAAI,KAAK3B,KAAL,CAAW4B,cAAf,EAA+B;AAC3B,aAAK5B,KAAL,CAAW4B,cAAX,CAA0B,KAAKN,WAA/B;AACH;AACJ,KAlEkD;AAAA;;AAanD,SAAOO,wBAAP,CAAgC7B,KAAhC,EAAmD;AAC/C,QAAM;AAAEV;AAAF,QAAYU,KAAlB;;AAEA,QAAIV,KAAK,IAAI,CAAC,CAACA,KAAK,CAACiC,IAAN,EAAf,EAA6B;AACzB,aAAO;AACHJ,eAAO,EAAE;AADN,OAAP;AAGH;;AAED,WAAO,IAAP;AACH;;AA+CDZ,QAAM,GAAG;AACL,sBAAmG,KAAKP,KAAxG;AAAA,QAAM;AAAE8B,YAAF;AAAUlD,eAAV;AAAqBmD,UAArB;AAA2BC,eAA3B;AAAsCC,YAAtC;AAA8C5C,UAA9C;AAAoD6C,iBAApD;AAAiEC;AAAjE,KAAN;AAAA,QAA0F5C,IAA1F;;AACA,QAAM;AAAE4B;AAAF,QAAc,KAAKb,KAAzB;AAEA,QAAM8B,UAAU,GAAGC,kDAAI,CAAC9C,IAAD,EAAO,CAC1B,gBAD0B,EAE1B,UAF0B,EAG1B,UAH0B,EAI1B,UAJ0B,EAK1B,oCAL0B,CAAP,CAAvB;AAQA,QAAM;AAAE+C;AAAF,QAAoBP,IAA1B;AACA,QAAMQ,OAAO,GAAGC,iDAAU,CAAC5D,SAAD,EAAY,wBAAZ,CAA1B;AACA,QAAM6D,cAAc,GAAGD,iDAAU,CAAC,aAAD,EAAgB;AAC7C,kBAAYrB,OADiC;AAE7C,0BAAoBgB;AAFyB,KAAhB,CAAjC;AAIA,QAAMO,YAAY,GAAGC,MAAM,CAACC,IAAP,CAAYV,WAAZ,EAAyBxB,GAAzB,CAA6B,CAACmC,KAAD,EAAQC,KAAR,KAC9C;AAAO,SAAG,EAAEA,KAAZ;AAAmB,UAAI,EAAED,KAAzB;AAAgC,UAAI,EAAC,QAArC;AAA8C,WAAK,EAAEX,WAAW,CAACW,KAAD;AAAhE,MADiB,CAArB;;AAIA,QAAME,aAAa,GAAG,MAClB;AAAK,eAAS,EAAC;AAAf,OACI;AACI,UAAI,EAAC,QADT;AAEI,eAAS,EAAC,6BAFd;AAGI,WAAK,EAAET,aAAa,CAACzB,QAAQ,CAACG,iBAAV;AAHxB,OAKI,oDAAC,iEAAD,OALJ,CADJ,EAQI;AACI,eAAS,EAAC,4BADd;AAEI,aAAO,EAAE,KAAKgC,cAFlB;AAGI,WAAK,EAAEV,aAAa,CAACzB,QAAQ,CAACE,gBAAV,CAHxB;AAII,UAAI,EAAC;AAJT,OAMI,oDAAC,gEAAD,OANJ,CARJ,CADJ;;AAoBA,QAAMkC,qBAAqB,GAAGC,+EAAY,CAACH,aAAD,CAA1C,CA1CK,CA4CL;;AACA,QAAMhE,YAAY,GAAG,MAAM,CAAE,CAA7B;;AAEA,WACI;AAAK,eAAS,EAAEwD;AAAhB,OACI;AACI,YAAM,EAAET,MADZ;AAEI,eAAS,EAAEW,cAFf;AAGI,YAAM,EAAER,MAHZ;AAII,cAAQ,EAAE,KAAKxB,eAJnB;AAKI,cAAQ,EAAE,KAAK0C,eALnB;AAMI,UAAI,EAAC;AANT,OAQI;AACI,SAAG,EAAE,KAAKC,WADd;AAEI,oBAAYd,aAAa,CAACzB,QAAQ,CAACI,WAAV,CAF7B;AAGI,kBAAY,EAAC,KAHjB;AAII,eAAS,EAAC,cAJd;AAKI,UAAI,EAAE5B,IALV;AAMI,cAAQ,EAAEN,YANd;AAOI,UAAI,EAAC;AAPT,OAQQqD,UARR,EARJ,EAkBI,oDAAC,qBAAD;AACI,eAAS,EAAEJ,SADf;AAEI,2BAAqB,EAAE;AACnBpD,iBAAS,EAAE;AADQ;AAF3B,MAlBJ,EAwBK8D,YAxBL,CADJ,CADJ;AA8BH;;AAnJkD;;gBAAjDxB,U,kBACoB;AAClBY,QAAM,EAAEuB,SADU;AAElBpB,QAAM,EAAE,KAFU;AAGlB5C,MAAI,EAAE,QAHY;AAIlB6C,aAAW,EAAE,EAJK;AAKlBC,gBAAc,EAAE;AALE,C;;AAqJXmB,4HAAU,CAACpC,UAAD,CAAzB,E;;;;;;;;;;;AClNA,uC;;;;;;;;;;;;;;;;;;;;;;;;;;ACCA;AACA;AAEA;AACA;;AASA,IAAMqC,YAAY,GAAG;AAAA,MAAC;AAAE5E,YAAF;AAAYC,aAAS,GAAG,EAAxB;AAA4B4E,SAA5B;AAAmC3E,cAAU,GAAG;AAAhD,GAAD;AAAA,MAA2DU,IAA3D;;AAAA,SACjB,oDAAC,gDAAD;AAAS,WAAO,EAAE,CAAC,CAACiE,KAApB;AAA2B,YAAQ,EAAC,cAApC;AAAmD,QAAI,EAAEA,KAAzD;AAAgE,SAAK,EAAC;AAAtE,KACI;AACI,aAAS,EAAEhB,iDAAU,CAAC5D,SAAD,EAAY,eAAZ,EAA6B;AAC9C,oBAAc,CAAC,CAAC4E;AAD8B,KAA7B,CADzB;AAII,YAAQ,EAAE3E,UAJd;AAKI,QAAI,EAAC;AALT,KAMQU,IANR,GAQKZ,QARL,CADJ,CADiB;AAAA,CAArB;;AAee4E,2EAAf,E;;;;;;;;;;;AC7BA,uC;;;;;;;;;;;;ACCA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;;AAEA,SAASE,gBAAT,CAA0BxD,KAA1B,EAAiC;AAC7BA,OAAK,CAACyD,cAAN;AACAzD,OAAK,CAACoB,eAAN;AACH;;AAED,SAASsC,YAAT,CAAsBC,OAAtB,EAA+BtE,KAA/B,EAAsC;AAClC,MAAMwD,KAAK,GAAGc,OAAO,CAACC,OAAR,CAAgBvE,KAAhB,CAAd;;AAEA,MAAIwD,KAAK,KAAK,CAAC,CAAf,EAAkB;AACdc,WAAO,CAACE,IAAR,CAAaxE,KAAb;AACH,GAFD,MAEO;AACHsE,WAAO,CAACG,MAAR,CAAejB,KAAf,EAAsB,CAAtB;AACH;AACJ;;AAyCM,IAAMkB,wBAAwB,GAAG,qCAAjC;;AAEP,MAAMC,eAAN,SAA8BnE,+CAA9B,CAA4D;AAWxDC,aAAW,CAACC,KAAD,EAAe;AAAA;;AACtB,UAAMA,KAAN,CADsB;AAAA;;AAAA,2CAaV,UAAC8C,KAAD,EAA0D;AAAA,UAA1CoB,oBAA0C,uEAAT,IAAS;;AACtE,WAAI,CAAC7D,QAAL,CAAc;AAAE8D,uBAAe,EAAErB,KAAnB;AAA0BoB;AAA1B,OAAd;;AACA,UAAIpB,KAAK,KAAK,CAAC,CAAf,EAAkB;AACd,aAAI,CAACsB,eAAL,CAAqB,IAArB;AACH;AACJ,KAlByB;;AAAA,6CAoBPC,EAAD,IAAiB;AAC/B,UAAM;AAAEH;AAAF,UAA2B,KAAK5D,KAAtC;AACA,UAAMgE,MAAM,GAAGD,EAAE,GAAGE,QAAQ,CAACC,cAAT,CAAwBH,EAAxB,CAAH,GAAiC,IAAlD;AAEA,WAAKhE,QAAL,CAAc;AAAEoE,oBAAY,EAAEJ,EAAhB;AAAoBH,4BAAoB,EAAE;AAA1C,OAAd,EAAiE,MAAM;AACnE,YAAIA,oBAAJ,EAA0B;AACtBQ,2EAAc,CAACJ,MAAD,EAAS;AAAEK,iBAAK,EAAE;AAAT,WAAT,CAAd;AACH;AACJ,OAJD;AAKH,KA7ByB;;AAAA,0CAiCVC,aAAD,IAA4C;AACvD,UAAM;AAAEzE;AAAF,UAAe,KAAKH,KAA1B;;AAEA,UAAIG,QAAJ,EAAc;AACVA,gBAAQ,CAACyE,aAAD,CAAR;AACH;AACJ,KAvCyB;;AAAA,gDAyCJC,YAAD,IAAoC;AACrD,UAAM;AAAEC;AAAF,UAAqB,KAAK9E,KAAhC;;AAEA,UAAI8E,cAAJ,EAAoB;AAChBA,sBAAc,CAACD,YAAD,CAAd;AACH;AACJ,KA/CyB;;AAAA,+CAiDN,MAAM;AACtB,UAAI,KAAKvE,KAAL,CAAWyE,MAAf,EAAuB;AACnB,aAAKC,aAAL;AACH,OAFD,MAEO;AACH,aAAKC,YAAL;AACH;AACJ,KAvDyB;;AAAA,iDAyDHhF,KAAD,IAAqC;AACvD,UAAM;AAAEkE;AAAF,UAAsB,KAAK7D,KAAjC,CADuD,CAGvD;;AACA,UAAI,CAACL,KAAK,CAACiF,GAAN,KAAc,GAAd,IAAqBjF,KAAK,CAACiF,GAAN,KAAc,OAApC,KAAgDf,eAAe,KAAK,CAAC,CAAzE,EAA4E;AACxElE,aAAK,CAACyD,cAAN;AACH;AACJ,KAhEyB;;AAAA,wCAkEb,MAAM;AACf,UAAM;AAAEqB;AAAF,UAAa,KAAKzE,KAAxB;;AACA,UAAIyE,MAAJ,EAAY;AACR,aAAKC,aAAL;AACH;AACJ,KAvEyB;;AAAA,2CAyET/E,KAAD,IAAmD;AAC/D,UAAM;AAAE2D;AAAF,UAAc,KAAK5D,KAAzB;AACA,UAAM;AAAEmE,uBAAF;AAAmBY;AAAnB,UAA8B,KAAKzE,KAAzC;AACA,UAAM6E,SAAS,GAAGvB,OAAO,CAACpC,MAA1B;;AAEA,cAAQvB,KAAK,CAACiF,GAAd;AACI,aAAK,WAAL;AACIzB,0BAAgB,CAACxD,KAAD,CAAhB;;AACA,cAAI8E,MAAJ,EAAY;AACR,gBAAMK,SAAS,GAAGjB,eAAe,KAAKgB,SAAS,GAAG,CAAhC,GAAoC,CAAC,CAArC,GAAyChB,eAAe,GAAG,CAA7E;AACA,iBAAKkB,aAAL,CAAmBD,SAAnB;AACH,WAHD,MAGO;AACH,iBAAKH,YAAL;AACH;;AACD;;AACJ,aAAK,SAAL;AACIxB,0BAAgB,CAACxD,KAAD,CAAhB;;AACA,cAAI8E,MAAJ,EAAY;AACR,gBAAMO,SAAS,GAAGnB,eAAe,KAAK,CAAC,CAArB,GAAyBgB,SAAS,GAAG,CAArC,GAAyChB,eAAe,GAAG,CAA7E;AACA,iBAAKkB,aAAL,CAAmBC,SAAnB;AACH,WAHD,MAGO;AACH,iBAAKL,YAAL;AACH;;AACD;;AACJ,aAAK,OAAL;AACA,aAAK,GAAL;AACI,cAAId,eAAe,KAAK,CAAC,CAArB,IAA0BY,MAA9B,EAAsC;AAClCtB,4BAAgB,CAACxD,KAAD,CAAhB;AACA,iBAAKsF,YAAL,CAAkBpB,eAAlB,EAFkC,CAGlC;;AACA,gBAAIlE,KAAK,CAACiF,GAAN,KAAc,OAAlB,EAA2B;AACvB,mBAAKF,aAAL;AACH;AACJ;;AACD;;AACJ,aAAK,QAAL;AACI,cAAID,MAAJ,EAAY;AACRtB,4BAAgB,CAACxD,KAAD,CAAhB;AACA,iBAAK+E,aAAL;AACH;;AACD;AACJ;AApCJ;AAsCH,KApHyB;;AAAA,0CAsHX,MAAM;AACjB,UAAI,CAAC,KAAK1E,KAAL,CAAWyE,MAAhB,EAAwB;AACpB,aAAK1E,QAAL,CAAc;AAAE0E,gBAAM,EAAE;AAAV,SAAd;AACH;AACJ,KA1HyB;;AAAA,2CA4HV,MAAM;AAClB,UAAI,KAAKzE,KAAL,CAAWyE,MAAf,EAAuB;AACnB,aAAK1E,QAAL,CAAc;AACVoE,sBAAY,EAAE,IADJ;AAEVN,yBAAe,EAAE,CAAC,CAFR;AAGVY,gBAAM,EAAE;AAHE,SAAd;AAKH;AACJ,KApIyB;;AAAA,0CAsIVjC,KAAD,IAAmB;AAC9B,UAAM;AAAE0C;AAAF,UAAe,KAAKxF,KAA1B;;AAEA,UAAIwF,QAAJ,EAAc;AACV,aAAKC,iBAAL,CAAuB3C,KAAvB;AACH,OAFD,MAEO;AACH,aAAK4C,kBAAL,CAAwB5C,KAAxB;AACA,aAAKkC,aAAL,GAFG,CAEmB;AACzB;AACJ,KA/IyB;;AAAA,+CA2JLlC,KAAD,IAAmB;AACnC,UAAM;AAAE6C,oBAAF;AAAgB/B,eAAhB;AAAyBgC;AAAzB,UAA4C,KAAK5F,KAAvD;AACA,UAAM6F,eAAe,GAAGF,YAAY,IAAI,IAAxC,CAFmC,CAEW;;AAC9C,UAAMG,IAAI,GAAGlC,OAAO,CAACd,KAAD,CAApB,CAHmC,CAKnC;;AACA,UAAI+C,eAAe,IAAIF,YAAY,KAAKG,IAAI,CAACxG,KAA7C,EAAoD;AAChD,aAAKoG,kBAAL,CAAwB5C,KAAxB;AACA;AACH,OATkC,CAWnC;;;AACA,UAAMiD,iBAAiB,GAAGH,cAAc,CAACI,KAAf,CAAqB,CAArB,CAA1B;AACArC,kBAAY,CAACoC,iBAAD,EAAoBD,IAAI,CAACxG,KAAzB,CAAZ,CAbmC,CAenC;;AACA,UAAIuG,eAAJ,EAAqB;AACjB,YAAMI,kBAAkB,GAAGrC,OAAO,CAACsC,SAAR,CAAkBC,MAAM,IAAIA,MAAM,CAAC7G,KAAP,KAAiBqG,YAA7C,CAA3B;;AAEA,YAAIM,kBAAkB,KAAK,CAAC,CAA5B,EAA+B;AAC3B,cAAIF,iBAAiB,CAACvE,MAAlB,KAA6B,CAAjC,EAAoC;AAChC;AACA,iBAAKkE,kBAAL,CAAwBO,kBAAxB;AACA;AACH;;AACD,cAAIF,iBAAiB,CAACvE,MAAlB,GAA2B,CAA3B,IAAgCuE,iBAAiB,CAACK,QAAlB,CAA2BT,YAA3B,CAApC,EAA8E;AAC1E;AACAI,6BAAiB,CAAChC,MAAlB,CAAyBkC,kBAAzB,EAA6C,CAA7C;AACH;AACJ;AACJ,OA9BkC,CAgCnC;;;AACA,WAAKI,YAAL,CAAkBzC,OAAO,CAAC0C,MAAR,CAAeH,MAAM,IAAIJ,iBAAiB,CAACK,QAAlB,CAA2BD,MAAM,CAAC7G,KAAlC,CAAzB,CAAlB;AAEA,WAAKiH,kBAAL,CAAwBT,IAAxB;AACH,KA/LyB;;AAAA,8CAiMP,MAAM;AACrB,UAAM;AAAElC,eAAF;AAAW4C,mBAAX;AAAwBZ,sBAAxB;AAAwCa;AAAxC,UAAkD,KAAKzG,KAA7D;AACA,UAAM0G,iBAAiB,GAAGd,cAAc,CAACpE,MAAzC,CAFqB,CAIrB;;AACA,UAAIkF,iBAAiB,KAAK,CAAtB,IAA2BF,WAA/B,EAA4C;AACxC,eAAOA,WAAP;AACH,OAPoB,CASrB;;;AACA,UAAIC,KAAJ,EAAW;AACP,eAAOA,KAAP;AACH,OAZoB,CAcrB;;;AACA,UAAME,eAAe,GAAG/C,OAAO,CAAC0C,MAAR,CAAeH,MAAM,IAAIP,cAAc,CAACQ,QAAf,CAAwBD,MAAM,CAAC7G,KAA/B,CAAzB,CAAxB;AACA,aAAOqH,eAAe,CAACjG,GAAhB,CAAoByF,MAAM,IAAIA,MAAM,CAACS,WAArC,EAAkDC,IAAlD,CAAuD,IAAvD,CAAP;AACH,KAlNyB;;AAAA,gDAoNL,MAAM;AACvB,UAAM;AAAEpC,oBAAF;AAAgBM;AAAhB,UAA2B,KAAKzE,KAAtC;AACA,UAAM;AAAEwG,mBAAW,EAAEC,aAAf;AAA8BlI,kBAA9B;AAA0CD,iBAA1C;AAAqD4E;AAArD,UAA+D,KAAKxD,KAA1E;AACA,UAAMgH,UAAU,GAAG,KAAKC,gBAAL,EAAnB;;AACA,UAAMH,WAAW,qBACVC,aADU;AAEb,iCAAyBtC,YAFZ;AAGb,6BAAqB,MAHR;AAIb,yBAAiBM,MAJJ;AAKb,qBAAa,KAAKmC,aALL;AAMbtI,iBANa;AAObC,kBAPa;AAQbsI,eAAO,EAAE,KAAKC,iBARD;AASbC,iBAAS,EAAE,KAAKC,mBATH;AAUb;AACAC,YAAI,EAAE,UAXO;AAYbd,aAAK,EAAEO;AAZM,QAAjB;;AAeA,aACI,oDAAC,sDAAD,eAAkBF,WAAlB;AAA+B,aAAK,EAAEtD;AAAtC,UACKwD,UADL,CADJ;AAKH,KA5OyB;;AAAA,iDA8OJ,MAAM;AACxB,UAAM;AAAEQ,sBAAF;AAAkB5D,eAAlB;AAA2BgC,sBAA3B;AAA2C6B;AAA3C,UAAgE,KAAKzH,KAA3E;AACA,UAAM;AAAEmE;AAAF,UAAsB,KAAK7D,KAAjC;AAEA,UAAMoH,aAAa,GAAG9D,OAAO,CAAClD,GAAR,CAAuD,CAACoF,IAAD,EAAOhD,KAAP,KAAiB;AAC1F,YAAM;AAAE8D,qBAAF;AAAetH;AAAf,YAAyBwG,IAA/B;AAEA,YAAM7G,UAAU,GAAG2G,cAAc,CAACQ,QAAf,CAAwB9G,KAAxB,CAAnB;AAEA,YAAMqI,SAAiB,GAAG;AACtB/I,mBAAS,EAAE,eADW;AAEtBsG,aAAG,EAAEpC,KAFiB;;AAGtB;AACAqE,iBAAO,EAAElH,KAAK,IAAI;AACdA,iBAAK,CAACyD,cAAN;AAEA,iBAAK6B,YAAL,CAAkBzC,KAAlB;AACH,WARqB;AAStB8E,sBAAY,EAAE,MAAM;AAChB,iBAAKvC,aAAL,CAAmBvC,KAAnB,EAA0B,KAA1B;AACH,WAXqB;AAYtBsB,yBAAe,EAAE,KAAKA;AAZA,SAA1B;;AAeA,YAAItB,KAAK,KAAKqB,eAAd,EAA+B;AAC3BwD,mBAAS,CAACE,QAAV,GAAqB,IAArB;AACH,SAtByF,CAwB1F;;AACA;;;AACA,eACI,oDAAC,sDAAD,EAAkBF,SAAlB,EACI;AAAK,mBAAS,EAAC;AAAf,WACK1I,UAAU,GAAG,oDAAC,gEAAD;AAAW,gBAAM,EAAE,EAAnB;AAAuB,eAAK,EAAE;AAA9B,UAAH,GAA0C,IADzD,CADJ,EAIKuI,cAAc,GAAGA,cAAc,CAAC1B,IAAD,CAAjB,GAA0Bc,WAJ7C,CADJ;AAQA;AACH,OAnCqB,CAAtB;AAqCAa,sBAAgB,CAACK,OAAjB,CAAyB,CAACC,cAAD,EAAiBjF,KAAjB,KAA2B;AAChD4E,qBAAa,CAAC3D,MAAd,CAAqBgE,cAAc,GAAGjF,KAAtC,EAA6C,CAA7C,EAAgD;AAAI,aAAG,qBAAciF,cAAd,CAAP;AAAuC,cAAI,EAAC;AAA5C,UAAhD;AACH,OAFD;AAIA,aAAOL,aAAP;AACH,KA5RyB;;AAGtB,SAAKR,aAAL,GAAqBc,sDAAQ,CAAC,aAAD,CAA7B;AAEA,SAAK1H,KAAL,GAAa;AACTmE,kBAAY,EAAE,IADL;AAETN,qBAAe,EAAE,CAAC,CAFT;AAGTY,YAAM,EAAE,KAHC;AAITb,0BAAoB,EAAE;AAJb,KAAb;AAMH;;AAsIDwB,oBAAkB,CAAC5C,KAAD,EAAgB;AAC9B,QAAM;AAAEc,aAAF;AAAWgC;AAAX,QAA8B,KAAK5F,KAAzC;AACA,QAAM8F,IAAI,GAAGlC,OAAO,CAACd,KAAD,CAApB,CAF8B,CAG9B;;AACA,QAAI,CAAC8C,cAAc,CAACQ,QAAf,CAAwBN,IAAI,CAACxG,KAA7B,CAAL,EAA0C;AACtC,WAAK+G,YAAL,CAAkB,CAACP,IAAD,CAAlB;AACH;;AACD,SAAKS,kBAAL,CAAwBT,IAAxB;AACH;;AAqIDvF,QAAM,GAAG;AACL,QAAM;AAAE3B,eAAF;AAAa4G,cAAb;AAAuByC;AAAvB,QAAwC,KAAKjI,KAAnD;AACA,QAAM;AAAE+E;AAAF,QAAa,KAAKzE,KAAxB,CAFK,CAIL;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAM4H,YAAY,GAAG,EAArB;;AACA,QAAI1C,QAAJ,EAAc;AACV0C,kBAAY,CAAC,sBAAD,CAAZ,GAAuC,IAAvC;AACH;;AAED,WACI;AACA;AACI,iBAAS,EAAE1F,iDAAU,CAAC5D,SAAD,EAAY,kBAAZ,CADzB;AAEI,cAAM,EAAE,KAAKuJ,UAFjB;AAGI,iBAAS,EAAE,KAAKC;AAHpB,SAKI;AAAK,iBAAS,EAAC;AAAf,SACK,KAAKC,kBAAL,EADL,EAEI;AACI,iBAAS,EAAE7F,iDAAU,CAAC8F,gEAAD,EAAwB;AACzC,wBAAcvD;AAD2B,SAAxB;AADzB,SAKI;AACI,iBAAS,EAAEvC,iDAAU,CAAC,SAAD,EAAY;AAC7B,WAACwB,wBAAD,GAA4BiE;AADC,SAAZ,CADzB;AAII,UAAE,EAAE,KAAKf,aAJb;AAKI,YAAI,EAAC,SALT,CAMI;AANJ;AAOI,mBAAW,EAAEjH,KAAK,IAAIA,KAAK,CAACyD,cAAN;AAP1B,SAQQwE,YARR,GAUK,KAAKK,mBAAL,EAVL,CALJ,CAFJ,CALJ;AAFJ;AA8BH;;AAvVuD;;gBAAtDtE,e,kBACoB;AAClB6C,aAAW,EAAE,EADK;AAElBjI,YAAU,EAAE,KAFM;AAGlBoJ,cAAY,EAAE,KAHI;AAIlBzC,UAAQ,EAAE,KAJQ;AAKlB5B,SAAO,EAAE,EALS;AAMlBgC,gBAAc,EAAE,EANE;AAOlB6B,kBAAgB,EAAE;AAPA,C;;AAyVXxD,8EAAf,E;;;;;;;;;;;;;;;;;;AC/ZA;AAEA;;AAOA,IAAMuE,gBAAgB,GAAG;AAAA,MAAMjJ,IAAN;;AAAA,SAAwB,2DAAC,wDAAD,eAAqBA,IAArB;AAA2B,YAAQ;AAAnC,KAAxB;AAAA,CAAzB;;AAEeiJ,+EAAf,E;;;;;;;;;;;ACZA,uC;;;;;;;;;;;;;;;;;;;;;;;;;;ACCA;AACA;AAEA;;AAkBA,MAAMC,iBAAN,SAAgC3I,+CAAhC,CAAuD;AAAA;AAAA;;AAAA,0CACnC6G,eAAD,IAA8C;AACzD,UAAM;AAAExG,gBAAF;AAAYuI;AAAZ,UAA0B,KAAK1I,KAArC,CADyD,CAGzD;;AACA,UAAIG,QAAQ,IAAIwG,eAAe,CAACnF,MAAhB,KAA2B,CAA3C,EAA8C;AAC1CrB,gBAAQ,CAACwG,eAAe,CAAC,CAAD,CAAhB,EAAqB+B,SAArB,CAAR;AACH;AACJ,KARkD;AAAA;;AAUnDnI,QAAM,GAAG;AACL,sBAA4D,KAAKP,KAAjE;AAAA,QAAM;AAAEnB,gBAAF;AAAc8J,mBAAd;AAA6BnC;AAA7B,KAAN;AAAA,QAAmDjH,IAAnD,yFADK,CAGL;AACA;AACA;AAEA;;;AACA,QAAMqJ,gBAAgB,GAAGvG,kDAAI,CAAC9C,IAAD,EAAO,CAAC,cAAD,EAAiB,UAAjB,EAA6B,UAA7B,CAAP,CAA7B,CARK,CAUL;;AACA,QAAMsJ,eAAe,GAAGF,aAAa,KAAK,IAA1C;AACAC,oBAAgB,CAAChD,cAAjB,GAAkC,CAACiD,eAAD,GAAmB,EAAnB,GAAwB,CAACF,aAAD,CAA1D;AAEA,WACI,oDAAC,wDAAD;AACI,eAAS,EAAE,CAACE,eAAD,IAAoBrC,WAApB,GAAkC,aAAlC,GAAkD,EADjE;AAEI,gBAAU,EAAE3H,UAFhB;AAGI,cAAQ,EAAE,KAAKwH,YAHnB;AAII,iBAAW,EAAEG;AAJjB,OAKQoC,gBALR,EADJ;AASH;;AAjCkD;;AAoCxCH,gFAAf,E;;;;;;;;;;;;;;;;;;;;;;;;ACxDA;AACA;AAGA;;AAKA,IAAMK,cAAc,GAAG,UAA2D;AAAA,MAA1D;AAAErJ,SAAF;AAASC,QAAT;AAAeqJ,YAAf;AAAyBC;AAAzB,GAA0D;AAAA,MAAlBzJ,IAAkB;;AAC9E,MAAM;AAAEF;AAAF,MAAWI,KAAjB;AACA,MAAM;AAAEwJ,UAAF;AAAUC;AAAV,MAAsBxJ,IAA5B;AACA,MAAMyJ,SAAS,GAAGC,iDAAO,CAACF,OAAD,EAAU7J,IAAV,CAAzB;AACA,MAAMmE,KAAK,GAAG2F,SAAS,GAAGC,iDAAO,CAACH,MAAD,EAAS5J,IAAT,CAAV,GAA2B,IAAlD;AACA,SAAO,oDAAC,kDAAD,eAAwBI,KAAxB,EAAmCF,IAAnC;AAAyC,YAAQ,EAAEwJ,QAAnD;AAA6D,SAAK,EAAEvF,KAApE;AAA2E,qBAAiB,EAAEwF;AAA9F,KAAP;AACH,CAND;;AAQeF,6EAAf,E;;;;;;;;;;;;AClBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AAEA;;AAuBA,IAAMO,MAAM,GAAG,UAWF;AAAA,MAXG;AACZzK,aAAS,GAAG,EADA;AAEZM,eAFY;AAGZL,cAHY;AAIZyK,QAJY;AAKZC,wBAAoB,GAAG,KALX;AAMZnK,SANY;AAOZC,QAPY;AAQZmK,UARY;AASZrJ;AATY,GAWH;AAAA,MADNZ,IACM;;AACT,MAAMgD,OAAO,GAAGC,iDAAU,CAAC,kBAAD,EAAqB5D,SAArB,EAAgC;AACtD,+BAA2B2K;AAD2B,GAAhC,CAA1B;AAGA,MAAIE,cAAc,GAAG,CACjB;AAAK,OAAG,EAAC,sBAAT;AAAgC,aAAS,EAAC;AAA1C,IADiB,EAEjB;AAAK,OAAG,EAAC,qBAAT;AAA+B,aAAS,EAAC;AAAzC,KACKrK,KADL,CAFiB,CAArB;;AAOA,MAAImK,oBAAJ,EAA0B;AACtBE,kBAAc,GAAGA,cAAc,CAACC,OAAf,EAAjB;AACH;;AAED,SACI;AAAK,aAAS,EAAEnH;AAAhB,KAEI;AAAO,aAAS,EAAC;AAAjB,KACI;AACI,WAAO,EAAE+G,IADb;AAEI,aAAS,EAAC,qBAFd;AAGI,YAAQ,EAAEzK,UAHd;AAII,QAAI,EAAEQ,IAJV;AAKI,UAAM,EAAEmK,MALZ;AAMI,YAAQ,EAAErJ,QANd;AAOI,QAAI,EAAC;AAPT,KAQQZ,IARR,EADJ,EAWKkK,cAXL,CAFJ,EAeKvK,WAAW,GAAG;AAAK,aAAS,EAAC;AAAf,KAA4CA,WAA5C,CAAH,GAAoE,IAfpF,CADJ;AAmBH,CA7CD;;AAgDemK,qEAAf,E;;;;;;;;;;;AC3EA,uC;;;;;;;;;;;;;;;;;;;;;;ACEA;AAGA;;AAKA,IAAMM,WAAW,GAAG,UAAqC;AAAA,MAApC;AAAElK,SAAF;AAASC;AAAT,GAAoC;AAAA,MAAlBH,IAAkB;;AACrD,MAAM;AAAED;AAAF,MAAYG,KAAlB;AACA,SAAO,oDAAC,+CAAD,eAAqBA,KAArB,EAAgCF,IAAhC;AAAsC,QAAI,EAAE,CAAC,CAACD;AAA9C,KAAP;AACH,CAHD;;AAKeqK,0EAAf,E;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDA;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQA;AA2BA,IAAMC,kBAAkB,aAAMC,mEAAN,cAAiCC,wEAAjC,CAAxB;AAEAC,gEAAI,CAACH,kBAAD,CAAJ;;AAEA,MAAMI,eAAN,SAA8BlK,mDAA9B,CAAgE;AAO5DC,aAAW,CAACC,KAAD,EAAe;AAAA;;AACtB,UAAMA,KAAN,CADsB;AAAA;;AAAA,mCANlB;AAAEgC,eAAS,EAAE;AAAb,KAMkB;;AAAA,wCAoBb,UAACwB,KAAD,EAA0ByG,IAA1B,EAAkE;AAAA,UAA1BC,QAA0B,uEAAP,EAAO;AAC3E,UAAM;AAAEC;AAAF,UAAqB,KAAI,CAACnK,KAAhC;AACA,UAAM;AAAEoK;AAAF,UAAa5G,KAAnB;AACA,UAAM6G,YAAY,GAAGC,4EAAsB,CAACF,MAAD,CAA3C;;AACA,WAAI,CAAC/J,QAAL;AACImD,aAAK,EAAE3C,yDAAQ,CAAC0J,kCADpB;AAEIvI,iBAAS,EAAE;AAFf,SAGOkI,QAHP;;AAKAC,aAAO,CAAC3G,KAAD,EAAQyG,IAAR,EAAc;AACjBzG,aADiB;AAEjB,SAACgH,8DAAD,GAAsBH;AAFL,OAAd,CAAP;AAIH,KAjCyB;;AAAA,sCA2EdhG,EAAD,IAAsB;AAC7B,UAAM;AAAEoG;AAAF,UAAiB,KAAKzK,KAA5B;AACA,UAAM;AAAE0K;AAAF,UAAkB,KAAKpK,KAA7B;AACA,UAAMqK,MAAM,GAAG,KAAKC,SAAL,CAAevG,EAAf,CAAf;;AAEA,UAAI,CAACsG,MAAD,IAAW,CAACD,IAAhB,EAAsB;AAClB;AACH;;AAEDD,SAAG,CAACI,cAAJ,CAAmB,KAAnB,EAA0BC,cAA1B,CACIJ,IADJ,EAEIC,MAAM,CAACI,QAFX,EAGI,MAAM,KAAKC,sBAAL,CAA4BL,MAA5B,CAHV,EAII,KAAKM,UAJT;AAMH,KA1FyB;;AAAA,iDAkGHN,MAAD,IAAkC;AACpD,UAAM;AAAEO,eAAO,GAAG;AAAZ,UAA0B,KAAK5K,KAArC;AACA,UAAM6K,KAAK,GAAGD,OAAO,CAAClF,KAAR,CAAc,CAAd,CAAd;AACAmF,WAAK,CAACrH,IAAN,CAAW6G,MAAX;AACA,WAAKtK,QAAL,CAAc;AAAE6K,eAAO,EAAEC,KAAX;AAAkBnJ,iBAAS,EAAE;AAA7B,OAAd;AACH,KAvGyB;;AAAA,mCA+GjB+I,QAAD,IAAgC;AACpC,UAAM;AAAEN;AAAF,UAAiB,KAAKzK,KAA5B;AACA,UAAM;AAAE0K;AAAF,UAAkB,KAAKpK,KAA7B;;AAEA,UAAI,CAACoK,IAAL,EAAW;AACP;AACH;;AAED,WAAKrK,QAAL,CAAc;AAAE2B,iBAAS,EAAE;AAAb,OAAd;AACAyI,SAAG,CAACI,cAAJ,CAAmB,KAAnB,EAA0BO,cAA1B,CAAyCV,IAAzC,EAA+CK,QAA/C,EAAyD,KAAKM,mBAA9D,EAAmF,KAAKJ,UAAxF;AACH,KAzHyB;;AAAA,oCA8JjB,CAAC5G,EAAD,EAAaiH,GAAb,KAAgD;AACrD,UAAM;AAAEb;AAAF,UAAiB,KAAKzK,KAA5B;AACA,UAAM;AAAE0K;AAAF,UAAkB,KAAKpK,KAA7B;AACA,UAAMiL,SAAS,GAAG,KAAKX,SAAL,CAAevG,EAAf,CAAlB;;AAEA,UAAI,CAACkH,SAAD,IAAc,CAACb,IAAnB,EAAyB;AACrB;AACH;;AAEDD,SAAG,CAACI,cAAJ,CAAmB,KAAnB,EAA0BW,cAA1B,CACId,IADJ,EAEIa,SAAS,CAACR,QAFd,EAGIO,GAHJ,EAIKG,SAAD,IAA+B;AAC3B,aAAKC,aAAL,CAAmBH,SAAnB,EAA8BE,SAA9B;AACH,OANL,EAOI,CAACjI,KAAD,EAA0ByG,IAA1B,KAA2C;AACvC,aAAK0B,kBAAL,CAAwBJ,SAAxB,EAAmC/H,KAAnC,EAA0CyG,IAA1C;AACH,OATL;AAWH,KAlLyB;;AAAA,4CA2LT,CAAC5F,EAAD,EAAauH,OAAb,KAAkC;AAC/C,UAAML,SAAS,GAAG,KAAKX,SAAL,CAAevG,EAAf,CAAlB;;AACA,UAAI,CAACkH,SAAL,EAAgB;AACZ;AACH;;AACD,UAAME,SAAS,qBAAQF,SAAR;AAAmBK;AAAnB,QAAf,CAL+C,CAKF;;;AAC7C,WAAKF,aAAL,CAAmBH,SAAnB,EAA8BE,SAA9B;AACH,KAlMyB;;AAAA,wDA4MG,CAACI,CAAD,EAAsB5B,IAAtB,KAAuC;AAChE,WAAKgB,UAAL,CAAgBY,CAAhB,EAAmB5B,IAAnB,EAAyB;AACrBiB,eAAO,EAAE7H,SADY;AAErBG,aAAK,EAAE3C,yDAAQ,CAACiL,mCAFK;AAGrBC,iBAAS,EAAE1I;AAHU,OAAzB;AAKH,KAlNyB;;AAAA,0DA0NK,UAMzB;AAAA,UAN0B;AAC5B6H,eAD4B;AAE5Ba;AAF4B,OAM1B;AACF,UAAM;AAAEC,2BAAF;AAAuBC;AAAvB,UAA2C,KAAKjM,KAAtD;AACA,WAAKK,QAAL,CAAc;AACV6K,eAAO,EAAEA,OAAO,CAAClF,KAAR,CAAc,CAAd,CADC;AACiB;AAC3BxC,aAAK,EAAEH,SAFG;AAGVrB,iBAAS,EAAE,KAHD;AAIV+J,iBAAS,EAAEG,2GAAkB,CAACH,SAAD,EAAYC,mBAAZ,EAAiCC,eAAjC;AAJnB,OAAd;AAMH,KAxOyB;;AAAA,oDAwQD,CAACJ,CAAD,EAAsB5B,IAAtB,KAAuC;AAC5D,WAAKgB,UAAL,CAAgBY,CAAhB,EAAmB5B,IAAnB,EAAyB;AAAEzG,aAAK,EAAE3C,yDAAQ,CAACsL,+BAAlB;AAAmDzB,YAAI,EAAErH;AAAzD,OAAzB;AACH,KA1QyB;;AAAA,sDAsREqH,IAAD,IAAmB;AAC1C,UAAM;AAAEA,YAAI,EAAE0B;AAAR,UAA+B,KAAK9L,KAA1C;AACA,UAAM+L,gBAAgB,GAAGjD,iDAAO,CAACgD,WAAD,EAAcE,wEAAd,EAA4C,KAA5C,CAAhC;AACA,UAAMC,YAAY,GAAGnD,iDAAO,CAACsB,IAAD,EAAO4B,wEAAP,EAAqC,KAArC,CAA5B;AACA,UAAME,mBAAmB,GAAG,CAACJ,WAAD,IAAgBC,gBAAgB,KAAKE,YAAjE;AACA,UAAME,QAAQ,GAAGD,mBAAmB,GAAG,KAAKE,aAAR,GAAwBC,kDAA5D;AACA,WAAKtM,QAAL,CAAc;AAAEqK;AAAF,OAAd,EAAwB+B,QAAxB;AACH,KA7RyB;;AAEtB,QAAM;AAAEG;AAAF,QAAa,KAAK5M,KAAxB;AACA4M,UAAM,CAACC,aAAP,CAAqB;AACjBC,iBAAW,EAAElD;AADI,KAArB;AAGH;;AAEDmD,mBAAiB,GAAG;AAChB,SAAKC,SAAL;AACH;AAED;;;;;;;;;;AAuBA;;;;;AAKAC,SAAO,GAAY;AACf,QAAM;AAAEvC;AAAF,QAAkB,KAAKpK,KAA7B;AACA,WAAO8I,iDAAO,CAACsB,IAAD,EAAO4B,wEAAP,EAAqC,KAArC,CAAd;AACH;AAED;;;;;;;;AAMA1B,WAAS,CAACvG,EAAD,EAA8B;AACnC,QAAM;AAAE6G,aAAO,GAAG;AAAZ,QAA0B,KAAK5K,KAArC;AACA,WAAO4K,OAAO,CAACgC,IAAR,CAAa;AAAA,UAAC;AAAEC;AAAF,OAAD;AAAA,aAAkBA,QAAQ,CAAC9I,EAAT,KAAgBA,EAAlC;AAAA,KAAb,CAAP;AACH;AAED;;;;;;;;AAMA2G,wBAAsB,CAACL,MAAD,EAA+B;AACjD,QAAM;AAAEO,aAAO,GAAG;AAAZ,QAA0B,KAAK5K,KAArC;AACA,QAAM6K,KAAK,GAAGD,OAAO,CAAClF,KAAR,CAAc,CAAd,CAAd;AACAmF,SAAK,CAACpH,MAAN,CAAamH,OAAO,CAACrH,OAAR,CAAgB8G,MAAhB,CAAb,EAAsC,CAAtC;AACA,SAAKtK,QAAL,CAAc;AAAE6K,aAAO,EAAEC;AAAX,KAAd;AACH;AAED;;;;;;;;AAsDA;;;;;;;AAOAO,eAAa,CAACH,SAAD,EAA4BE,SAA5B,EAA6D;AACtE,QAAM;AAAEP,aAAO,GAAG;AAAZ,QAA0B,KAAK5K,KAArC;AACA,QAAM6K,KAAK,GAAGD,OAAO,CAAClF,KAAR,CAAc,CAAd,CAAd;AACAmF,SAAK,CAACpH,MAAN,CAAamH,OAAO,CAACrH,OAAR,CAAgB0H,SAAhB,CAAb,EAAyC,CAAzC,EAA4CE,SAA5C;AACA,SAAKpL,QAAL,CAAc;AAAE6K,aAAO,EAAEC;AAAX,KAAd;AACH;AAED;;;;;;;;;;AAQAQ,oBAAkB,CAACJ,SAAD,EAA4B/H,KAA5B,EAAqDyG,IAArD,EAAyE;AACvF,QAAMkB,KAAqB,qBAAQI,SAAR;AAAmB6B,cAAQ,EAAE;AAA7B,MAA3B,CADuF,CACvB;;;AAChE,SAAK1B,aAAL,CAAmBH,SAAnB,EAA8BJ,KAA9B;AACA,SAAKF,UAAL,CAAgBzH,KAAhB,EAAuByG,IAAvB;AACH;AAED;;;;;;;;;AAmFA;;;;;AAKAyC,eAAa,GAAS;AAClB,QAAM;AAAEjC,SAAF;AAAO4C;AAAP,QAAmC,KAAKrN,KAA9C;AACA,QAAM;AAAE0K;AAAF,QAAkB,KAAKpK,KAA7B;;AAEA,QAAI,CAACoK,IAAL,EAAW;AACP;AACH;;AAEDD,OAAG,CAACI,cAAJ,CAAmB,KAAnB,EAA0ByC,WAA1B,CACI5C,IADJ,EAEI,KAAK6C,4BAFT,EAGI,KAAKC,0BAHT,EAIIH,gBAJJ,EAKI;AAAEI,kBAAY,EAAE;AAAhB,KALJ;AAOH;AAED;;;;;;;;;;AA+BA;;;;;AAKAT,WAAS,GAAS;AACd,QAAM;AAAEvC,SAAF;AAAOiD;AAAP,QAAyB,KAAK1N,KAApC;AACAyK,OAAG,CAACkD,UAAJ,GAAiBC,OAAjB,CAAyBF,MAAzB,EAAiC,KAAKG,wBAAtC,EAAgE,KAAKC,sBAArE,EAA6F;AACzFC,YAAM,EAAE,CAACC,qEAAD,EAA4BC,6DAA5B,CADiF;AAEzFR,kBAAY,EAAE,IAF2E,CAErE;;AAFqE,KAA7F;AAIH;;AAEDS,SAAO,GAAS;AACZ,SAAKxB,aAAL;AACH;;AAEDnM,QAAM,GAAG;AACL,QAAM;AAAE2K,aAAF;AAAWR,UAAX;AAAiBlH,WAAjB;AAAwBxB,eAAxB;AAAmC+J;AAAnC,QAAwD,KAAKzL,KAAnE;AACA,QAAM;AAAE6N,eAAF;AAAanC;AAAb,QAA4C,KAAKhM,KAAvD;AACA,QAAMoO,UAAU,GAAG,CAAC,CAAC1D,IAAF,IAAU,CAAC,CAACqB,SAAZ,IAAyB,CAAC,CAACb,OAA9C;AACA,QAAMmD,oBAAoB,GAAG,CAAC7K,KAAD,IAAU,CAAC4K,UAAxC;AACA,QAAMnB,OAAO,GAAG,KAAKA,OAAL,EAAhB;AACA,QAAMqB,oBAAoB,GAAGF,UAAU,IAAInB,OAA3C;AACA,QAAMsB,gBAAgB,GAAGH,UAAU,IAAMlD,OAAF,CAAwC1J,MAAxC,KAAmD,CAA1F;AAEA,WACI,oDAAC,wDAAD;AACI,aAAO,EACH8M,oBAAoB,GAChB,oDAAC,4FAAD;AACI,oBAAY,EAAEvC,SAAS,IAAIA,SAAS,CAACvK,MAAV,KAAqB,CADpD;AAEI,sBAAc,EAAE,KAFpB;AAGI,aAAK,EAAE,KAAKgN,KAHhB,CAII;AAJJ;AAKI,iBAAS,EAAEzC,SALf,CAMI;AANJ;AAOI,qBAAa,EAAEb,OAAO,CAACxK,GAAR,CAAYiK,MAAM,IAAIA,MAAM,CAACI,QAA7B;AAPnB,QADgB,GAUhB,IAZZ;AAcI,eAAS,EAAC,cAdd;AAeI,eAAS,EAAEoD,SAff;AAgBI,iBAAW,EAAEM,iEAhBjB;AAiBI,WAAK,EAAE,oDAAC,2DAAD,EAAsB5N,yDAAQ,CAAC6N,oBAA/B;AAjBX,OAmBKlL,KAAK,IACF,oDAAC,4EAAD;AAAa,WAAK,EAAE,oDAAC,2DAAD,EAAsB3C,yDAAQ,CAAC2C,KAA/B;AAApB,OACI,oDAAC,2DAAD,EAAsBA,KAAtB,CADJ,CApBR,EAwBK6K,oBAAoB,IAAI,oDAAC,sFAAD,OAxB7B,EAyBKD,UAAU,IACP,oDAAC,8FAAD;AAAyB,eAAS,EAAC,0BAAnC;AAA8D,eAAS,EAAEpM;AAAzE,OACKuM,gBAAgB,GACb,oDAAC,uFAAD;AAAc,YAAM,EAAEtB;AAAtB,MADa,GAGb,oDAAC,oFAAD;AACI,aAAO,EAAE/B,OADb;AAEI,oBAAc,EAAE,KAAKyD,cAFzB;AAGI,cAAQ,EAAE,KAAKC,QAHnB;AAII,YAAM,EAAE,KAAKC,MAJjB;AAKI,yBAAmB,EAAE7C;AALzB,MAJR,CA1BR,CADJ;AA2CH;;AA3W2D;;gBAA1DhC,e,kBAGoB;AAClBqD,kBAAgB,EAAE;AADA,C;;AA4W1B;AACeyB,iHAAI,CAAC,CAACC,kEAAU,CAAClF,mEAAD,CAAX,EAAsCmF,iFAAiB,CAACnF,mEAAD,CAAvD,EAAkFoF,mEAAlF,CAAD,CAAJ,CACXjF,eADW,CAAf,E;;;;;;;;;;;AClbA,uC;;;;;;;;;;;;;;;;;;;;;;;;;ACCA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAMkF,cAAc,GAAG,kFAAvB;;AAYA,IAAMC,aAAa,GAAG,UAQT;AAAA,MARU;AACnBlC,WADmB;AAEnBmC,sBAFmB;AAGnBC,0BAHmB;AAInBC,oBAJmB;AAKnBC,mBALmB;AAMnBC,uBANmB;AAOnBC;AAPmB,GAQV;AACT,MAAMC,aAAa,GAAGN,kBAAkB,GACpC;AAAK,aAAS,EAAC;AAAf,KACI,oDAAC,2DAAD,EAAsBvO,iDAAQ,CAAC8O,gCAA/B,CADJ,CADoC,GAIpC,IAJJ;AAMA,SAAO1C,OAAO,GACV,0GACI;AAAK,aAAS,EAAC;AAAf,KACI;AAAK,aAAS,EAAC;AAAf,KACI,iEACI,oDAAC,2DAAD;AAAkB,WAAO,EAAC;AAA1B,KAAuCpM,iDAAQ,CAAC+O,mBAAhD,EADJ,EAEK,CAACN,gBAAD,IACG,oDAAC,0DAAD;AACI,aAAS,oCACLF,kBAAkB,GAAG,YAAH,GAAkB,aAD/B,CADb;AAII,QAAI,EAAEA,kBAJV;AAKI,SAAK,EAAC,EALV;AAMI,YAAQ,EAAEvD,CAAC,IAAI0D,eAAe,CAAC1D,CAAC,CAAC3L,MAAF,CAAS2P,OAAV;AANlC,IAHR,CADJ,EAcK,CAACP,gBAAD,GACG;AAAK,aAAS,EAAC;AAAf,KACI,oDAAC,2DAAD,EAAsBzO,iDAAQ,CAACiP,sBAA/B,CADJ,UAGI,oDAAC,6DAAD;AAAM,aAAS,EAAC,+BAAhB;AAAgD,QAAI,EAAEZ,cAAtD;AAAsE,UAAM,EAAC;AAA7E,KACI,oDAAC,2DAAD,EAAsBrO,iDAAQ,CAACkP,sBAA/B,CADJ,CAHJ,CADH,GASG,iEACI,oDAAC,2DAAD,EAAsBlP,iDAAQ,CAACmP,4BAA/B,CADJ,CAvBR,CADJ,CADJ,EA+BKP,wBAAwB,IACrB;AAAK,aAAS,EAAC;AAAf,KACI;AAAK,aAAS,EAAC;AAAf,KACI,oDAAC,2DAAD,EAAsB5O,iDAAQ,CAACoP,yBAA/B,CADJ,EAGI;AAAK,aAAS,EAAC;AAAf,KACI,oDAAC,uEAAD,OADJ,EAEI,kEACI,oDAAC,2DAAD,EAAsBpP,iDAAQ,CAACqP,qBAA/B,CADJ,CAFJ,CAHJ,EASI,oDAAC,4DAAD;AACI,aAAS,EAAC,4BADd;AAEI,YAAQ,EAAErE,CAAC,IAAI2D,mBAAmB,CAAC3D,CAAC,CAAC3L,MAAF,CAASZ,KAAT,KAAmB,WAApB,CAFtC;AAGI,SAAK,EAAE+P,sBAAsB,GAAG,WAAH,GAAiB;AAHlD,KAKI,oDAAC,6DAAD;AACI,SAAK,EAAE,oDAAC,2DAAD,EAAsBxO,iDAAQ,CAACsP,qBAA/B,CADX;AAEI,SAAK,EAAC;AAFV,IALJ,EASI,oDAAC,6DAAD;AACI,SAAK,EAAE,oDAAC,2DAAD,EAAsBtP,iDAAQ,CAACuP,0BAA/B,CADX;AAEI,SAAK,EAAC;AAFV,IATJ,CATJ,CADJ,CAhCR,CADU,GA8DVV,aA9DJ;AAgEH,CA/ED;;AAiFeP,4EAAf,E;;;;;;;;;;;ACxGA,uC;;;;;;;;;;;;;;;;;;;;;;;;;;;ACCA;AACA;AAEA;AACA;AACA;AACA;;AAcA,MAAMkB,cAAN,SAA6BvQ,mDAA7B,CAA+D;AAM3D,SAAO+B,wBAAP,cAA6E;AAAA,QAA7C;AAAEyO;AAAF,KAA6C;AAAA,QAA5B;AAAEC;AAAF,KAA4B;;AACzE,QAAI,CAACC,qDAAO,CAACF,IAAD,EAAOC,UAAP,CAAZ,EAAgC;AAC5B,aAAO;AACHA,kBAAU,oBAAOD,IAAP;AADP,OAAP;AAGH;;AAED,WAAO,IAAP;AACH;;AAEDvQ,aAAW,CAACC,KAAD,EAAe;AACtB,UAAMA,KAAN;;AADsB,2CAeV,CAACkF,GAAD,EAAc5F,KAAd,KAA4C;AACxD,UAAM;AAAE2N,eAAF;AAAWwD;AAAX,UAAoC,KAAKzQ,KAA/C;;AACA,UAAIiN,OAAO,IAAIwD,aAAf,EAA8B;AAC1BA,qBAAa,CAACvL,GAAD,EAAM5F,KAAN,EAAaoR,4DAAb,CAAb;AACH;AACJ,KApByB;;AAAA,2CA6BTxL,GAAD,IAAiB;AAC7B,UAAM;AAAE+H,eAAF;AAAW0D;AAAX,UAAoC,KAAK3Q,KAA/C;;AACA,UAAIiN,OAAO,IAAI0D,aAAf,EAA8B;AAC1BA,qBAAa,CAACzL,GAAD,CAAb;AACH;AACJ,KAlCyB;;AAAA,8CAyCP,MAAM;AACrB,WAAK7E,QAAL,CAAcuQ,SAAS,KAAK;AACxBC,yBAAiB,EAAE,CAACD,SAAS,CAACC;AADN,OAAL,CAAvB;AAGH,KA7CyB;;AAEtB,SAAKvQ,KAAL,GAAa;AACTuQ,uBAAiB,EAAE,KADV;AAETN,gBAAU,oBAAOvQ,KAAK,CAACsQ,IAAb;AAFD,KAAb;AAIH;AAED;;;;;;;;;AAuCA/P,QAAM,GAAG;AACL,QAAM;AAAE0M;AAAF,QAAqB,KAAKjN,KAAhC;AACA,QAAM;AAAE6Q,uBAAF;AAAqBN;AAArB,QAA2C,KAAKjQ,KAAtD;AACA,QAAMyN,MAAM,GAAGpL,MAAM,CAACC,IAAP,CAAY2N,UAAZ,CAAf;AACA,QAAMO,YAAY,GAAG7D,OAAO,KAAK4D,iBAAiB,IAAI9C,MAAM,CAACvM,MAAP,KAAkB,CAA5C,CAA5B;AAEA,WACI,0GACKuM,MAAM,CAACrN,GAAP,CAAW,CAACwE,GAAD,EAAMpC,KAAN,KACR,oDAAC,2DAAD;AACI,SAAG,EAAEoC,GADT;AAEI,aAAO,EAAE+H,OAFb;AAGI,aAAO,EAAE/H,GAHb;AAII,eAAS,EAAEqL,UAAU,CAACrL,GAAD,CAJzB;AAKI,YAAM,EAAE,CAAC2L,iBAAD,IAAsB/N,KAAK,KAAKiL,MAAM,CAACvM,MAAP,GAAgB,CAL5D;AAMI,WAAK,EAAE,KAAKuP,gBANhB;AAOI,cAAQ,EAAE,KAAKN,aAPnB;AAQI,cAAQ,EAAE,KAAKE;AARnB,MADH,CADL,EAaK,CAACG,YAAD,IAAiB/C,MAAM,CAACvM,MAAP,KAAkB,CAAnC,IAAwC,oDAAC,qDAAD,OAb7C,EAcKsP,YAAY,IACT,oDAAC,+DAAD;AACI,mBAAa,EAAE/C,MAAM,CAACvM,MAAP,KAAkB,CADrC;AAEI,WAAK,EAAE,KAAKiP,aAFhB;AAGI,cAAQ,EAAE,KAAKM,gBAHnB;AAII,gBAAU,EAAE,KAAK/Q,KAAL,CAAWsQ;AAJ3B,MAfR,CADJ;AAyBH;;AA9F0D;;gBAAzDD,c,kBACoB;AAClBpD,SAAO,EAAE,IADS;AAElBqD,MAAI,EAAE;AAFY,C;;AAgGXD,6EAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrHA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;;AAgBA,MAAMW,sBAAN,SAAqClR,mDAArC,CAAuE;AAAA;AAAA;;AAAA,mCACpD;AACXoF,SAAG,EAAE,EADM;AAEX5F,WAAK,EAAE,EAFI;AAGXkE,WAAK,EAAE;AAHI,KADoD;;AAAA,yCA4BpDvD,KAAD,IAAqD;AAC/D,WAAKE,QAAL,CAAcF,KAAd,EAAqB,KAArB;AACH,KA9BkE;;AAAA,2CAsClDA,KAAD,IAAqD;AACjE,WAAKE,QAAL,CAAcF,KAAd,EAAqB,OAArB;AACH,KAxCkE;;AAAA,mCA+C3D,MAAM;AACV,UAAM;AAAEiF,WAAF;AAAO5F;AAAP,UAAwB,KAAKgB,KAAnC;AACA,UAAM;AAAEkO,aAAF;AAAS+B;AAAT,UAA+B,KAAKvQ,KAA1C;;AACA,UAAI2C,MAAM,CAACsO,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCZ,UAArC,EAAiDrL,GAAjD,CAAJ,EAA2D;AACvD,aAAK7E,QAAL,CAAc;AACVmD,eAAK,EAAE,oDAAC,2DAAD,EAAsB3C,iDAAQ,CAACuQ,uBAA/B;AADG,SAAd;AAGH,OAJD,MAIO,IAAIlM,GAAG,CAACmM,UAAJ,CAAe,GAAf,CAAJ,EAAyB;AAC5B,aAAKhR,QAAL,CAAc;AACVmD,eAAK,EAAE,oDAAC,2DAAD,EAAsB3C,iDAAQ,CAACyQ,sBAA/B;AADG,SAAd;AAGH,OAJM,MAIA,IAAIpM,GAAJ,EAAS;AACZsJ,aAAK,CAACtJ,GAAD,EAAM5F,KAAN,CAAL;AACH,OAFM,MAEA;AACH,aAAKe,QAAL,CAAc;AACVmD,eAAK,EAAE,oDAAC,2DAAD,EAAsB3C,iDAAQ,CAAC0Q,mBAA/B;AADG,SAAd;AAGH;AACJ,KAjEkE;AAAA;;AAOnE;;;;;;;AAOApR,UAAQ,CAACF,KAAD,EAAkDuR,IAAlD,EAAgE;AACpE,QAAMC,aAAa,GAAIxR,KAAK,CAACwR,aAA7B;AACA,SAAKpR,QAAL,CAAc;AACVmD,WAAK,EAAE,EADG;AAEV,OAACgO,IAAD,GAAQC,aAAa,CAACnS;AAFZ,KAAd;AAIH;AAED;;;;;;;;AA6CAiB,QAAM,GAAG;AACL,QAAM;AAAEwB,UAAF;AAAQ2P,mBAAR;AAAuBC;AAAvB,QAA2C,KAAK3R,KAAtD;AACA,QAAM;AAAEkF,SAAF;AAAO5F,WAAP;AAAckE;AAAd,QAA+B,KAAKlD,KAA1C;AACA,WACI;AAAK,eAAS,EAAC;AAAf,OACI;AAAK,eAAS,EAAC;AAAf,OACI,oDAAC,2DAAD;AAAkB,aAAO,EAAC;AAA1B,OAAmCO,iDAAQ,CAAC+Q,cAA5C,EADJ,EAEI,oDAAC,mEAAD;AAAS,UAAI,EAAE,oDAAC,2DAAD,EAAsB/Q,iDAAQ,CAACgR,qBAA/B;AAAf,OACI;AAAK,cAAQ,EAAC;AAAd,OACI,oDAAC,+DAAD;AAAU,WAAK,EAAC,MAAhB;AAAuB,YAAM,EAAE,EAA/B;AAAmC,WAAK,EAAE;AAA1C,MADJ,CADJ,CAFJ,CADJ,EASI,oDAAC,wEAAD;AACI,WAAK,EAAErO,KADX;AAEI,gBAAU,MAFd;AAGI,WAAK,EAAE,oDAAC,2DAAD,EAAsB3C,iDAAQ,CAACiR,SAA/B,CAHX;AAII,cAAQ,EAAE,KAAKC,WAJnB;AAKI,iBAAW,EAAEhQ,IAAI,CAACO,aAAL,CAAmBzB,iDAAQ,CAACmR,oBAA5B,CALjB;AAMI,UAAI,EAAC,MANT;AAOI,WAAK,EAAE9M;AAPX,MATJ,EAkBI,oDAAC,wEAAD;AACI,uBAAiB,MADrB;AAEI,WAAK,EAAE,oDAAC,2DAAD,EAAsBrE,iDAAQ,CAACoR,WAA/B,CAFX;AAGI,cAAQ,EAAE,KAAKC,aAHnB;AAII,iBAAW,EAAEnQ,IAAI,CAACO,aAAL,CAAmBzB,iDAAQ,CAACsR,sBAA5B,CAJjB;AAKI,UAAI,EAAC,MALT;AAMI,WAAK,EAAE7S;AANX,MAlBJ,EA0BI;AAAK,eAAS,EAAC;AAAf,OACKoS,aAAa,IACV,oDAAC,iEAAD;AAAQ,2BAAkB,4BAA1B;AAAuD,aAAO,EAAEC,QAAhE;AAA0E,UAAI,EAAC;AAA/E,OACI,oDAAC,2DAAD,EAAsBS,wDAAc,CAACC,MAArC,CADJ,CAFR,EAMI,oDAAC,iEAAD;AAAQ,2BAAkB,yBAA1B;AAAoD,aAAO,EAAE,KAAK7D,KAAlE;AAAyE,UAAI,EAAC;AAA9E,OACI,oDAAC,2DAAD,EAAsB3N,iDAAQ,CAACyR,SAA/B,CADJ,CANJ,CA1BJ,CADJ;AAuCH;;AA7GkE;;AAgHvE;AACehP,4HAAU,CAAC0N,sBAAD,CAAzB,E;;;;;;;;;;;AC5IA,uC;;;;;;;;;;;;ACCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;;AAMA,IAAMuB,YAAY,GAAG;AAAA,MAAC;AAAEC;AAAF,GAAD;AAAA,SACjB;AAAK,aAAS,EAAC;AAAf,KACI,oDAAC,gFAAD,OADJ,EAEI;AAAG,aAAS,EAAC;AAAb,KACI,oDAAC,2DAAD,EAAsB3R,iDAAQ,CAAC4R,UAA/B,CADJ,CAFJ,EAKKD,MAAM,IACH;AAAG,aAAS,EAAC;AAAb,KACI,oDAAC,2DAAD,EAAsB3R,iDAAQ,CAAC6R,qBAA/B,CADJ,CANR,CADiB;AAAA,CAArB;;AAceH,2EAAf,E;;;;;;;;;;;AC3BA,uC;;;;;;;;;;;;ACCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;;AAQA,IAAMI,MAAM,GAAG;AAAA,MAAC;AAAEhB,YAAF;AAAY/C,YAAZ;AAAsBgE;AAAtB,GAAD;AAAA,SACX;AAAK,aAAS,EAAC;AAAf,KACI;AAAK,aAAS,EAAC;AAAf,KACI,oDAAC,4EAAD;AAAa,yBAAkB,yBAA/B;AAAyD,WAAO,EAAEhE,QAAlE;AAA4E,QAAI,EAAC;AAAjF,KACI,oDAAC,2DAAD,EAAsB/N,iDAAQ,CAACgS,sBAA/B,CADJ,CADJ,CADJ,EAMI;AAAK,aAAS,EAAC;AAAf,KACI,oDAAC,iEAAD;AAAQ,yBAAkB,yBAA1B;AAAoD,WAAO,EAAElB,QAA7D;AAAuE,QAAI,EAAC;AAA5E,KACI,oDAAC,2DAAD,EAAsB9Q,iDAAQ,CAACiS,cAA/B,CADJ,CADJ,EAIKF,QAAQ,IACL,oDAAC,gFAAD;AAAe,yBAAkB;AAAjC,KACI,oDAAC,2DAAD,EAAsB/R,iDAAQ,CAACkS,YAA/B,CADJ,CALR,CANJ,CADW;AAAA,CAAf;;AAoBeJ,qEAAf,E;;;;;;;;;;;ACrCA,uC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACCA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AASA;AACA;AACA;AACA;;AAiCA,IAAMK,uBAAuB,GAAG,SAA1BA,uBAA0B;AAAA,MAACjF,MAAD,uEAAyC,EAAzC;AAAA,SAC5BA,MAAM,CAACkF,MAAP,CAAc,CAACC,IAAD,WAAyB;AAAA,QAAlB;AAAEhO,SAAF;AAAOiO;AAAP,KAAkB;AACnCD,QAAI,CAAChO,GAAD,CAAJ,GAAYiO,IAAZ;AACA,WAAOD,IAAP;AACH,GAHD,EAGG,EAHH,CAD4B;AAAA,CAAhC;;AAMA,IAAME,QAAQ,GAAG,CAAC9C,IAAD,EAAepL,GAAf,EAA4BiO,IAA5B,KAA6C;AAC1D,MAAM7T,KAAK,GAAGgR,IAAI,CAACpL,GAAD,CAAlB;;AAEA,UAAQiO,IAAR;AACI,SAAKE,4DAAL;AACI,aAAOC,UAAU,CAAChU,KAAD,CAAjB;;AAEJ,SAAKiU,8DAAL;AACI,aAAOC,QAAQ,CAAClU,KAAD,EAAQ,EAAR,CAAf;;AAEJ;AACI,aAAOA,KAAP;AARR;AAUH,CAbD;;AAeA,MAAMmU,QAAN,SAAuB3T,mDAAvB,CAAyD;AAMrDC,aAAW,CAACC,KAAD,EAAe;AACtB,UAAMA,KAAN;;AADsB,sCA6Cf,MAAY;AACnB,UAAM;AAAEqE,UAAF;AAAMsK;AAAN,UAAgC,KAAK3O,KAA3C;AACA,WAAKK,QAAL,CAAc,KAAKqT,QAAL,CAAc,KAAK1T,KAAnB,CAAd,EAFmB,CAInB;;AACA,UAAI2O,cAAJ,EAAoB;AAChBA,sBAAc,CAACtK,EAAD,EAAK,KAAL,CAAd;AACH;AACJ,KArDyB;;AAAA,6CA4DR,MAAY;AAC1B,WAAKhE,QAAL,CAAc;AAAEsT,2BAAmB,EAAE;AAAvB,OAAd;AACH,KA9DyB;;AAAA,6CAqER,MAAY;AAC1B,WAAKtT,QAAL,CAAc;AAAEsT,2BAAmB,EAAE;AAAvB,OAAd;AACH,KAvEyB;;AAAA,sCA8Ef,MAAY;AACnB,UAAI,CAAC,KAAKC,SAAL,EAAL,EAAuB;AACnB;AACH;;AAED,UAAM;AAAEvP,UAAF;AAAMuK;AAAN,UAA0B,KAAK5O,KAArC;;AACA,UAAI4O,QAAJ,EAAc;AACVA,gBAAQ,CAACvK,EAAD,CAAR;AACA,aAAKhE,QAAL,CAAc;AAAEwT,gBAAM,EAAE;AAAV,SAAd;AACH;AACJ,KAxFyB;;AAAA,oCA+FjB,MAAY;AACjB,UAAM;AACFC,qBADE;AAEFxD,YAAI,EAAEyD,YAFJ;AAGF1P,UAHE;AAIFuH,eAJE;AAKFoI,mCALE;AAMFnF;AANE,UAOK,KAAK7O,KAPhB;AAQA,UAAM;AAAEsQ,YAAI,EAAE2D,WAAR;AAAqBhL,cAArB;AAA6BmG,0BAA7B;AAAiDC;AAAjD,UAAmF,KAAK/O,KAA9F;;AAEA,UAAI,CAAC,KAAKsT,SAAL,EAAD,IAAqB,CAAChI,OAAtB,IAAiC,CAACiD,MAAlC,IAA4ClM,MAAM,CAACC,IAAP,CAAYqG,MAAZ,EAAoBzH,MAApE,EAA4E;AACxE;AACH;;AAED,WAAKnB,QAAL,CAAc;AACVwT,cAAM,EAAE,IADE;AAEVD,iBAAS,EAAE,KAFD;AAGVnE,gCAAwB,EAAE;AAHhB,OAAd;AAKAZ,YAAM,CACFxK,EADE,EAEF,KAAK6P,eAAL,CAAqBD,WAArB,EAAkCF,YAAlC,CAFE,EAGFC,2BAA2B,GACrB;AACI/G,eAAO,EAAE6G,aAAa,GAAGA,aAAa,CAAC7G,OAAjB,GAA2B,KADrD;AAEI5I,UAAE,EAAEyP,aAAa,GAAGA,aAAa,CAACzP,EAAjB,GAAsBhB,SAF3C;AAGI8Q,iBAAS,EAAE/E,kBAHf;AAIIgF,iBAAS,EAAE/E;AAJf,OADqB,GAOrBhM,SAVJ,EAWFgR,uDAAS,CAACJ,WAAD,CAXP,CAAN;AAaH,KAhIyB;;AAAA,2CA0IV,CAAC/O,GAAD,EAAc5F,KAAd,EAAyC6T,IAAzC,KAAgE;AAC5E,UAAM;AAAE7C,YAAF;AAAQrH;AAAR,UAA0B,KAAK3I,KAArC,CAD4E,CAG5E;;AACA,UAAI,CAAC,KAAKsT,SAAL,EAAD,IAAqBpD,qDAAO,CAACF,IAAI,CAACpL,GAAD,CAAL,EAAY5F,KAAZ,CAAhC,EAAoD;AAChD;AACH;;AAED,UAAMgV,OAAO,GAAGC,2EAAY,CAACpB,IAAD,EAAO7T,KAAP,CAA5B;;AACA,UAAMkV,WAAW,qBAAQvL,MAAR,CAAjB;;AACA,UAAMwL,SAAS,GAAGJ,uDAAS,CAAC/D,IAAD,CAA3B;AACAmE,eAAS,CAACvP,GAAD,CAAT,GAAiB5F,KAAjB;;AAEA,UAAIgV,OAAJ,EAAa;AACT,eAAOE,WAAW,CAACtP,GAAD,CAAlB;AACH,OAFD,MAEO;AACHsP,mBAAW,CAACtP,GAAD,CAAX,GAAmB,oDAAC,2DAAD,EAAsBrE,kDAAQ,CAAC6T,YAA/B,CAAnB;AACH;;AAED,WAAKrU,QAAL,CAAc;AAAEiQ,YAAI,EAAEmE,SAAR;AAAmBxL,cAAM,EAAEuL;AAA3B,OAAd,EAAwD,MAAM;AAC1D,aAAKG,QAAL,CAAcxB,IAAd;AACH,OAFD;AAGH,KAhKyB;;AAAA,2CAwKTjO,GAAD,IAAuB;AACnC,UAAI,CAAC,KAAK0O,SAAL,EAAL,EAAuB;AACnB;AACH;;AAED,UAAM;AAAEtD,YAAF;AAAQrH;AAAR,UAA0B,KAAK3I,KAArC;AACA,UAAMmU,SAAS,GAAGJ,uDAAS,CAAC/D,IAAD,CAA3B;;AACA,UAAMkE,WAAW,qBAAQvL,MAAR,CAAjB;;AACA,aAAOwL,SAAS,CAACvP,GAAD,CAAhB;AACA,aAAOsP,WAAW,CAACtP,GAAD,CAAlB;AACA,WAAK7E,QAAL,CAAc;AAAEiQ,YAAI,EAAEmE,SAAR;AAAmBxL,cAAM,EAAEuL;AAA3B,OAAd,EAAwD,KAAKG,QAA7D;AACH,KAnLyB;;AAAA,6CA2LPrV,KAAD,IAAoB;AAClC,UAAM;AAAE0U;AAAF,UAAyC,KAAKhU,KAApD;;AACA,UAAI,CAACgU,2BAAL,EAAkC;AAC9B;AACH;;AAED,WAAK3T,QAAL,CACI;AACI+O,0BAAkB,EAAE9P,KADxB;AAEImQ,gCAAwB,EAAEnQ;AAF9B,OADJ,EAKI,KAAKqV,QALT;AAOH,KAxMyB;;AAAA,iDAiNHrV,KAAD,IAA0B;AAC5C,UAAM;AAAE0U;AAAF,UAAyC,KAAKhU,KAApD;;AACA,UAAI,CAACgU,2BAAL,EAAkC;AAC9B;AACH;;AAED,WAAK3T,QAAL,CACI;AACIgP,8BAAsB,EAAE/P;AAD5B,OADJ,EAII,KAAKqV,QAJT;AAMH,KA7NyB;;AAAA,iDA8QJ,CAACC,MAAD,EAAkB7J,QAAlB,KAAuC;AACzD,UAAI8J,OAAJ;AACA,UAAMC,YAAY,GAAG/J,QAAQ,CAACgK,WAAT,KAAyBC,sEAA9C;;AAEA,UAAIF,YAAJ,EAAkB;AACdD,eAAO,GAAGD,MAAM,GAAG,yCAAH,GAA+C,2CAA/D;AACH,OAFD,MAEO;AACHC,eAAO,GAAGD,MAAM,GAAG,mCAAH,GAAyC,qCAAzD;AACH;;AAED,aACI,oDAAC,2DAAD,eACQ/T,kDAAQ,CAACgU,OAAD,CADhB;AAEI,cAAM,EAAE;AACJI,sBAAY,EAAElK,QAAQ,CAACmK;AADnB;AAFZ,SADJ;AAQH,KAhSyB;;AAAA,sCAiTd/B,IAAD,IAAyB;AAChC,UAAM;AAAE9O,UAAF;AAAM2P,mCAAN;AAAmCrF;AAAnC,UAA6D,KAAK3O,KAAxE;AACA,UAAM;AAAEsQ,YAAF;AAAQlB,0BAAR;AAA4BC;AAA5B,UAAuD,KAAK/O,KAAlE;AACA,UAAM6U,cAAc,GAAG,CAAC3E,qDAAO,CAACF,IAAD,EAAO,KAAKtQ,KAAL,CAAWsQ,IAAlB,CAA/B;AACA,UAAI8E,mBAAmB,GAAG,KAA1B;;AAEA,UAAIpB,2BAAJ,EAAiC;AAC7B;AACAoB,2BAAmB,GAAG/F,sBAAsB,IAAID,kBAAkB,KAAK,KAAKA,kBAAL,CAAwB,KAAKpP,KAA7B,CAAvE;AACH,OAT+B,CAWhC;;;AACA,UAAI2O,cAAJ,EAAoB;AAChBA,sBAAc,CAACtK,EAAD,EAAK8Q,cAAc,IAAIC,mBAAvB,EAA4CjC,IAA5C,CAAd;AACH;AACJ,KAhUyB;;AAAA,4CAoUtBrT,+CAAA,EApUsB;;AAAA,6CA4VR,MAAY;AAC1B,WAAKO,QAAL,CAAcuQ,SAAS,KAAK;AACxBgD,iBAAS,EAAE,CAAChD,SAAS,CAACgD;AADE,OAAL,CAAvB;AAGH,KAhWyB;;AAAA,8CA6bP,MAAM;AACrB,UAAM;AAAEhI;AAAF,UAAqB,KAAK5L,KAAhC;AACA,UAAM;AAAE6T;AAAF,UAAoB,KAAKvT,KAA/B;AACA,UAAM2M,OAAO,GAAG,KAAKA,OAAL,EAAhB;AACA,UAAM2G,SAAS,GAAG,KAAKA,SAAL,EAAlB;AACA,UAAMyB,aAAa,GAAG7S,iDAAU,CAAC,wCAAD,EAA2C;AACvE,wDAAgDoR;AADuB,OAA3C,CAAhC;;AAIA,UAAI3G,OAAO,IAAI,CAACrB,OAAZ,IAAuB,CAACiI,MAA5B,EAAoC;AAChC,eACI,oDAAC,4DAAD;AAAS,kBAAQ,EAAC,UAAlB;AAA6B,cAAI,EAAE,oDAAC,2DAAD,EAAsBhT,kDAAQ,CAACyU,mBAA/B;AAAnC,WACI,oDAAC,4EAAD;AACI,mBAAS,EAAED,aADf;AAEI,+BAAkB,uBAFtB;AAGI,iBAAO,EAAE,KAAKE,eAHlB;AAII,cAAI,EAAC;AAJT,WAMI,oDAAC,gEAAD,OANJ,CADJ,CADJ;AAYH;;AACD,aAAO,IAAP;AACH,KArdyB;;AAEtB,SAAKjV,KAAL,GAAa,KAAKoT,QAAL,CAAc1T,KAAd,CAAb;AACA,SAAKwV,iBAAL,GAAyBxC,uBAAuB,CAAChT,KAAK,CAAC+K,QAAN,CAAegD,MAAhB,CAAhD;AACH;;AAED0H,oBAAkB,QAA0D7E,SAA1D,EAAkF;AAAA,QAAjF;AAAExD,cAAQ,EAAEsI,YAAZ;AAA0B9J,aAAO,EAAE+J;AAAnC,KAAiF;AAChG,QAAMC,cAAc,GAAG,KAAKC,cAAL,CAAoBC,OAA3C;AACA,QAAM;AAAE1I,cAAF;AAAYxB;AAAZ,QAA+B,KAAK5L,KAA1C;AACA,QAAM;AAAE4T;AAAF,QAAuBhD,SAA7B;;AAEA,QAAIgF,cAAc,IAAI,KAAKtV,KAAL,CAAWqT,mBAAjC,EAAsD;AAClDjP,wEAAc,CAACkR,cAAD,EAAiB;AAC3BjR,aAAK,EAAE,OADoB;AAE3BoR,gBAAQ,EAAE;AAFiB,OAAjB,CAAd;AAIH;;AAED,QAAI3I,QAAQ,IAAIA,QAAQ,KAAKsI,YAA7B,EAA2C;AACvC;AACA;AACA;AACA;AACA,WAAKrV,QAAL,CAAc;AAAEwT,cAAM,EAAE,KAAV;AAAiBD,iBAAS,EAAE;AAA5B,OAAd;AACH,KAND,MAMO,IAAI+B,WAAW,IAAI,CAAC/J,OAApB,EAA6B;AAChC;AACA;AACA;AACA;AACA;AACA,UAAIgI,SAAJ,EAAe;AACX;AACA,aAAKvT,QAAL,CAAc;AAAEwT,gBAAM,EAAE;AAAV,SAAd;AACH,OAHD,MAGO;AACH;AACA,aAAKxT,QAAL,CAAc;AAAEwT,gBAAM,EAAE,KAAV;AAAiBxE,gCAAsB,EAAE;AAAzC,SAAd;AACH;AACJ;AACJ;AAED;;;;;;;AAuLA;;;;;AAKAqE,UAAQ,CAAC1T,KAAD,EAAsB;AAC1B,WAAO;AACHsQ,UAAI,EAAE+D,uDAAS,CAACrU,KAAK,CAACsQ,IAAP,CADZ;AAEHrH,YAAM,EAAE,EAFL;AAGH4K,YAAM,EAAE,KAHL;AAIHzE,wBAAkB,EAAE,KAAKA,kBAAL,CAAwBpP,KAAxB,CAJjB;AAKHqP,4BAAsB,EAAE,KALrB;AAMHuE,eAAS,EAAE,KANR;AAOHD,yBAAmB,EAAE,KAPlB;AAQHlE,8BAAwB,EAAE;AARvB,KAAP;AAUH;AAED;;;;;;;AAKAuG,UAAQ,GAAe;AACnB,QAAM;AAAElC,mBAAa,GAAG,EAAlB;AAAsB1G,cAAtB;AAAgC4G,iCAAhC;AAA6DjJ;AAA7D,QAAiF,KAAK/K,KAA5F;AACA,QAAM8U,YAAY,GAAG/J,QAAQ,CAACgK,WAAT,KAAyBC,sEAA9C;AAEA,QAAM7B,IAAI,GAAGa,2BAA2B,IAAIF,aAAa,CAACzP,EAA7C,GAAkD,SAAlD,GAA8D,SAA3E;AAEA,WACI;AAAM,eAAS,EAAC;AAAhB,OACI,oDAAC,2EAAD;AAAqB,UAAI,EAAE8O;AAA3B,MADJ,EAEI;AACI,eAAS,EAAE3Q,iDAAU,CAAC,8CAAD,EAAiD;AAClE,uDAA+C4K;AADmB,OAAjD;AADzB,OAKK0H,YAAY,GAAG,oDAAC,2DAAD,EAAsBjU,kDAAQ,CAACoV,WAA/B,CAAH,GAAoDlL,QAAQ,CAACmK,WAL9E,CAFJ,EASK9H,QAAQ,IAAI,oDAAC,uEAAD;AAAiB,WAAK,EAAE8I,mEAAgBA;AAAxC,MATjB,CADJ;AAaH;AAED;;;;;AAuBA;;;AAGAC,wBAAsB,GAAe;AACjC,QAAM;AAAEpL,cAAF;AAAYiJ;AAAZ,QAAmD,KAAKhU,KAA9D;AACA,QAAM4U,MAAM,GAAG,CAACZ,2BAAhB;AACA,WAAO,KAAKoC,mBAAL,CAAyBxB,MAAzB,EAAiC7J,QAAjC,CAAP;AACH;AAED;;;;;;;;AA6BA;;;;;;;AAOAqE,oBAAkB,CAACpP,KAAD,EAAe;AAC7B,QAAIA,KAAK,CAAC8T,aAAV,EAAyB;AACrB,aAAO,CAAC,CAAC9T,KAAK,CAAC8T,aAAN,CAAoBzP,EAA7B;AACH;;AACD,WAAO,KAAP;AACH;AAED;;;;;;;;AAYA;;;;;;;;;;AAUA6P,iBAAe,CAACD,WAAD,EAAsBF,YAAtB,EAAiE;AAC5E,QAAMzI,GAAG,GAAG,EAAZ;AACA,QAAMgF,IAAI,GAAG+D,uDAAS,CAACJ,WAAD,CAAtB,CAF4E,CAEvC;AAErC;AACA;;AACAtR,UAAM,CAACC,IAAP,CAAYmR,YAAZ,EAA0BjM,OAA1B,CAAkC5C,GAAG,IAAI;AACrC,UAAMiO,IAAI,GAAG,KAAKqC,iBAAL,CAAuBtQ,GAAvB,CAAb;AACA,UAAMmR,aAAa,GAAGjD,QAAQ,CAACW,YAAD,EAAe7O,GAAf,EAAoBiO,IAApB,CAA9B;AACA,UAAMmD,IAAI,cAAOpR,GAAP,CAAV;;AAEA,UAAIvC,MAAM,CAACsO,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCb,IAArC,EAA2CpL,GAA3C,CAAJ,EAAqD;AACjD,YAAM5F,KAAK,GAAG8T,QAAQ,CAAC9C,IAAD,EAAOpL,GAAP,EAAYiO,IAAZ,CAAtB,CADiD,CAGjD;;AACA,YAAI,CAAC3C,qDAAO,CAAClR,KAAD,EAAQ+W,aAAR,CAAZ,EAAoC;AAChC;AACA/K,aAAG,CAACxH,IAAJ,CAAS;AACLyS,cAAE,EAAEC,8DADC;AAELF,gBAFK;AAGLhX,iBAAK,EAAE+W;AAHF,WAAT;AAKA/K,aAAG,CAACxH,IAAJ,CAAS;AACLyS,cAAE,EAAEE,iEADC;AAELH,gBAFK;AAGLhX;AAHK,WAAT;AAKH;AACJ,OAjBD,MAiBO;AACH;AACA;AACAgM,WAAG,CAACxH,IAAJ,CAAS;AACLyS,YAAE,EAAEC,8DADC;AAELF,cAFK;AAGLhX,eAAK,EAAE+W;AAHF,SAAT;AAKA/K,WAAG,CAACxH,IAAJ,CAAS;AAAEyS,YAAE,EAAEG,gEAAN;AAA4BJ;AAA5B,SAAT;AACH;;AACD,aAAOhG,IAAI,CAACpL,GAAD,CAAX;AACH,KAjCD,EAN4E,CAyC5E;;AACAvC,UAAM,CAACC,IAAP,CAAY0N,IAAZ,EAAkBxI,OAAlB,CAA0B5C,GAAG,IAAI;AAC7B,UAAMiO,IAAI,GAAG,KAAKqC,iBAAL,CAAuBtQ,GAAvB,CAAb;AACA,UAAM5F,KAAK,GAAG8T,QAAQ,CAAC9C,IAAD,EAAOpL,GAAP,EAAYiO,IAAZ,CAAtB;AAEA7H,SAAG,CAACxH,IAAJ,CAAS;AACLyS,UAAE,EAAEI,6DADC;AAELL,YAAI,aAAMpR,GAAN,CAFC;AAGL5F;AAHK,OAAT;AAKH,KATD;AAWA,WAAOgM,GAAP;AACH;AAED;;;;;;;AAKA2B,SAAO,GAAY;AACf,QAAM;AAAEA,aAAF;AAAW0B,oBAAX;AAA2BC,cAA3B;AAAqCC;AAArC,QAAuD,KAAK7O,KAAlE;AACA,WACIiN,OAAO,IACP,OAAO2B,QAAP,KAAoB,UADpB,IAEA,OAAOC,MAAP,KAAkB,UAFlB,IAGA,OAAOF,cAAP,KAA0B,UAJ9B;AAMH;AAED;;;;;;;AAKAiF,WAAS,GAAY;AACjB,QAAM;AAAEA;AAAF,QAAuB,KAAKtT,KAAlC;AACA,WAAO,KAAK2M,OAAL,MAAkB2G,SAAzB;AACH;;AA4BDrT,QAAM,GAAG;AACL,QAAM;AAAEuT,mBAAa,GAAG,EAAlB;AAAsBlI,aAAtB;AAA+BoI,iCAA/B;AAA4DjP,YAA5D;AAAoEgG;AAApE,QAAwF,KAAK/K,KAAnG;AACA,QAAM;AAAE+N,YAAM,GAAG;AAAX,QAAkBhD,QAAxB;AACA,QAAM;AACFuF,UADE;AAEFrH,YAFE;AAGF4K,YAHE;AAIFzE,wBAJE;AAKFuE,yBALE;AAMFlE,8BANE;AAOFJ;AAPE,QAQK,KAAK/O,KARhB;AASA,QAAMwU,YAAY,GAAG/J,QAAQ,CAACgK,WAAT,KAAyBC,sEAA9C;AACA,QAAMpB,SAAS,GAAG,KAAKA,SAAL,EAAlB;;AAEA,QAAI,CAAC7I,QAAD,IAAa6L,+DAAQ,CAAC7L,QAAD,CAAzB,EAAqC;AACjC,aAAO,IAAP;AACH,KAjBI,CAmBL;;;AACA,QAAM8L,iBAAiB,GAAG,CAAC9I,MAAM,CAACvM,MAAP,GAAgB,CAAjB,IAAsB,EAAhD;AAEA,WACI;AAAK,SAAG,EAAE,KAAKqU;AAAf,OACI,oDAAC,2EAAD;AACI,uBAAiB,EAAEgB,iBADvB;AAEI,iBAAW,EAAE;AACT,SAACC,mEAAD,GAAoB;AADX,OAFjB;AAKI,qBAAe,MALnB;AAMI,uBAAiB,EAAE,KAAKC,gBAAL,EANvB;AAOI,gBAAU,MAPd;AAQI,YAAM,EAAEhS,MARZ;AASI,WAAK,EAAE,KAAKiR,QAAL;AATX,OAWKrC,mBAAmB,IAChB,oDAAC,6FAAD;AAAyB,eAAS,EAAEE;AAApC,OACI,oDAAC,uEAAD;AACI,yBAAmB,EAAE,KAAKsC,sBAAL,EADzB;AAEI,cAAQ,EAAE,KAAKa,eAFnB;AAGI,eAAS,EAAE,KAAKpI;AAHpB,MADJ,CAZR,EAoBK,CAAC+E,mBAAD,IACG,oDAAC,6FAAD;AAAyB,eAAS,EAAEE;AAApC,OACI,oDAAC,2EAAD;AAAM,mBAAa,EAAEjI,OAAO,GAAG,KAAKiD,MAAR,GAAiBlC,kDAAIA;AAAjD,OACI;AAAK,eAAS,EAAC;AAAf,OACKqH,2BAA2B,IACxB,oDAAC,uDAAD;AACI,aAAO,EAAEJ,SAAS,IAAI,CAAC,CAACE,aAAa,CAAC7G,OAD1C;AAEI,wBAAkB,EAAEmC,kBAFxB;AAGI,4BAAsB,EAAEC,sBAH5B;AAII,sBAAgB,EAAEyF,YAJtB;AAKI,yBAAmB,EAAE,KAAKtF,mBAL9B;AAMI,qBAAe,EAAE,KAAKD,eAN1B;AAOI,8BAAwB,EAAEE;AAP9B,MAFR,EAYKqF,YAAY,GACT,oDAAC,wDAAD;AACI,aAAO,EAAElB,SADb;AAEI,UAAI,EAAEtD,IAFV;AAGI,mBAAa,EAAE,KAAKG,aAHxB;AAII,mBAAa,EAAE,KAAKE;AAJxB,MADS,GAQT,oDAAC,2DAAD;AACI,aAAO,EAAEiD,SADb;AAEI,UAAI,EAAEtD,IAFV;AAGI,YAAM,EAAErH,MAHZ;AAII,mBAAa,EAAE,KAAKwH,aAJxB;AAKI,mBAAa,EAAE,KAAKE,aALxB;AAMI,cAAQ,EAAE5F;AANd,MApBR,CADJ,EA+BK6I,SAAS,IACN,oDAAC,gDAAD;AACI,cAAQ,EAAE,KAAKjC,QADnB;AAEI,cAAQ,EAAE,KAAKsF,eAFnB;AAGI,cAAQ,EAAErL;AAHd,MAhCR,CADJ,CArBR,CADJ,CADJ;AAoEH;;AAvjBoD;;gBAAnD6H,Q,kBACoB;AAClBnD,MAAI,EAAE,EADY;AAElB1E,SAAO,EAAE;AAFS,C;;AAyjBX6H,uEAAf,E;;;;;;;;;;;ACrpBA,uC;;;;;;;;;;;;ACCA;AAAA;AAAA;AAAA;AAAA;AAEA;;AAgBA,IAAMyD,SAAS,GAAG;AAAA,MAAC;AACflD,+BAA2B,GAAG,KADf;AAEf9I,WAAO,GAAG,EAFK;AAGfyD,kBAHe;AAIfC,YAJe;AAKfC,UALe;AAMf7C;AANe,GAAD;AAAA,SAQdd,OAAO,CAACxK,GAAR,CACI,WAA+E;AAAA,QAA9E;AAAEkL,aAAO,GAAG,KAAZ;AAAmBuB,cAAnB;AAA6BC,cAAQ,GAAG,KAAxC;AAA+CrC;AAA/C,KAA8E;AAC3E,QAAM;AAAEgK;AAAF,QAAkBhK,QAAxB;AACA,QAAMhG,MAAM,GAAGmG,OAAO,CAAC1J,MAAR,KAAmB,CAAnB,IAAwBuT,WAAW,KAAK/I,mBAAvD;AACA,WACI,oDAAC,iDAAD;AACI,aAAO,EAAEmB,QAAQ,CAACF,OADtB;AAEI,mBAAa,EAAEE,QAAQ,CAAC2G,aAF5B;AAGI,UAAI,EAAE3G,QAAQ,CAACmD,IAHnB;AAII,cAAQ,EAAElD,QAJd;AAKI,QAAE,EAAED,QAAQ,CAAC9I,EALjB;AAMI,iCAA2B,EAAE2P,2BANjC;AAOI,aAAO,EAAEpI,OAPb;AAQI,YAAM,EAAE7G,MARZ;AASI,SAAG,YAAKoI,QAAQ,CAAC9I,EAAd,cAAoB0Q,WAApB,CATP;AAUI,oBAAc,EAAEpG,cAVpB;AAWI,YAAM,EAAEE,MAXZ;AAYI,cAAQ,EAAED,QAZd;AAaI,cAAQ,EAAE7D;AAbd,MADJ;AAiBH,GArBL,CARc;AAAA,CAAlB;;AAgCemM,wEAAf,E;;;;;;;;;;;;AClDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AAEA;;AAQA,IAAMC,6BAA6B,GAAG;AAAA,MAAC;AAAExF,YAAF;AAAYyF,aAAZ;AAAuBC;AAAvB,GAAD;AAAA,SAClC;AAAK,aAAS,EAAC;AAAf,KACI;AAAK,aAAS,EAAC;AAAf,KACI;AAAG,aAAS,EAAC;AAAb,KAA+CA,mBAA/C,CADJ,EAEI;AAAK,aAAS,EAAC;AAAf,KACI,oDAAC,iEAAD;AAAQ,yBAAkB,wBAA1B;AAAmD,WAAO,EAAE1F,QAA5D;AAAsE,QAAI,EAAC;AAA3E,KACI,oDAAC,2DAAD,EAAsB9Q,iDAAQ,CAACiS,cAA/B,CADJ,CADJ,EAII,oDAAC,gFAAD;AAAe,yBAAkB,wBAAjC;AAA0D,WAAO,EAAEsE,SAAnE;AAA8E,QAAI,EAAC;AAAnF,KACI,oDAAC,2DAAD,EAAsBvW,iDAAQ,CAACyW,YAA/B,CADJ,CAJJ,CAFJ,CADJ,CADkC;AAAA,CAAtC;;AAgBeH,4FAAf,E;;;;;;;;;;;ACjCA,uC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACCA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAuBA,IAAMI,cAAc,GAAG;AAAA,MAAC;AAAEnV,cAAU,GAAG;AAAf,GAAD;AAAA,MAAuB7C,IAAvB;;AAAA,SACnB,oDAAC,0EAAD,eACQ6C,UADR,EAEQ7C,IAFR;AAGI,sCAAkC,MAHtC;AAII,yBAAkB;AAJtB,KADmB;AAAA,CAAvB;;AASA,IAAMiY,qBAAqB,GAAG,CAACC,YAAD,EAAwCC,aAAxC,KAC1BD,YAAY,CAACnR,MAAb,CACKyE,QAAD,IACI2M,aAAa,CAACxR,SAAd,CACKyR,YAAD,IACIA,YAAY,CAAC5C,WAAb,KAA6BhK,QAAQ,CAACgK,WAAtC,IAAqD4C,YAAY,CAACC,KAAb,KAAuB7M,QAAQ,CAAC6M,KAF7F,MAGM,CAAC,CALf,CADJ;;AASA,MAAMC,gBAAN,SAA+B/X,mDAA/B,CAAiE;AAC7DC,aAAW,CAACC,KAAD,EAAe;AACtB,UAAMA,KAAN;;AADsB,yCAyBZ,MAAM;AAChB,UAAM;AACF8X,sBADE;AAEFtJ,aAFE;AAGFuJ,sBAHE;AAIFC,2BAJE;AAKFC,0BALE;AAMFlM,iBAAS,EAAE0L,YANT;AAOFhR,aAPE;AAQFiR;AARE,UASK,KAAK1X,KAThB;AAUA,UAAM;AAAE+L;AAAF,UAAuB,KAAKzL,KAAlC;AACA,UAAM4X,kBAAkB,GAAGV,qBAAqB,CAACC,YAAD,EAAeC,aAAf,CAArB,CAAmDlW,MAAnD,GAA4D,CAAvF;AACA,UAAM2W,YAAY,GAAGV,YAAY,CAACjW,MAAb,GAAsB,CAA3C;AACA,UAAM4W,UAAU,GAAGrM,SAAS,CAACvK,MAAV,GAAmB,CAAtC;AAEA,UAAI6W,kBAAkB,GAAG,IAAzB;;AAEA,UAAIP,cAAJ,EAAoB;AAChBO,0BAAkB,GACd,oDAAC,qEAAD;AAAkB,mBAAS,EAAC;AAA5B,UADJ;AAGH,OAJD,MAIO,IAAI,CAACF,YAAD,IAAiB,CAACD,kBAAlB,IAAwC,CAACE,UAA7C,EAAyD;AAC5D,YAAIvD,OAAO,GAAG;AAAExQ,YAAE,EAAE;AAAN,SAAd;;AAEA,YAAI,CAAC8T,YAAL,EAAmB;AACftD,iBAAO,GAAGhU,kDAAQ,CAACyX,qCAAnB;AACH,SAFD,MAEO,IAAI,CAACJ,kBAAL,EAAyB;AAC5BrD,iBAAO,GAAGhU,kDAAQ,CAAC0X,qCAAnB;AACH,SAFM,MAEA,IAAI,CAACH,UAAL,EAAiB;AACpBvD,iBAAO,GAAGhU,kDAAQ,CAAC2X,0BAAnB;AACH;;AAEDH,0BAAkB,GACd;AAAG,mBAAS,EAAC;AAAb,WACI,oDAAC,2DAAD,EAAsBxD,OAAtB,CADJ,CADJ;AAKH;;AAED,UAAM4D,iBAAiB,GAAG1M,SAAS,CAACrL,GAAV,CAAcqK,QAAQ,IAAI;AAChD,YAAM2N,kBAAkB,GAAGX,cAAc,IAAIA,cAAc,CAAC1T,EAAf,KAAsB0G,QAAQ,CAAC1G,EAA5E;AAEA,YAAMsU,eAAe,GAAGnW,iDAAU,CAAC,4CAAD,EAA+C;AAC7E,oDAA0CkW;AADmC,SAA/C,CAAlC;AAIA,eACI,oDAAC,iEAAD;AAAc,aAAG,EAAE3N,QAAQ,CAAC1G;AAA5B,WACI,oDAAC,gEAAD;AAAa,mBAAS,EAAEsU,eAAxB;AAAyC,kBAAQ,EAAC,IAAlD;AAAuD,cAAI,EAAC;AAA5D,WACKD,kBAAkB,GAAGT,kBAAH,GAAwBD,mBAD/C,EAEK,KAAKY,eAAL,CAAqB7N,QAArB,CAFL,CADJ,CADJ;AAQH,OAfyB,CAA1B;AAiBA,aACI,0GACI,oDAAC,qEAAD;AACI,iBAAS,EAAC,iDADd;AAEI,aAAK,EAAEtE,KAFX;AAGI,oBAAY,MAHhB;AAII,gBAAQ,EAAG3D,KAAD,IAAmB;AACzB0L,eAAK,CAACzC,SAAS,CAACjJ,KAAD,CAAV,CAAL;AACH,SANL;AAOI,gBAAQ,EAAE,KAAK+V,WAAL,EAPd;AAQI,oBAAY;AARhB,SAUKR,kBAAkB,GAAG,IAAH,GAAUI,iBAVjC,CADJ,EAaKJ,kBAbL,CADJ;AAiBH,KAnGyB;;AAAA,yCA0GZ,MAAM;AAChB,UAAM;AAAEtW;AAAF,UAAkB,KAAK/B,KAA7B;AACA,UAAM;AAAE8Y;AAAF,UAAwB,KAAKxY,KAAnC;AACA,aACI,oDAAC,cAAD;AACI,aAAK,EAAC,EADV;AAEI,gBAAQ,EAAE,KAAKyY,eAFnB;AAGI,mBAAW,EAAEhX,IAAI,CAACO,aAAL,CAAmBzB,kDAAQ,CAACmY,iCAA5B,CAHjB;AAII,YAAI,EAAC,MAJT;AAKI,sBAAc,MALlB;AAMI,aAAK,EAAEF;AANX,QADJ;AAUH,KAvHyB;;AAAA,6CA6IPG,SAAD,IAAuB;AACrC,UAAM;AAAElN,iBAAS,EAAE0L,YAAb;AAA2BC;AAA3B,UAA6C,KAAK1X,KAAxD;AACA,UAAM8Y,UAAU,GAAGG,SAAnB;AACA,UAAMlN,SAAS,GAAGyL,qBAAqB,CAACC,YAAD,EAAeC,aAAf,CAAvC;AAEA,WAAKrX,QAAL,CAAc;AACVyY,kBADU;AAEV/M,iBAAS,EAAEA,SAAS,CAACzF,MAAV,CAAiByE,QAAQ,IAAI;AACpC,cAAM3L,KAAa,GAAK2L,QAAQ,CAACgK,WAAT,KAAyBC,sEAAzB,GAClBnU,kDAAQ,CAACoV,WAAT,CAAqBiD,cADH,GAElBnO,QAAQ,CAACmK,WAFf;AAGA,iBAAO9V,KAAK,CAAC+Z,WAAN,GAAoB/S,QAApB,CAA6B0S,UAAU,CAACK,WAAX,EAA7B,CAAP;AACH,SALU;AAFD,OAAd;AASH,KA3JyB;;AAAA,oCA6JjB,MAAM;AACX,UAAM;AAAEC,wBAAF;AAAoBrN,iBAApB;AAA+B2L;AAA/B,UAAiD,KAAK1X,KAA5D;;AAEA,UAAIoZ,gBAAJ,EAAsB;AAClBA,wBAAgB,CAAC,IAAD,CAAhB;AACH;;AAED,WAAK/Y,QAAL,CAAc;AACVgZ,sBAAc,EAAE,IADN;AAEVP,kBAAU,EAAE,EAFF;AAGV/M,iBAAS,EAAEyL,qBAAqB,CAACzL,SAAD,EAAY2L,aAAZ;AAHtB,OAAd;AAKH,KAzKyB;;AAAA,qCA2KhB,MAAM;AACZ,UAAM;AAAE0B;AAAF,UAAuB,KAAKpZ,KAAlC;;AAEA,UAAIoZ,gBAAJ,EAAsB;AAClBA,wBAAgB,CAAC,KAAD,CAAhB;AACH;;AAED,WAAK/Y,QAAL,CAAc;AAAEgZ,sBAAc,EAAE;AAAlB,OAAd;AACH,KAnLyB;;AAAA,+CAqLN,MAAM;AACtB,UAAM;AAAEC;AAAF,UAAkB,KAAKtZ,KAA7B;AACA,UAAM;AAAEqZ;AAAF,UAAqB,KAAK/Y,KAAhC;AACA,UAAMiZ,qBAAqB,GAAG/W,iDAAU,CAAC,KAAD,EAAQ;AAC5C,sBAAc6W;AAD8B,OAAR,CAAxC;;AAGA,UAAIC,WAAJ,EAAiB;AACb,eAAOA,WAAP;AACH;;AACD,aACI,oDAAC,gEAAD;AAAa,6BAAkB,0BAA/B;AAA0D,iBAAS,EAAEC,qBAArE;AAA4F,YAAI,EAAC;AAAjG,SACI,oDAAC,6EAAD,QACI,oDAAC,2DAAD,EAAsB1Y,kDAAQ,CAAC2Y,mBAA/B,CADJ,CADJ,CADJ;AAOH,KArMyB;;AAEtB,SAAKlZ,KAAL,GAAa;AACT+Y,oBAAc,EAAE,KADP;AAETP,gBAAU,EAAE,EAFH;AAGT/M,eAAS,EAAEyL,qBAAqB,CAACxX,KAAK,CAAC+L,SAAP,EAAkB/L,KAAK,CAAC0X,aAAxB;AAHvB,KAAb;AAKH;AAED;;;;;;;;AAMAjC,oBAAkB,QAAwE;AAAA,QAAvE;AAAE1J,eAAS,EAAE0N,aAAb;AAA4B/B,mBAAa,EAAEgC;AAA3C,KAAuE;AACtF,QAAM;AAAE3N,eAAF;AAAa2L;AAAb,QAA+B,KAAK1X,KAA1C;;AAEA,QAAI,CAACwQ,qDAAO,CAACiJ,aAAD,EAAgB1N,SAAhB,CAAR,IAAsC,CAACyE,qDAAO,CAACkJ,iBAAD,EAAoBhC,aAApB,CAAlD,EAAsF;AAClF,WAAKrX,QAAL,CAAc;AACV0L,iBAAS,EAAEyL,qBAAqB,CAACzL,SAAD,EAAY2L,aAAZ;AADtB,OAAd;AAGH;AACJ;;AAkGD;;;;;;AAMAkB,iBAAe,CAAC7N,QAAD,EAAyC;AACpD,WAAOA,QAAQ,CAACgK,WAAT,KAAyBC,sEAAzB,GACH,oDAAC,2DAAD;AAAkB,eAAS,EAAC;AAA5B,OAAwDnU,kDAAQ,CAACoV,WAAjE,EADG,GAGH;AAAK,eAAS,EAAC;AAAf,OAAwClL,QAAQ,CAACmK,WAAjD,CAHJ;AAKH;AAED;;;;;;;;AAgEA3U,QAAM,GAAG;AACL,QAAM;AAAE3B;AAAF,QAAgB,KAAKoB,KAA3B;AACA,QAAM2Z,eAAe,GAAGnX,iDAAU,CAAC,mDAAD,EAAsD5D,SAAtD,CAAlC;AAEA,WACI,oDAAC,yDAAD;AACI,eAAS,EAAE+a,eADf;AAEI,kBAAY,MAFhB;AAGI,yBAAmB,MAHvB;AAII,aAAO,EAAE,KAAKC,OAJlB;AAKI,YAAM,EAAE,KAAKC,MALjB;AAMI,cAAQ,EAAC,aANb;AAOI,wBAAkB;AAPtB,OASK,KAAKC,iBAAL,EATL,EAUI,oDAAC,0DAAD,QAAU,KAAKC,WAAL,EAAV,CAVJ,CADJ;AAcH;;AA1N4D;;AA6NjE;AACezW,4HAAU,CAACuU,gBAAD,CAAzB,E;;;;;;;;;;;ACvRA,uC;;;;;;;;;;;;ACCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;;AAWA,IAAMmC,iBAAiB,GAAG,UAAmF;AAAA,MAAlF;AAAE/M,WAAF;AAAWqD,QAAI,GAAG,EAAlB;AAAsBrH,UAAtB;AAA8BwH,iBAA9B;AAA6CE,iBAA7C;AAA4D5F;AAA5D,GAAkF;AACzG,MAAM;AAAEgD,UAAM,GAAG;AAAX,MAAkBhD,QAAxB;AACA,MAAMkP,SAAS,GAAGlM,MAAM,CAACvM,MAAP,GAAgB,CAAlC;AACA,MAAM0Y,gBAAgB,GAAGD,SAAS,IAAIlM,MAAM,CAACoM,IAAP,CAAY1a,KAAK,IAAI,CAACmX,8DAAQ,CAACnX,KAAD,CAA9B,CAAtC;AACA,MAAM2a,mBAAmB,GAAG,CAACH,SAA7B;AACA,MAAMI,uBAAuB,GAAGJ,SAAS,IAAI,CAACC,gBAA9C;AAEA,SACI,0GACKA,gBAAgB,IACbnM,MAAM,CAACrN,GAAP,CAAWjB,KAAK,IACZ,oDAAC,qDAAD;AACI,OAAG,EAAEA,KAAK,CAAC4E,EADf;AAEI,WAAO,EAAE4I,OAFb;AAGI,WAAO,EAAExN,KAAK,CAACyF,GAHnB;AAII,aAAS,EAAEoL,IAAI,CAAC7Q,KAAK,CAACyF,GAAP,CAJnB;AAKI,eAAW,EAAEzF,KAAK,CAACP,WALvB;AAMI,eAAW,EAAEO,KAAK,CAACyV,WANvB;AAOI,SAAK,EAAEjM,MAAM,CAACxJ,KAAK,CAACyF,GAAP,CAPjB;AAQI,YAAQ,EAAE0R,8DAAQ,CAACnX,KAAD,CARtB,CAQ+B;AAR/B;AASI,YAAQ,EAAE,CAACyF,GAAD,EAAc5F,KAAd,KAA4C;AAClD,UAAI2N,OAAO,IAAIwD,aAAf,EAA8B;AAC1BA,qBAAa,CAACvL,GAAD,EAAM5F,KAAN,EAAaG,KAAK,CAAC0T,IAAnB,CAAb;AACH;AACJ,KAbL;AAcI,YAAQ,EAAGjO,GAAD,IAAiB;AACvB,UAAI+H,OAAO,IAAI0D,aAAf,EAA8B;AAC1BA,qBAAa,CAACzL,GAAD,CAAb;AACH;AACJ,KAlBL;AAmBI,WAAO,EAAEzF,KAAK,CAACmE,OAnBnB;AAoBI,QAAI,EAAEnE,KAAK,CAAC0T;AApBhB,IADJ,CAFR,EA0BKkH,uBAAuB,IACpB;AAAK,aAAS,EAAC;AAAf,KACI,oDAAC,2DAAD,EAAsBxZ,iDAAQ,CAACyZ,sBAA/B,CADJ,CA3BR,EA+BKF,mBAAmB,IAChB;AAAK,aAAS,EAAC;AAAf,KACI,oDAAC,2DAAD,EAAsBvZ,iDAAQ,CAAC0Z,uBAA/B,CADJ,CAhCR,CADJ;AAuCH,CA9CD;;AAgDeP,gFAAf,E;;;;;;;;;;;AClEA,uC;;;;;;;;;;;;ACEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO,IAAMQ,eAAuB,GAAG,MAAhC;AACA,IAAMC,eAAuB,GAAG,MAAhC;AACA,IAAMlH,kBAA6B,GAAG,SAAtC;AACA,IAAMF,gBAAyB,GAAG,OAAlC;AACA,IAAMqH,sBAAqC,GAAG,aAA9C;AACA,IAAMhK,iBAA2B,GAAG,QAApC;AACA,IAAMsE,0BAAwC,GAAG,YAAjD;AACA,IAAM2B,iBAAwB,GAAG,KAAjC;AACA,IAAMD,oBAA8B,GAAG,QAAvC;AACA,IAAMD,qBAAgC,GAAG,SAAzC;AACA,IAAMD,kBAA0B,GAAG,MAAnC,C;;;;;;;;;;;;ACXP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAaA,IAAMmE,SAAS,GAAG,MAAlB;;AAEA,IAAMC,WAAW,GAAG,UAAqF;AAAA,MAApF;AAAE7Y,QAAF;AAAQkL,WAAR;AAAiB4N,UAAjB;AAAyBC,WAAzB;AAAkCC,aAAlC;AAA6CvM,SAA7C;AAAoDrO,YAApD;AAA8DyO;AAA9D,GAAoF;AACrG,MAAMoM,MAAM,GACR,oDAAC,iEAAD;AACI,kBAAYjZ,IAAI,CAACO,aAAL,CAAmBzB,iDAAQ,CAACyR,SAA5B,CADhB;AAEI,yBAAkB,yBAFtB;AAGI,WAAO,EAAE9D,KAHb;AAII,QAAI,EAAC;AAJT,KAMI,oDAAC,mEAAD;AAAU,SAAK,EAAEmM;AAAjB,IANJ,CADJ;AAWA,MAAMM,SAAS,GACX,oDAAC,iEAAD;AACI,kBAAYlZ,IAAI,CAACO,aAAL,CAAmBzB,iDAAQ,CAACyW,YAA5B,CADhB;AAEI,yBAAkB,4BAFtB;AAGI,WAAO,EAAE,MAAM;AACX,UAAI1I,QAAJ,EAAc;AACVA,gBAAQ,CAACkM,OAAD,CAAR;AACH;AACJ,KAPL;AAQI,QAAI,EAAC;AART,KAUI,oDAAC,oEAAD;AAAW,SAAK,EAAEH;AAAlB,IAVJ,CADJ;AAeA,SACI;AAAK,aAAS,EAAC;AAAf,KAEI,oDAAC,8CAAD;AACI,WAAO,EAAE1N,OADb;AAEI,WAAO,EAAE6N,OAFb;AAGI,aAAS,EAAEC,SAHf;AAII,eAAW,EAAED,OAJjB;AAKI,YAAQ,EAAE3a,QALd,CAMI;AANJ;AAOI,YAAQ,EAAG+E,GAAD,IAAiB/E,QAAQ,CAAC+E,GAAD,EAAM,EAAN,CAPvC;AAQI,QAAI,EAAC;AART,IAFJ,EAYK+H,OAAO,IACJ;AAAK,aAAS,EAAC;AAAf,KACK4N,MAAM,GACH,oDAAC,4EAAD,QACKI,SADL,EAEKD,MAFL,CADG,GAMHC,SAPR,CAbR,CADJ;AA2BH,CAtDD;;AAwDA;AACe3X,4HAAU,CAACsX,WAAD,CAAzB,E;;;;;;;;;;;ACnFA,uC;;;;;;;;;;;;ACCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AACA;;AAYA,IAAMM,SAAS,GAAG;AAAA,MAAC;AAAEJ,WAAF;AAAWC,aAAX;AAAsB7F,eAAtB;AAAmChW,eAAnC;AAAgD6C,QAAhD;AAAsD5B,YAAQ,EAARA,SAAtD;AAAgEyO;AAAhE,GAAD;AAAA,SACd,oDAAC,+DAAD;AACI,aAAS,EAAC,qCADd;AAEI,cAAU,EAAC,cAFf;AAGI,eAAW,EAAE1P,WAHjB;AAII,iBAAa,EAAE;AACXic,SAAG,EAAE,SADM;AAEXC,WAAK,EAAE,MAFI;AAGXC,UAAI,EAAE;AAHK,KAJnB;AASI,qBAAiB,MATrB;AAUI,SAAK,EAAEnG,WAVX;AAWI,YAAQ,EAAE,CAACoG,IAAD,EAAaC,OAAb,KAAiC;AACvC,UAAIA,OAAJ,EAAa;AACTpb,iBAAQ,CAAC2a,OAAD,EAAUS,OAAV,CAAR;AACH,OAFD,MAEO;AACH3M,gBAAQ,CAACkM,OAAD,CAAR;AACH;AACJ,KAjBL;AAkBI,eAAW,EAAE/Y,IAAI,CAACO,aAAL,CAAmBzB,iDAAQ,CAAC2a,oBAA5B,CAlBjB;AAmBI,SAAK,EAAE,OAAOT,SAAP,KAAqB,QAArB,GAAgCU,iFAAyB,CAACV,SAAD,CAAzD,GAAuE1X;AAnBlF,IADc;AAAA,CAAlB;;AAwBA;AACeC,4HAAU,CAAC4X,SAAD,CAAzB,E;;;;;;;;;;;AC7CA,uC;;;;;;;;;;;;ACCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AACA;;AAmBA,IAAMQ,SAAS,GAAG,UAAqG;AAAA,MAApG;AAAEZ,WAAF;AAAWC,aAAX;AAAsB7F,eAAtB;AAAmChW,eAAnC;AAAgD6C,QAAhD;AAAsD5B,YAAQ,EAARA,SAAtD;AAAgEyO,YAAhE;AAA0EhL,WAAO,GAAG;AAApF,GAAoG;AACnH,MAAM8D,aAAa,GAAG9D,OAAO,CAAClD,GAAR,CAAYyF,MAAM,KAAK;AACzCS,eAAW,EAAET,MAAM,CAACjB,GADqB;AAEzC5F,SAAK,EAAE6G,MAAM,CAACjB,GAF2B;AAGzCyW,gBAAY,EAAE;AAH2B,GAAL,CAAlB,CAAtB;AAMA,MAAMhW,YAAY,GAAG5D,IAAI,CAACO,aAAL,CAAmBzB,iDAAQ,CAAC+a,wBAA5B,CAArB;AAEAlU,eAAa,CAACmU,OAAd,CAAsB;AAClBjV,eAAW,EAAEjB,YADK;AAElBrG,SAAK,EAAEqG,YAFW;AAGlBgW,gBAAY,EAAE;AAHI,GAAtB;AAMA,SACI;AAAK,aAAS,EAAC;AAAf,KACI,oDAAC,+DAAD;AAAO,QAAI,EAAEzG;AAAb,KACK,CAAC,CAAChW,WAAF,IAAiB;AAAG,aAAS,EAAC;AAAb,KAAyDA,WAAzD,CADtB,EAEI,oDAAC,kFAAD;AACI,gBAAY,MADhB;AAEI,YAAQ,EAAGiH,MAAD,IAAoB;AAC1B,UAAIA,MAAM,CAACwV,YAAX,EAAyB;AACrBxb,iBAAQ,CAAC2a,OAAD,EAAU3U,MAAM,CAAC7G,KAAjB,CAAR;AACH,OAFD,MAEO,IAAIsP,QAAJ,EAAc;AACjBA,gBAAQ,CAACkM,OAAD,CAAR;AACH;AACJ,KARL;AASI,WAAO,EAAEpT,aATb;AAUI,iBAAa,EACT;AACAoU,SAAK,CAACC,OAAN,CAAchB,SAAd,IAA2BA,SAAS,CAAClU,IAAV,CAAe,IAAf,CAA3B,GAAkDkU,SAAS,IAAIpV;AAZvE,IAFJ,CADJ,CADJ;AAsBH,CArCD;;AAuCA;AACerC,4HAAU,CAACoY,SAAD,CAAzB,E;;;;;;;;;;;ACnEA,uC;;;;;;;;;;;;ACCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAuBA,IAAMM,KAAK,GAAG,UAYD;AAAA,MAZE;AACXlB,WADW;AAEXC,aAFW;AAGX7F,eAHW;AAIXhW,eAJW;AAKXsE,SALW;AAMXoT,YANW;AAOX3J,WAPW;AAQX9M,YARW;AASXyO,YATW;AAUXhL,WAVW;AAWXuP;AAXW,GAYF;;AACT,MAAIyD,QAAJ,EAAc;AACV,WAAO,IAAP;AACH;;AAED,MAAI,CAAC3J,OAAL,EAAc;AACV,WAAO,oDAAC,sDAAD;AAAe,eAAS,EAAE8N,SAA1B;AAAqC,iBAAW,EAAE7b,WAAlD;AAA+D,iBAAW,EAAEgW,WAA5E;AAAyF,UAAI,EAAE/B;AAA/F,MAAP;AACH;;AAED,MAAI,CAAChT,QAAD,IAAa,CAACyO,QAAlB,EAA4B;AACxB,UAAM,IAAIqN,KAAJ,CAAU,oCAAV,CAAN;AACH;;AAED,UAAQ9I,IAAR;AACI,SAAKzC,6DAAL;AACI,aACI,oDAAC,kDAAD;AACI,eAAO,EAAEoK,OADb;AAEI,iBAAS,EAAEC,SAFf;AAGI,mBAAW,EAAE7b,WAHjB;AAII,mBAAW,EAAEgW,WAJjB;AAKI,gBAAQ,EAAE/U,QALd;AAMI,gBAAQ,EAAEyO;AANd,QADJ;;AAWJ,SAAKyE,4DAAL;AACI,aACI,oDAAC,mDAAD;AACI,eAAO,EAAEyH,OADb;AAEI,iBAAS,EAAEC,SAFf;AAGI,mBAAW,EAAE7b,WAHjB;AAII,mBAAW,EAAEgW,WAJjB;AAKI,aAAK,EAAE1R,KALX;AAMI,gBAAQ,EAAErD,QANd;AAOI,gBAAQ,EAAEyO,QAPd;AAQI,YAAI,EAAEuE;AARV,QADJ;;AAaJ,SAAKI,8DAAL;AACI,aACI,oDAAC,qDAAD;AACI,eAAO,EAAEuH,OADb;AAEI,iBAAS,EAAEC,SAFf;AAGI,mBAAW,EAAE7b,WAHjB;AAII,mBAAW,EAAEgW,WAJjB;AAKI,aAAK,EAAE1R,KALX;AAMI,gBAAQ,EAAErD,QANd;AAOI,gBAAQ,EAAEyO,QAPd;AAQI,YAAI,EAAEuE;AARV,QADJ;;AAaJ,SAAKsH,2DAAL;AACI,aACI,oDAAC,kDAAD;AACI,eAAO,EAAEK,OADb;AAEI,iBAAS,EAAEC,SAFf;AAGI,mBAAW,EAAE7b,WAHjB;AAII,mBAAW,EAAEgW,WAJjB;AAKI,gBAAQ,EAAE/U,QALd;AAMI,gBAAQ,EAAEyO,QANd;AAOI,eAAO,EAAEhL;AAPb,QADJ;;AAYJ,SAAK8W,kEAAL;AACI,aACI,oDAAC,yDAAD;AACI,eAAO,EAAEI,OADb;AAEI,iBAAS,EAAEC,SAFf;AAGI,mBAAW,EAAE7b,WAHjB;AAII,mBAAW,EAAEgW,WAJjB;AAKI,gBAAQ,EAAE/U,QALd;AAMI,gBAAQ,EAAEyO,QANd;AAOI,eAAO,EAAEhL;AAPb,QADJ;;AAYJ,SAAK4W,2DAAL;AACI,aACI,oDAAC,kDAAD;AACI,eAAO,EAAEM,OADb;AAEI,iBAAS,EAAEC,SAFf;AAGI,mBAAW,EAAE7b,WAHjB;AAII,mBAAW,EAAEgW,WAJjB;AAKI,gBAAQ,EAAE/U,QALd;AAMI,gBAAQ,EAAEyO;AANd,QADJ;;AAWJ;AACI,aACI,oDAAC,4EAAD;AAAa,aAAK,EAAEuE;AAApB,SACI,oDAAC,2DAAD,EAAsBtS,kDAAQ,CAACqb,wBAA/B,CADJ,CADJ;AAhFR;AAsFH,CA/GD;;AAiHeF,oEAAf,E;;;;;;;;;;;;ACtJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;;AAaA,IAAMG,UAAU,GAAG;AAAA,MAAC;AAAErB,WAAF;AAAWC,aAAX;AAAsB7F,eAAtB;AAAmChW,eAAnC;AAAgDsE,SAAhD;AAAuDrD,YAAQ,EAARA,SAAvD;AAAiEyO,YAAjE;AAA2EuE;AAA3E,GAAD;AAAA,SACf,oDAAC,kDAAD;AACI,WAAO,EAAE2H,OADb;AAEI,aAAS,EAAEC,SAFf;AAGI,eAAW,EAAE7b,WAHjB;AAII,eAAW,EAAEgW,WAJjB;AAKI,SAAK,EAAE1R,KALX;AAMI,YAAQ,EAAE,CAAC0B,GAAD,EAAc5F,KAAd,KAA4C;AAClD,UAAIiV,mEAAY,CAACpB,IAAD,EAAO7T,KAAP,CAAhB,EAA+B;AAC3Ba,iBAAQ,CAAC+E,GAAD,EAAM5F,KAAN,CAAR;AACH;AACJ,KAVL;AAWI,YAAQ,EAAEsP;AAXd,IADe;AAAA,CAAnB;;AAgBeuN,yEAAf,E;;;;;;;;;;;;AChCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;;AAaA,IAAMC,YAAY,GAAG;AAAA,MAAC;AAAEtB,WAAF;AAAWC,aAAX;AAAsB7F,eAAtB;AAAmChW,eAAnC;AAAgDsE,SAAhD;AAAuDrD,YAAQ,EAARA,SAAvD;AAAiEyO,YAAjE;AAA2EuE;AAA3E,GAAD;AAAA,SACjB,oDAAC,kDAAD;AACI,WAAO,EAAE2H,OADb;AAEI,aAAS,EAAEC,SAFf;AAGI,eAAW,EAAE7b,WAHjB;AAII,eAAW,EAAEgW,WAJjB;AAKI,SAAK,EAAE1R,KALX;AAMI,YAAQ,EAAE,CAAC0B,GAAD,EAAc5F,KAAd,KAA4C;AAClD,UAAIiV,mEAAY,CAACpB,IAAD,EAAO7T,KAAP,CAAhB,EAA+B;AAC3Ba,iBAAQ,CAAC+E,GAAD,EAAM5F,KAAN,CAAR;AACH;AACJ,KAVL;AAWI,YAAQ,EAAEsP;AAXd,IADiB;AAAA,CAArB;;AAgBewN,2EAAf,E;;;;;;;;;;;;AChCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAGA;AAEA;;AAYA,IAAM5T,gBAAgB,GAAG,UAQZ;AAAA,MARa;AACtBsS,WADsB;AAEtBC,aAFsB;AAGtB7F,eAHsB;AAItBhW,eAJsB;AAKtBiB,YAAQ,EAARA,SALsB;AAMtByO,YANsB;AAOtBhL,WAAO,GAAG;AAPY,GAQb;AACT,MAAM4C,WAAW,GAAG,oDAAC,2DAAD,EAAsB3F,iDAAQ,CAACwb,6BAA/B,CAApB;AAEA,SACI;AAAK,aAAS,EAAC;AAAf,KACI,oDAAC,+DAAD;AAAO,QAAI,EAAEnH;AAAb,KACK,CAAC,CAAChW,WAAF,IAAiB;AAAG,aAAS,EAAC;AAAb,KAAiEA,WAAjE,CADtB,EAEI,oDAAC,iFAAD;AACI,gBAAY,MADhB;AAEI,YAAQ,EAAGyH,eAAD,IAA8C;AACpD,UAAIA,eAAe,CAACnF,MAApB,EAA4B;AACxBrB,iBAAQ,CAAC2a,OAAD,EAAUnU,eAAe,CAACjG,GAAhB,CAAoB;AAAA,cAAC;AAAEpB;AAAF,WAAD;AAAA,iBAAeA,KAAf;AAAA,SAApB,CAAV,CAAR;AACH,OAFD,MAEO;AACHsP,gBAAQ,CAACkM,OAAD,CAAR;AACH;AACJ,KARL;AASI,WAAO,EAAElX,OAAO,CAAClD,GAAR,CAAYyF,MAAM,KAAK;AAC5BS,iBAAW,EAAET,MAAM,CAACjB,GADQ;AAE5B5F,WAAK,EAAE6G,MAAM,CAACjB;AAFc,KAAL,CAAlB,CATb;AAaI,eAAW,EAAEsB,WAbjB;AAcI,kBAAc,EAAEuU;AAdpB,IAFJ,CADJ,CADJ;AAuBH,CAlCD;;AAoCA;AACevS,+EAAf,E;;;;;;;;;;;AC3DA,uC;;;;;;;;;;;;;;;;;;;;;;;ACCA;AACA;AAEA;AAEA;AACA;AACA;;AASA,IAAM8T,aAAa,GAAG,UAA0D;AAAA,MAAzD;AAAEvB,aAAF;AAAa7b,eAAb;AAA0BgW,eAA1B;AAAuC/B;AAAvC,GAAyD;AAC5E,MAAI7T,KAAK,GAAG,oDAAC,2DAAD;AAAkB,WAAO,EAAC;AAA1B,KAAkCuB,iDAAQ,CAAC0b,oBAA3C,EAAZ;;AAEA,MAAIxB,SAAS,IAAI,OAAOA,SAAP,KAAqB,QAAtC,EAAgD;AAC5C,QAAI,OAAOA,SAAP,KAAqB,QAArB,IAAiC5H,IAAI,KAAKqH,0DAA9C,EAA+D;AAC3Dlb,WAAK,GACD,oDAAC,wDAAD;AAAe,WAAG,EAAC,SAAnB;AAA6B,aAAK,EAAC,MAAnC;AAA0C,aAAK,EAAEmc,iFAAyB,CAACV,SAAD,CAA1E;AAAuF,YAAI,EAAC;AAA5F,QADJ;AAGH,KAJD,MAIO,IAAIe,KAAK,CAACC,OAAN,CAAchB,SAAd,CAAJ,EAA8B;AACjCzb,WAAK,GAAGyb,SAAS,CAAClU,IAAV,CAAe,IAAf,CAAR;AACH,KAFM,MAEA;AACHvH,WAAK,GAAGyb,SAAR;AACH;AACJ;;AAED,SACI;AAAI,aAAS,EAAC;AAAd,KACI,gEAAK7F,WAAL,CADJ,EAEK,CAAC,CAAChW,WAAF,IAAiB;AAAG,aAAS,EAAC;AAAb,KAA8DA,WAA9D,CAFtB,EAGI,gEAAKI,KAAL,CAHJ,CADJ;AAOH,CAtBD;;AAwBegd,4EAAf,E;;;;;;;;;;;ACzCA,uC;;;;;;;;;;;;ACCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;;AAcA,IAAME,SAAS,GAAG,UAUL;AAAA,MAVM;AACf1B,WADe;AAEfC,aAFe;AAGf7F,eAHe;AAIfhW,eAJe;AAKfsE,SALe;AAMfzB,QANe;AAOf5B,YAAQ,EAARA,SAPe;AAQfyO,YARe;AASfuE,QAAI,GAAG;AATQ,GAUN;AACT,MAAI7T,KAAK,GAAG,EAAZ;;AAEA,MAAI,OAAOyb,SAAP,KAAqB,QAAzB,EAAmC;AAC/Bzb,SAAK,GAAGyb,SAAR;AACH,GAFD,MAEO,IAAIA,SAAJ,EAAe;AAClBzb,SAAK,GAAGyb,SAAR;AACH;;AAED,SACI,oDAAC,8DAAD;AACI,aAAS,EAAC,qCADd;AAEI,eAAW,EAAE7b,WAFjB;AAGI,SAAK,EAAEsE,KAHX;AAII,qBAAiB,MAJrB;AAKI,SAAK,EAAE0R,WALX;AAMI,QAAI,EAAE4F,OANV;AAOI,YAAQ,EAAG7a,KAAD,IAAqD;AAC3D,UAAMwR,aAAa,GAAIxR,KAAK,CAACwR,aAA7B;;AACA,UAAIA,aAAa,CAACnS,KAAlB,EAAyB;AACrBa,iBAAQ,CAAC2a,OAAD,EAAUrJ,aAAa,CAACnS,KAAxB,CAAR;AACH,OAFD,MAEO;AACHsP,gBAAQ,CAACkM,OAAD,CAAR;AACH;AACJ,KAdL;AAeI,eAAW,EAAE/Y,IAAI,CAACO,aAAL,CAAmBzB,iDAAQ,CAAC4b,qBAA5B,CAfjB;AAgBI,QAAI,EAAEtJ,IAhBV;AAiBI,SAAK,EAAE7T;AAjBX,IADJ;AAqBH,CAxCD;;AA0CA;AACegE,4HAAU,CAACkZ,SAAD,CAAzB,E;;;;;;;;;;;AChEA,uC;;;;;;;;;;;;ACCA;AAAA;AAAA;AAAA;AAEA,IAAME,UAAU,GAAG,wBAAnB;AACA,IAAMC,YAAY,GAAG,eAArB;;AAEA,IAAMC,cAAc,GAAItd,KAAD,IAAmB,CAAC,CAACA,KAAK,CAACud,KAAN,CAAYH,UAAZ,CAA5C;;AACA,IAAMI,gBAAgB,GAAIxd,KAAD,IAAmB,CAAC,CAACA,KAAK,CAACud,KAAN,CAAYF,YAAZ,CAA9C;;AAEA,IAAMpI,YAAY,GAAG,CAACpB,IAAD,EAAe7T,KAAf,KAA6C;AAC9D,MAAI6T,IAAI,KAAKE,2DAAT,IAA6B,OAAO/T,KAAP,KAAiB,QAAlD,EAA4D;AACxD,WAAOsd,cAAc,CAACtd,KAAD,CAArB;AACH;;AAED,MAAI6T,IAAI,KAAKI,6DAAT,IAA+B,OAAOjU,KAAP,KAAiB,QAApD,EAA8D;AAC1D,WAAOwd,gBAAgB,CAACxd,KAAD,CAAvB;AACH;;AAED,SAAO,IAAP;AACH,CAVD,C,CAYA;;;;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAEA,IAAMuB,QAAQ,GAAGC,iEAAc,CAAC;AAC5BmV,aAAW;AAAA;AAAA;AAAA,GADiB;AAM5B3D,WAAS;AAAA;AAAA;AAAA,GANmB;AAW5BgF,cAAY;AAAA;AAAA;AAAA,GAXgB;AAgB5BxF,WAAS;AAAA;AAAA;AAAA,GAhBmB;AAqB5BE,sBAAoB;AAAA;AAAA;AAAA,GArBQ;AA0B5BC,aAAW;AAAA;AAAA;AAAA,GA1BiB;AA+B5BE,wBAAsB;AAAA;AAAA;AAAA,GA/BM;AAoC5BP,gBAAc;AAAA;AAAA;AAAA,GApCc;AAyC5BC,uBAAqB;AAAA;AAAA;AAAA,GAzCO;AA8C5BN,qBAAmB;AAAA;AAAA;AAAA,GA9CS;AAmD5BH,yBAAuB;AAAA;AAAA;AAAA,GAnDK;AAwD5BE,wBAAsB;AAAA;AAAA;AAAA,GAxDM;AA6D5BoD,cAAY;AAAA;AAAA;AAAA,GA7DgB;AAkE5BwH,0BAAwB;AAAA;AAAA;AAAA,GAlEI;AAuE5B5G,qBAAmB;AAAA;AAAA;AAAA,GAvES;AA4E5BiH,sBAAoB;AAAA;AAAA;AAAA,GA5EQ;AAiF5BX,0BAAwB;AAAA;AAAA;AAAA,GAjFI;AAsF5BS,+BAA6B;AAAA;AAAA;AAAA,GAtFD;AA2F5BI,uBAAqB;AAAA;AAAA;AAAA,GA3FO;AAgG5BjB,sBAAoB;AAAA;AAAA;AAAA,GAhGQ;AAqG5B3I,wBAAsB;AAAA;AAAA;AAAA,GArGM;AA0G5BkK,mCAAiC;AAAA;AAAA;AAAA,GA1GL;AAgH5BC,qCAAmC;AAAA;AAAA;AAAA,GAhHP;AAuH5BC,yCAAuC;AAAA;AAAA;AAAA,GAvHX;AA6H5BC,2CAAyC;AAAA;AAAA;AAAA,GA7Hb;AAoI5BlE,mCAAiC;AAAA;AAAA;AAAA,GApIL;AAyI5BQ,qBAAmB;AAAA;AAAA;AAAA,GAzIS;AA8I5B2D,wBAAsB;AAAA;AAAA;AAAA,GA9IM;AAmJ5B3E,4BAA0B;AAAA;AAAA;AAAA,GAnJE;AAwJ5B4E,8BAA4B;AAAA;AAAA;AAAA,GAxJA;AA6J5B7E,uCAAqC;AAAA;AAAA;AAAA,GA7JT;AAkK5BD,uCAAqC;AAAA;AAAA;AAAA,GAlKT;AAuK5BvF,cAAY;AAAA;AAAA;AAAA,GAvKgB;AA4K5BD,gBAAc;AAAA;AAAA;AAAA,GA5Kc;AAiL5BnD,kCAAgC;AAAA;AAAA;AAAA,GAjLJ;AAuL5B8C,YAAU;AAAA;AAAA;AAAA,GAvLkB;AA4L5BC,uBAAqB;AAAA;AAAA;AAAA,GA5LO;AAiM5B9C,qBAAmB;AAAA;AAAA;AAAA,GAjMS;AAsM5BE,wBAAsB;AAAA;AAAA;AAAA,GAtMM;AA4M5BE,8BAA4B;AAAA;AAAA;AAAA,GA5MA;AAkN5BD,wBAAsB;AAAA;AAAA;AAAA,GAlNM;AAuN5BE,2BAAyB;AAAA;AAAA;AAAA,GAvNG;AA8N5BE,uBAAqB;AAAA;AAAA;AAAA,GA9NO;AAmO5BC,4BAA0B;AAAA;AAAA;AAAA,GAnOE;AAwO5BkK,wBAAsB;AAAA;AAAA;AAAA,GAxOM;AA8O5BC,yBAAuB;AAAA;AAAA;AAAA,GA9OK;AAoP5BrK,uBAAqB;AAAA;AAAA;AAAA;AApPO,CAAD,CAA/B;AA4PerP,uEAAf,E;;;;;;;;;;;;AC5PA;AAAA;AAAA;AAAA;AAAA,IAAM+V,QAAQ,GAAIyG,GAAD,IAA4D;AACzE,SAAO,CAAC,CAACA,GAAG,CAACzG,QAAN,IAAkB,CAAC,CAACyG,GAAG,CAACC,MAA/B;AACH,CAFD;AAIA;;;;;;;AAKA,IAAMC,wBAAwB,GAAItR,eAAD,IAA0D;AACvF,SAAO,OAAOA,eAAP,KAA2B,QAA3B,GAAsC,IAAIuR,GAAJ,CAAQ,CAACvR,eAAD,CAAR,CAAtC,GAAmE,IAAIuR,GAAJ,CAAQvR,eAAR,CAA1E;AACH,CAFD;AAIA;;;;;;;;;AAOA,IAAMC,kBAAkB,GAAG,CACvBH,SADuB,EAEvBC,mBAFuB,EAGvBC,eAHuB,KAIG;AAC1B,MAAI,CAACD,mBAAL,EAA0B;AACtB,WAAO,CAAC,GAAGD,SAAJ,CAAP;AACH;;AACD,MAAM0R,eAAe,GAAG1R,SAAS,CAACzF,MAAV,CAAiByE,QAAQ,IAAIA,QAAQ,CAACgK,WAAT,KAAyB/I,mBAAtD,CAAxB;AACA,MAAM+B,MAAM,GAAG0P,eAAe,CAAC,CAAD,CAAf,GAAqBA,eAAe,CAAC,CAAD,CAAf,CAAmB1P,MAAxC,GAAiD,IAAhE;;AACA,MAAI9B,eAAe,IAAI8B,MAAvB,EAA+B;AAC3B,QAAM2P,iBAAiB,GAAGH,wBAAwB,CAACtR,eAAD,CAAlD;AACAwR,mBAAe,CAAC,CAAD,CAAf,CAAmB1P,MAAnB,GAA4BA,MAAM,CAACzH,MAAP,CAAc7G,KAAK,IAAIie,iBAAiB,CAACC,GAAlB,CAAsBle,KAAK,CAAC4E,EAA5B,CAAvB,CAA5B;AACH;;AACD,SAAOoZ,eAAP;AACH,CAfD;;;;;;;;;;;;;;ACrBA;AAAA;AAAA;AAAA;AAAA;AAEA;;AAUA,IAAMG,yBAAyB,GAAG;AAAA,MAAC;AAAEhf,aAAS,GAAG,EAAd;AAAkBif,SAAK,GAAG,SAA1B;AAAqCpX,SAArC;AAA4CqX,SAAK,GAAG;AAApD,GAAD;AAAA,SAC9B,oDAAC,uDAAD;AACI,aAAS,0CAAmClf,SAAnC,CADb;AAEI,SAAK,EAAE6H,KAFX;AAGI,WAAO,EAAC,aAHZ;AAII,SAAK,EAAEqX;AAJX,KAMI;AAAG,QAAI,EAAC,MAAR;AAAe,YAAQ,EAAC;AAAxB,KACI;AACI,KAAC,EAAC,6hEADN;AAEI,QAAI,EAAED;AAFV,IADJ,EAKI;AACI,KAAC,EAAC,mXADN;AAEI,QAAI,EAAEA,KAFV;AAGI,eAAW,EAAC;AAHhB,IALJ,EAUI;AACI,KAAC,EAAC,qJADN;AAEI,QAAI,EAAEA;AAFV,IAVJ,EAcI;AACI,KAAC,EAAC,2WADN;AAEI,QAAI,EAAC;AAFT,IAdJ,EAkBI;AACI,KAAC,EAAC,+JADN;AAEI,QAAI,EAAC,MAFT;AAGI,UAAM,EAAEA,KAHZ;AAII,eAAW,EAAC;AAJhB,IAlBJ,EAwBI;AACI,KAAC,EAAC,0JADN;AAEI,QAAI,EAAC,SAFT;AAGI,eAAW,EAAC;AAHhB,IAxBJ,EA6BI;AAAM,QAAI,EAAC,MAAX;AAAkB,UAAM,EAAC,QAAzB;AAAkC,MAAE,EAAC,KAArC;AAA2C,UAAM,EAAEA,KAAnD;AAA0D,eAAW,EAAC,GAAtE;AAA0E,SAAK,EAAC,IAAhF;AAAqF,KAAC,EAAC,IAAvF;AAA4F,KAAC,EAAC;AAA9F,IA7BJ,EA8BI;AACI,KAAC,EAAC,sPADN;AAEI,QAAI,EAAEA,KAFV;AAGI,eAAW,EAAC;AAHhB,IA9BJ,CANJ,CAD8B;AAAA,CAAlC;;AA8CeD,wFAAf,E;;;;;;;;;;;;AC1DA;AAAA;AAAA;AAAA;AAAA;AAEA;;AAWA,IAAMG,eAAe,GAAG;AAAA,MAAC;AAAEnf,aAAS,GAAG,EAAd;AAAkBif,SAAK,GAAG,SAA1B;AAAqCG,UAAM,GAAG,EAA9C;AAAkDvX,SAAlD;AAAyDqX,SAAK,GAAG;AAAjE,GAAD;AAAA,SACpB,oDAAC,uDAAD;AACI,aAAS,8BAAuBlf,SAAvB,CADb;AAEI,UAAM,EAAEof,MAFZ;AAGI,SAAK,EAAEvX,KAHX;AAII,WAAO,EAAC,WAJZ;AAKI,SAAK,EAAEqX;AALX,KAOI;AAAG,QAAI,EAAC,MAAR;AAAe,YAAQ,EAAC,SAAxB;AAAkC,aAAS,EAAC;AAA5C,KACI;AAAQ,aAAS,EAAC,cAAlB;AAAiC,MAAE,EAAC,GAApC;AAAwC,MAAE,EAAC,GAA3C;AAA+C,KAAC,EAAC,GAAjD;AAAqD,UAAM,EAAED;AAA7D,IADJ,EAEI;AAAM,aAAS,EAAC,YAAhB;AAA6B,QAAI,EAAEA,KAAnC;AAA0C,UAAM,EAAC,GAAjD;AAAqD,MAAE,EAAC,GAAxD;AAA4D,SAAK,EAAC,GAAlE;AAAsE,KAAC,EAAC,GAAxE;AAA4E,KAAC,EAAC;AAA9E,IAFJ,EAGI;AAAQ,aAAS,EAAC,YAAlB;AAA+B,MAAE,EAAC,GAAlC;AAAsC,MAAE,EAAC,IAAzC;AAA8C,QAAI,EAAEA,KAApD;AAA2D,KAAC,EAAC;AAA7D,IAHJ,CAPJ,CADoB;AAAA,CAAxB;;AAgBeE,8EAAf,E;;;;;;;;;;;;AC7BA;AAAA;AAAA;AAAA;AAAA;AAEA;;AAWA,IAAME,SAAS,GAAG;AAAA,MAAC;AAAErf,aAAS,GAAG,EAAd;AAAkBif,SAAK,GAAG,SAA1B;AAAqCG,UAAM,GAAG,EAA9C;AAAkDvX,SAAlD;AAAyDqX,SAAK,GAAG;AAAjE,GAAD;AAAA,SACd,oDAAC,uDAAD;AACI,aAAS,uBAAgBlf,SAAhB,CADb;AAEI,UAAM,EAAEof,MAFZ;AAGI,SAAK,EAAEvX,KAHX;AAII,WAAO,EAAC,WAJZ;AAKI,SAAK,EAAEqX;AALX,KAOI;AAAM,KAAC,EAAC,eAAR;AAAwB,QAAI,EAAC;AAA7B,IAPJ,EAQI;AAAM,aAAS,EAAC,YAAhB;AAA6B,KAAC,EAAC,mDAA/B;AAAmF,QAAI,EAAED;AAAzF,IARJ,CADc;AAAA,CAAlB;;AAaeI,wEAAf,E;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAAA;AAAA;AAEA;;AAWA,IAAMC,QAAQ,GAAG;AAAA,MAAC;AAAEtf,aAAS,GAAG,EAAd;AAAkBif,SAAK,GAAG,MAA1B;AAAkCG,UAAM,GAAG,EAA3C;AAA+CvX,SAA/C;AAAsDqX,SAAK,GAAG;AAA9D,GAAD;AAAA,SACb,oDAAC,uDAAD;AAAe,aAAS,sBAAelf,SAAf,CAAxB;AAAoD,UAAM,EAAEof,MAA5D;AAAoE,SAAK,EAAEvX,KAA3E;AAAkF,WAAO,EAAC,WAA1F;AAAsG,SAAK,EAAEqX;AAA7G,KACI;AACI,aAAS,EAAC,YADd;AAEI,KAAC,EAAC,mHAFN;AAGI,QAAI,EAAED;AAHV,IADJ,CADa;AAAA,CAAjB;;AAUeK,uEAAf,E;;;;;;;;;;;;ACvBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;;AAWA,IAAMC,mBAAmB,GAAG,UAA4E;AAAA,MAA3E;AAAEvf,aAAS,GAAG,EAAd;AAAkBif,SAAlB;AAAyBpX,SAAzB;AAAgC0M,QAAhC;AAAsC2K,SAAK,GAAG,EAA9C;AAAkDE,UAAM,GAAG;AAA3D,GAA2E;AACpG,MAAII,IAAJ;;AAEA,MAAIP,KAAJ,EAAW;AACPO,QAAI,GAAGP,KAAP;AACH,GAFD,MAEO,IAAI1K,IAAI,KAAK,SAAb,EAAwB;AAC3BiL,QAAI,GAAGC,+DAAP;AACH,GAFM,MAEA,IAAIlL,IAAI,KAAK,SAAb,EAAwB;AAC3BiL,QAAI,GAAGE,4DAAP;AACH,GAFM,MAEA;AACHF,QAAI,GAAGE,4DAAP;AACH;;AAED,SACI,oDAAC,uDAAD;AACI,aAAS,0BAAmB1f,SAAnB,CADb;AAEI,UAAM,EAAEof,MAFZ;AAGI,SAAK,EAAEvX,KAHX;AAII,WAAO,EAAC,WAJZ;AAKI,SAAK,EAAEqX;AALX,KAOI;AACI,aAAS,EAAC,YADd;AAEI,KAAC,EAAC,8NAFN;AAGI,QAAI,EAAEM,IAHV;AAII,YAAQ,EAAC;AAJb,IAPJ,CADJ;AAgBH,CA7BD;;AA+BeD,kFAAf,E;;;;;;;;;;;;AC7CA;AAAA;AAAA;AAAA;AAAA;AAEA;;AAWA,IAAMI,aAAa,GAAG;AAAA,MAAC;AAAE3f,aAAS,GAAG,EAAd;AAAkBif,SAAK,GAAG,MAA1B;AAAkCG,UAAM,GAAG,CAA3C;AAA8CvX,SAA9C;AAAqDqX,SAAK,GAAG;AAA7D,GAAD;AAAA,SAClB,oDAAC,uDAAD;AACI,aAAS,4BAAqBlf,SAArB,CADb;AAEI,UAAM,EAAEof,MAFZ;AAGI,SAAK,EAAEvX,KAHX;AAII,WAAO,EAAC,SAJZ;AAKI,SAAK,EAAEqX;AALX,KAOI;AAAM,aAAS,EAAC,YAAhB;AAA6B,KAAC,EAAC,aAA/B;AAA6C,QAAI,EAAED,KAAnD;AAA0D,YAAQ,EAAC;AAAnE,IAPJ,CADkB;AAAA,CAAtB;;AAYeU,4EAAf,E;;;;;;;;;;;;ACzBA;AAAA;AAAA;AAAA;AAAA;AAEA;;AAWA,IAAMC,YAAY,GAAG;AAAA,MAAC;AAAE5f,aAAS,GAAG,EAAd;AAAkBif,SAAK,GAAG,MAA1B;AAAkCG,UAAM,GAAG,CAA3C;AAA8CvX,SAA9C;AAAqDqX,SAAK,GAAG;AAA7D,GAAD;AAAA,SACjB,oDAAC,uDAAD;AACI,aAAS,2BAAoBlf,SAApB,CADb;AAEI,UAAM,EAAEof,MAFZ;AAGI,SAAK,EAAEvX,KAHX;AAII,WAAO,EAAC,SAJZ;AAKI,SAAK,EAAEqX;AALX,KAOI;AAAM,aAAS,EAAC,YAAhB;AAA6B,KAAC,EAAC,+BAA/B;AAA+D,QAAI,EAAED,KAArE;AAA4E,YAAQ,EAAC;AAArF,IAPJ,CADiB;AAAA,CAArB;;AAYeW,2EAAf,E;;;;;;;;;;;;ACzBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;;AAWA,IAAMC,UAAU,GAAG;AAAA,MAAC;AAAE7f,aAAS,GAAG,aAAd;AAA6Bif,SAAK,GAAGa,2DAArC;AAAgDV,UAAM,GAAG,EAAzD;AAA6DvX,SAA7D;AAAoEqX,SAAK,GAAG;AAA5E,GAAD;AAAA,SACf,oDAAC,uDAAD;AACI,aAAS,wBAAiBlf,SAAjB,CADb;AAEI,UAAM,EAAEof,MAFZ;AAGI,SAAK,EAAEvX,KAHX;AAII,WAAO,EAAC,WAJZ;AAKI,SAAK,EAAEqX;AALX,KAOI;AACI,aAAS,EAAC,YADd;AAEI,KAAC,EAAC,kQAFN;AAGI,QAAI,EAAED,KAHV;AAII,YAAQ,EAAC;AAJb,IAPJ,CADe;AAAA,CAAnB;;AAiBeY,yEAAf,E","file":"metadata-sidebar.no.react.js","sourcesContent":["var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n","// @flow\nimport * as React from 'react';\n\nimport './ButtonGroup.scss';\n\ntype Props = {\n    /** A group of buttons */\n    children: React.Node,\n    /** Class name for ButtonGroup */\n    className?: string,\n    isDisabled?: boolean,\n};\n\nconst ButtonGroup = ({ children, className = '', isDisabled }: Props) => (\n    <div className={`btn-group ${className} ${isDisabled ? 'is-disabled' : ''}`}>{children}</div>\n);\n\nexport default ButtonGroup;\n","// extracted by mini-css-extract-plugin","// @flow\nexport { default } from './DatePicker';\n","// @flow\nimport * as React from 'react';\n\nimport IconCaretDown from '../../icons/general/IconCaretDown';\n\nimport './MenuToggle.scss';\n\ntype Props = {\n    children?: React.Node,\n};\n\nconst MenuToggle = ({ children }: Props) => (\n    <span className=\"menu-toggle\">\n        {children}\n        <IconCaretDown className=\"toggle-arrow\" width={7} />\n    </span>\n);\n\nexport default MenuToggle;\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\n\nimport './RadioButton.scss';\n\n// @NOTE: readonly is not a valid attribute for input type radio so\n// this avoids the propType error that \"checked\" is set without \"onChange\"\nconst onChangeStub = () => {};\n\ntype Props = {\n    description?: React.Node,\n    hideLabel?: boolean,\n    isDisabled?: boolean,\n    isSelected?: boolean,\n    label: React.Node,\n    name?: string,\n    value: string,\n};\n\nconst RadioButton = ({\n    isDisabled,\n    isSelected = false,\n    description,\n    hideLabel = false,\n    label,\n    name,\n    value,\n    ...rest\n}: Props) => (\n    <div className=\"radio-container\">\n        {/* eslint-disable-next-line jsx-a11y/label-has-for */}\n        <label className=\"radio-label\">\n            <input\n                checked={isSelected}\n                disabled={isDisabled}\n                name={name}\n                onChange={onChangeStub}\n                type=\"radio\"\n                value={value}\n                {...rest}\n            />\n            <span />\n            <span className={hideLabel ? 'accessibility-hidden' : ''}>{label}</span>\n        </label>\n        {description ? <div className=\"radio-description\">{description}</div> : null}\n    </div>\n);\n\nexport type RadioButtonProps = Props;\nexport default RadioButton;\n","// extracted by mini-css-extract-plugin","// @flow\n\nimport * as React from 'react';\nimport type { FieldProps } from 'formik';\n\nimport RadioButton from './RadioButton';\nimport type { RadioButtonProps } from './RadioButton';\n\ntype Props = RadioButtonProps & FieldProps;\n\nconst RadioButtonField = ({ field, form, value, ...rest }: Props) => {\n    const { value: fieldValue, ...fieldRest } = field;\n    return <RadioButton {...fieldRest} {...rest} value={value} isSelected={value === fieldValue} />;\n};\n\nexport default RadioButtonField;\n","// @flow\nimport * as React from 'react';\n\nimport RadioButton from './RadioButton';\n\ntype Props = {\n    children: React.Node,\n    className: string,\n    name?: string,\n    onChange?: Function,\n    value?: string,\n};\n\ntype State = {\n    value?: string,\n};\n\nclass RadioGroup extends React.Component<Props, State> {\n    static defaultProps = {\n        className: '',\n    };\n\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            value: props.value,\n        };\n    }\n\n    // @TODO: think about adding componentDidUpdate or gDSFP\n    // to update the internal state value based on new props value\n\n    onChangeHandler = (event: SyntheticEvent<>) => {\n        const { target } = event;\n        const { onChange } = this.props;\n\n        if (target instanceof HTMLInputElement) {\n            this.setState({\n                value: target.value,\n            });\n        }\n\n        if (onChange) {\n            onChange(event);\n        }\n    };\n\n    render() {\n        const { children, className, name } = this.props;\n        const { value: stateValue } = this.state;\n\n        return (\n            <div className={`radio-group ${className}`} onChange={this.onChangeHandler}>\n                {React.Children.map(children, radio => {\n                    const { value, ...rest } = radio.props;\n\n                    return <RadioButton isSelected={value === stateValue} name={name} value={value} {...rest} />;\n                })}\n            </div>\n        );\n    }\n}\n\nexport type RadioGroupProps = Props;\nexport default RadioGroup;\n","// @flow\n\nimport * as React from 'react';\nimport type { FieldProps } from 'formik';\n\nimport RadioGroupPrimitive from './RadioGroup';\nimport type { RadioGroupProps } from './RadioGroup';\n\ntype Props = RadioGroupProps & FieldProps;\n\nconst RadioGroupField = ({ field, form, ...rest }: Props) => {\n    const { value } = field;\n    return <RadioGroupPrimitive key={value} {...field} {...rest} />;\n};\n\nexport default RadioGroupField;\n","// @flow\nexport { default as RadioButton } from './RadioButton';\nexport { default as RadioButtonField } from './RadioButtonField';\nexport { default as RadioGroup } from './RadioGroup';\nexport { default as RadioGroupField } from './RadioGroupField';\n","// @flow\nimport * as React from 'react';\nimport { defineMessages, injectIntl } from 'react-intl';\nimport classNames from 'classnames';\nimport omit from 'lodash/omit';\n\nimport IconClear from '../../icons/general/IconClear';\nimport IconSearch from '../../icons/general/IconSearch';\n\nimport makeLoadable from '../loading-indicator/makeLoadable';\n\nimport './SearchForm.scss';\n\nconst messages = defineMessages({\n    clearButtonTitle: {\n        defaultMessage: 'Clear',\n        description: 'Title for a clear button',\n        id: 'boxui.searchForm.clearButtonTitle',\n    },\n    searchButtonTitle: {\n        defaultMessage: 'Search',\n        description: 'Title for a search button',\n        id: 'boxui.searchForm.searchButtonTitle',\n    },\n    searchLabel: {\n        defaultMessage: 'Search query',\n        description: 'Label for a search input',\n        id: 'boxui.searchForm.searchLabel',\n    },\n});\n\ntype Props = {\n    /** Form submit action */\n    action?: string,\n    className?: string,\n    getSearchInput?: Function,\n    intl: Object,\n    isLoading?: boolean,\n    /** The way to send the form data, get or post */\n    method?: 'get' | 'post',\n    /** Name of the text input */\n    name?: string,\n    /** On change handler for the search input, debounced by 250ms */\n    onChange?: Function,\n    /** On submit handler for the search input */\n    onSubmit?: Function,\n    /** Extra query parameters in addition to the form data */\n    queryParams: Object,\n    /** Boolean to prevent propogation of search clear action */\n    shouldPreventClearEventPropagation?: boolean,\n    /** If the clear button is shown when input field is not empty */\n    useClearButton?: boolean,\n    /** The value of the input if controlled */\n    value?: string,\n};\n\ntype State = {\n    isEmpty: boolean,\n};\n\nclass SearchForm extends React.Component<Props, State> {\n    static defaultProps = {\n        action: undefined,\n        method: 'get',\n        name: 'search',\n        queryParams: {},\n        useClearButton: false,\n    };\n\n    state = {\n        isEmpty: true,\n    };\n\n    static getDerivedStateFromProps(props: Props): any {\n        const { value } = props;\n\n        if (value && !!value.trim()) {\n            return {\n                isEmpty: true,\n            };\n        }\n\n        return null;\n    }\n\n    onClearHandler = (event: SyntheticEvent<>) => {\n        const { onChange, shouldPreventClearEventPropagation } = this.props;\n        if (shouldPreventClearEventPropagation) {\n            event.stopPropagation();\n        }\n\n        if (this.searchInput) {\n            this.searchInput.value = '';\n        }\n        this.setState({ isEmpty: true });\n\n        if (onChange) {\n            onChange('');\n        }\n    };\n\n    onChangeHandler = ({ target }) => {\n        const { value } = target;\n        const { onChange } = this.props;\n        this.setState({ isEmpty: !value || !value.trim().length });\n\n        if (onChange) {\n            onChange(value);\n        }\n    };\n\n    onSubmitHandler = event => {\n        const { value } = event.target.elements[0];\n        const { onSubmit } = this.props;\n\n        if (onSubmit) {\n            onSubmit(value, event);\n        }\n    };\n\n    setInputRef = element => {\n        this.searchInput = element;\n\n        if (this.props.getSearchInput) {\n            this.props.getSearchInput(this.searchInput);\n        }\n    };\n\n    searchInput: ?HTMLInputElement;\n\n    render() {\n        const { action, className, intl, isLoading, method, name, queryParams, useClearButton, ...rest } = this.props;\n        const { isEmpty } = this.state;\n\n        const inputProps = omit(rest, [\n            'getSearchInput',\n            'onChange',\n            'onSubmit',\n            'required',\n            'shouldPreventClearEventPropagation',\n        ]);\n\n        const { formatMessage } = intl;\n        const classes = classNames(className, 'search-input-container');\n        const formClassNames = classNames('search-form', {\n            'is-empty': isEmpty,\n            'use-clear-button': useClearButton,\n        });\n        const hiddenInputs = Object.keys(queryParams).map((param, index) => (\n            <input key={index} name={param} type=\"hidden\" value={queryParams[param]} />\n        ));\n\n        const SearchActions = () => (\n            <div className=\"action-buttons\">\n                <button\n                    type=\"button\"\n                    className=\"action-button search-button\"\n                    title={formatMessage(messages.searchButtonTitle)}\n                >\n                    <IconSearch />\n                </button>\n                <button\n                    className=\"action-button clear-button\"\n                    onClick={this.onClearHandler}\n                    title={formatMessage(messages.clearButtonTitle)}\n                    type=\"button\"\n                >\n                    <IconClear />\n                </button>\n            </div>\n        );\n\n        const LoadableSearchActions = makeLoadable(SearchActions);\n\n        // @NOTE Prevent errors from React about controlled inputs\n        const onChangeStub = () => {};\n\n        return (\n            <div className={classes}>\n                <form\n                    action={action}\n                    className={formClassNames}\n                    method={method}\n                    onChange={this.onChangeHandler}\n                    onSubmit={this.onSubmitHandler}\n                    role=\"search\"\n                >\n                    <input\n                        ref={this.setInputRef}\n                        aria-label={formatMessage(messages.searchLabel)}\n                        autoComplete=\"off\"\n                        className=\"search-input\"\n                        name={name}\n                        onChange={onChangeStub}\n                        type=\"search\"\n                        {...inputProps}\n                    />\n                    <LoadableSearchActions\n                        isLoading={isLoading}\n                        loadingIndicatorProps={{\n                            className: 'search-form-loading-indicator',\n                        }}\n                    />\n                    {hiddenInputs}\n                </form>\n            </div>\n        );\n    }\n}\n\nexport default injectIntl(SearchForm);\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\nimport classNames from 'classnames';\n\nimport Tooltip from '../tooltip';\nimport './SelectButton.scss';\n\ntype Props = {\n    children?: React.Node,\n    className: string,\n    error?: React.Node,\n    isDisabled: boolean,\n};\n\nconst SelectButton = ({ children, className = '', error, isDisabled = false, ...rest }: Props) => (\n    <Tooltip isShown={!!error} position=\"middle-right\" text={error} theme=\"error\">\n        <button\n            className={classNames(className, 'select-button', {\n                'is-invalid': !!error,\n            })}\n            disabled={isDisabled}\n            type=\"button\"\n            {...rest}\n        >\n            {children}\n        </button>\n    </Tooltip>\n);\n\nexport default SelectButton;\n","// extracted by mini-css-extract-plugin","// @flow\nexport { default } from './SelectButton';\n","// @flow\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport uniqueId from 'lodash/uniqueId';\n\nimport { scrollIntoView } from '../../utils/dom';\nimport IconCheck from '../../icons/general/IconCheck';\nimport SelectButton from '../select-button';\nimport DatalistItem from '../datalist-item';\nimport type { SelectOptionValueProp, SelectOptionProp } from './props';\nimport { OVERLAY_WRAPPER_CLASS } from '../../constants';\n\nimport './SelectField.scss';\n\nfunction stopDefaultEvent(event) {\n    event.preventDefault();\n    event.stopPropagation();\n}\n\nfunction toggleOption(options, value) {\n    const index = options.indexOf(value);\n\n    if (index === -1) {\n        options.push(value);\n    } else {\n        options.splice(index, 1);\n    }\n}\n\ntype Props = {\n    /** Props to add to the button element */\n    buttonProps?: Object,\n    /** CSS class for the select container */\n    className?: string,\n    /** The fallback option value when other options are all unselected. Default option cannot be selected at the same time as other options. `selectedValues` must not be empty when this option is used. */\n    defaultValue?: SelectOptionValueProp,\n    /** An optional error to show within a tooltip. */\n    error?: React.Node,\n    /** The select button is disabled if true */\n    isDisabled?: boolean,\n    /** The select field overlay (dropdown) will have a scrollbar and max-height if true * */\n    isScrollable?: boolean,\n    multiple: boolean,\n    /** Function will be called with an array of all selected options after user selects a new option */\n    onChange: Function,\n    /** Function will be called with the user selected option (even on deselect or when the option was previously selected) */\n    onOptionSelect?: Function,\n    /** Function that allows custom rendering of select field options. When not provided the component will only render the option's displayText by default */\n    optionRenderer?: (option: SelectOptionProp) => React.Node,\n    /** List of options (displayText, value) */\n    options: Array<SelectOptionProp>,\n    /** The select button text shown when no options are selected. */\n    placeholder?: string | React.Element<any>,\n    /** The currently selected option values (can be empty) */\n    selectedValues: Array<SelectOptionValueProp>,\n    /** Array of ordered indices indicating where to insert separators (ex. index 2 means insert a separator after option 2) */\n    separatorIndices: Array<number>,\n    /** The select button text (by default, component will use comma separated list of all selected option displayText) */\n    title?: string | React.Element<any>,\n};\n\ntype State = {\n    activeItemID: ?string,\n    activeItemIndex: number,\n    isOpen: boolean,\n    shouldScrollIntoView: boolean,\n};\n\nexport const OVERLAY_SCROLLABLE_CLASS = 'bdl-SelectField-overlay--scrollable';\n\nclass BaseSelectField extends React.Component<Props, State> {\n    static defaultProps = {\n        buttonProps: {},\n        isDisabled: false,\n        isScrollable: false,\n        multiple: false,\n        options: [],\n        selectedValues: [],\n        separatorIndices: [],\n    };\n\n    constructor(props: Props) {\n        super(props);\n\n        this.selectFieldID = uniqueId('selectfield');\n\n        this.state = {\n            activeItemID: null,\n            activeItemIndex: -1,\n            isOpen: false,\n            shouldScrollIntoView: false,\n        };\n    }\n\n    setActiveItem = (index: number, shouldScrollIntoView?: boolean = true) => {\n        this.setState({ activeItemIndex: index, shouldScrollIntoView });\n        if (index === -1) {\n            this.setActiveItemID(null);\n        }\n    };\n\n    setActiveItemID = (id: ?string) => {\n        const { shouldScrollIntoView } = this.state;\n        const itemEl = id ? document.getElementById(id) : null;\n\n        this.setState({ activeItemID: id, shouldScrollIntoView: false }, () => {\n            if (shouldScrollIntoView) {\n                scrollIntoView(itemEl, { block: 'nearest' });\n            }\n        });\n    };\n\n    selectFieldID: string;\n\n    handleChange = (selectedItems: Array<SelectOptionProp>) => {\n        const { onChange } = this.props;\n\n        if (onChange) {\n            onChange(selectedItems);\n        }\n    };\n\n    handleOptionSelect = (selectedItem: SelectOptionProp) => {\n        const { onOptionSelect } = this.props;\n\n        if (onOptionSelect) {\n            onOptionSelect(selectedItem);\n        }\n    };\n\n    handleButtonClick = () => {\n        if (this.state.isOpen) {\n            this.closeDropdown();\n        } else {\n            this.openDropdown();\n        }\n    };\n\n    handleButtonKeyDown = (event: SyntheticKeyboardEvent<>) => {\n        const { activeItemIndex } = this.state;\n\n        // If user is interacting with the select dropdown, don't close on space/enter (i.e. prevent click event)\n        if ((event.key === ' ' || event.key === 'Enter') && activeItemIndex !== -1) {\n            event.preventDefault();\n        }\n    };\n\n    handleBlur = () => {\n        const { isOpen } = this.state;\n        if (isOpen) {\n            this.closeDropdown();\n        }\n    };\n\n    handleKeyDown = (event: SyntheticKeyboardEvent<HTMLDivElement>) => {\n        const { options } = this.props;\n        const { activeItemIndex, isOpen } = this.state;\n        const itemCount = options.length;\n\n        switch (event.key) {\n            case 'ArrowDown':\n                stopDefaultEvent(event);\n                if (isOpen) {\n                    const nextIndex = activeItemIndex === itemCount - 1 ? -1 : activeItemIndex + 1;\n                    this.setActiveItem(nextIndex);\n                } else {\n                    this.openDropdown();\n                }\n                break;\n            case 'ArrowUp':\n                stopDefaultEvent(event);\n                if (isOpen) {\n                    const prevIndex = activeItemIndex === -1 ? itemCount - 1 : activeItemIndex - 1;\n                    this.setActiveItem(prevIndex);\n                } else {\n                    this.openDropdown();\n                }\n                break;\n            case 'Enter':\n            case ' ':\n                if (activeItemIndex !== -1 && isOpen) {\n                    stopDefaultEvent(event);\n                    this.selectOption(activeItemIndex);\n                    // Enter always closes dropdown (even for multiselect)\n                    if (event.key === 'Enter') {\n                        this.closeDropdown();\n                    }\n                }\n                break;\n            case 'Escape':\n                if (isOpen) {\n                    stopDefaultEvent(event);\n                    this.closeDropdown();\n                }\n                break;\n            // no default\n        }\n    };\n\n    openDropdown = () => {\n        if (!this.state.isOpen) {\n            this.setState({ isOpen: true });\n        }\n    };\n\n    closeDropdown = () => {\n        if (this.state.isOpen) {\n            this.setState({\n                activeItemID: null,\n                activeItemIndex: -1,\n                isOpen: false,\n            });\n        }\n    };\n\n    selectOption = (index: number) => {\n        const { multiple } = this.props;\n\n        if (multiple) {\n            this.selectMultiOption(index);\n        } else {\n            this.selectSingleOption(index);\n            this.closeDropdown(); // Close dropdown for single select fields\n        }\n    };\n\n    selectSingleOption(index: number) {\n        const { options, selectedValues } = this.props;\n        const item = options[index];\n        // If item not previously selected, fire change handler\n        if (!selectedValues.includes(item.value)) {\n            this.handleChange([item]);\n        }\n        this.handleOptionSelect(item);\n    }\n\n    selectMultiOption = (index: number) => {\n        const { defaultValue, options, selectedValues } = this.props;\n        const hasDefaultValue = defaultValue != null; // Checks if not undefined or null\n        const item = options[index];\n\n        // If we are already using the default option, just return without firing onChange\n        if (hasDefaultValue && defaultValue === item.value) {\n            this.selectSingleOption(index);\n            return;\n        }\n\n        // Copy the array so we can freely modify it\n        const newSelectedValues = selectedValues.slice(0);\n        toggleOption(newSelectedValues, item.value);\n\n        // Apply constraints if a defaultValue is specified\n        if (hasDefaultValue) {\n            const defaultOptionIndex = options.findIndex(option => option.value === defaultValue);\n\n            if (defaultOptionIndex !== -1) {\n                if (newSelectedValues.length === 0) {\n                    // If nothing is selected, we should select the default option\n                    this.selectSingleOption(defaultOptionIndex);\n                    return;\n                }\n                if (newSelectedValues.length > 1 && newSelectedValues.includes(defaultValue)) {\n                    // Remove the default option from the selected values when more than one thing is selected\n                    newSelectedValues.splice(defaultOptionIndex, 1);\n                }\n            }\n        }\n\n        // Fire onchange event with selected items\n        this.handleChange(options.filter(option => newSelectedValues.includes(option.value)));\n\n        this.handleOptionSelect(item);\n    };\n\n    renderButtonText = () => {\n        const { options, placeholder, selectedValues, title } = this.props;\n        const selectedItemCount = selectedValues.length;\n\n        // When there are no options selected, render placeholder\n        if (selectedItemCount === 0 && placeholder) {\n            return placeholder;\n        }\n\n        // User-specified title when options are selected\n        if (title) {\n            return title;\n        }\n\n        // Auto-generate button title based on selected options\n        const selectedOptions = options.filter(option => selectedValues.includes(option.value));\n        return selectedOptions.map(option => option.displayText).join(', ');\n    };\n\n    renderSelectButton = () => {\n        const { activeItemID, isOpen } = this.state;\n        const { buttonProps: buttonElProps, isDisabled, className, error } = this.props;\n        const buttonText = this.renderButtonText();\n        const buttonProps = {\n            ...buttonElProps,\n            'aria-activedescendant': activeItemID,\n            'aria-autocomplete': 'list',\n            'aria-expanded': isOpen,\n            'aria-owns': this.selectFieldID,\n            className,\n            isDisabled,\n            onClick: this.handleButtonClick,\n            onKeyDown: this.handleButtonKeyDown,\n            // @NOTE: Technically, only text inputs should be combo-boxes but ARIA specs do not cover custom select dropdowns\n            role: 'combobox',\n            title: buttonText,\n        };\n\n        return (\n            <SelectButton {...buttonProps} error={error}>\n                {buttonText}\n            </SelectButton>\n        );\n    };\n\n    renderSelectOptions = () => {\n        const { optionRenderer, options, selectedValues, separatorIndices } = this.props;\n        const { activeItemIndex } = this.state;\n\n        const selectOptions = options.map<React.Element<typeof DatalistItem | 'li'>>((item, index) => {\n            const { displayText, value } = item;\n\n            const isSelected = selectedValues.includes(value);\n\n            const itemProps: Object = {\n                className: 'select-option',\n                key: index,\n                /* preventDefault on click to prevent wrapping label from re-triggering the select button */\n                onClick: event => {\n                    event.preventDefault();\n\n                    this.selectOption(index);\n                },\n                onMouseEnter: () => {\n                    this.setActiveItem(index, false);\n                },\n                setActiveItemID: this.setActiveItemID,\n            };\n\n            if (index === activeItemIndex) {\n                itemProps.isActive = true;\n            }\n\n            // The below actually does have a key, but eslint can't catch that\n            /* eslint-disable react/jsx-key */\n            return (\n                <DatalistItem {...itemProps}>\n                    <div className=\"select-option-check-icon\">\n                        {isSelected ? <IconCheck height={16} width={16} /> : null}\n                    </div>\n                    {optionRenderer ? optionRenderer(item) : displayText}\n                </DatalistItem>\n            );\n            /* eslint-enable react/jsx-key */\n        });\n\n        separatorIndices.forEach((separatorIndex, index) => {\n            selectOptions.splice(separatorIndex + index, 0, <li key={`separator${separatorIndex}`} role=\"separator\" />);\n        });\n\n        return selectOptions;\n    };\n\n    render() {\n        const { className, multiple, isScrollable } = this.props;\n        const { isOpen } = this.state;\n\n        // @TODO: Need invariants on specific conditions.\n        // 1) # of options should be non-zero\n        // 2) selectedValues, if defined, should all exist in options\n        // 3) defaultValue, if defined, should exist in options\n        // 4) defaultValue, if defined, should mean selectedValues is never empty\n        // 5) defaultValue, if defined, cannot be selected in addition to other options (must be exclusive)\n\n        const listboxProps = {};\n        if (multiple) {\n            listboxProps['aria-multiselectable'] = true;\n        }\n\n        return (\n            // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n            <div\n                className={classNames(className, 'select-container')}\n                onBlur={this.handleBlur}\n                onKeyDown={this.handleKeyDown}\n            >\n                <div className=\"select-field\">\n                    {this.renderSelectButton()}\n                    <div\n                        className={classNames(OVERLAY_WRAPPER_CLASS, {\n                            'is-visible': isOpen,\n                        })}\n                    >\n                        <ul\n                            className={classNames('overlay', {\n                                [OVERLAY_SCROLLABLE_CLASS]: isScrollable,\n                            })}\n                            id={this.selectFieldID}\n                            role=\"listbox\"\n                            // preventDefault on mousedown so blur doesn't happen before click\n                            onMouseDown={event => event.preventDefault()}\n                            {...listboxProps}\n                        >\n                            {this.renderSelectOptions()}\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default BaseSelectField;\n","// @flow\nimport React from 'react';\n\nimport BaseSelectField from './BaseSelectField';\n\ntype Props = {\n    /** Function will be called with an array of all selected options after user selects a new option */\n    onChange: Function,\n};\n\nconst MultiSelectField = ({ ...rest }: Props) => <BaseSelectField {...rest} multiple />;\n\nexport default MultiSelectField;\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\nimport omit from 'lodash/omit';\n\nimport BaseSelectField from './BaseSelectField';\nimport type { SelectOptionValueProp, SelectOptionProp } from './props';\n\ntype Props = {\n    /** The type of the field */\n    fieldType?: string,\n    /** The select field is disabled if true */\n    isDisabled?: boolean,\n    /** The select field overlay (dropdown) will have a scrollbar and max-height if true * */\n    isScrollable?: boolean,\n    /** The currently selected option value */\n    onChange: Function,\n    /** The placeholder text for the field  */\n    placeholder?: string | React.Node,\n    /** Function will be called with the selected option after user selects a new option */\n    selectedValue?: SelectOptionValueProp,\n};\n\nclass SingleSelectField extends React.Component<Props> {\n    handleChange = (selectedOptions: Array<SelectOptionProp>) => {\n        const { onChange, fieldType } = this.props;\n\n        // There should only ever be 1 selected item\n        if (onChange && selectedOptions.length === 1) {\n            onChange(selectedOptions[0], fieldType);\n        }\n    };\n\n    render() {\n        const { isDisabled, selectedValue, placeholder, ...rest } = this.props;\n\n        // @TODO: Invariant testing\n        // 1) selectedValue is required to be contained in the options\n        // 2) # of options should be non-zero\n\n        // Make sure to omit passed props that could be interpreted incorrectly by the base component\n        const selectFieldProps = omit(rest, ['defaultValue', 'multiple', 'onChange']);\n\n        // If selectedValue is passed in, map it to the multi selected equivalent\n        const isFieldSelected = selectedValue !== null;\n        selectFieldProps.selectedValues = !isFieldSelected ? [] : [selectedValue];\n\n        return (\n            <BaseSelectField\n                className={!isFieldSelected && placeholder ? 'placeholder' : ''}\n                isDisabled={isDisabled}\n                onChange={this.handleChange}\n                placeholder={placeholder}\n                {...selectFieldProps}\n            />\n        );\n    }\n}\n\nexport default SingleSelectField;\n","// @flow\n\nimport * as React from 'react';\nimport getProp from 'lodash/get';\nimport type { FieldProps } from 'formik';\n\nimport TextInputPrimitive from './TextInput';\nimport type { TextInputProps } from './TextInput';\n\ntype Props = TextInputProps & FieldProps & { innerRef?: (instance: any) => void };\n\nconst TextInputField = ({ field, form, innerRef, isRequired, ...rest }: Props) => {\n    const { name } = field;\n    const { errors, touched } = form;\n    const isTouched = getProp(touched, name);\n    const error = isTouched ? getProp(errors, name) : null;\n    return <TextInputPrimitive {...field} {...rest} inputRef={innerRef} error={error} hideOptionalLabel={isRequired} />;\n};\n\nexport default TextInputField;\n","// @flow\nexport { default } from './TextInput';\nexport { default as TextInputField } from './TextInputField';\n","// @flow\nimport * as React from 'react';\nimport classNames from 'classnames';\n\nimport './Toggle.scss';\n\ntype Props = {\n    className?: string,\n    /** Description of the input */\n    description?: React.Node,\n    isDisabled?: boolean, // @TODO: eventually call this `disabled`\n    /** Toggle state */\n    isOn?: boolean, // @TODO: eventually call this `checked`\n    /** If set to true, the toggle will be aligned to the right */\n    isToggleRightAligned?: boolean,\n    /** Label displayed for the input */\n    label: React.Node,\n    /** Name of the input */\n    name?: string,\n    /** blur callback function called with event as the argument */\n    onBlur?: (e: SyntheticInputEvent<HTMLInputElement>) => any,\n    /** change callback function called with event as the argument */\n    onChange?: (e: SyntheticInputEvent<HTMLInputElement>) => any,\n    /** optional value for the toggles checkbox */\n    value?: any,\n};\n\nconst Toggle = ({\n    className = '',\n    description,\n    isDisabled,\n    isOn,\n    isToggleRightAligned = false,\n    label,\n    name,\n    onBlur,\n    onChange,\n    ...rest\n}: Props) => {\n    const classes = classNames('toggle-container', className, {\n        'is-toggle-right-aligned': isToggleRightAligned,\n    });\n    let toggleElements = [\n        <div key=\"toggle-simple-switch\" className=\"toggle-simple-switch\" />,\n        <div key=\"toggle-simple-label\" className=\"toggle-simple-label\">\n            {label}\n        </div>,\n    ];\n\n    if (isToggleRightAligned) {\n        toggleElements = toggleElements.reverse();\n    }\n\n    return (\n        <div className={classes}>\n            {/* eslint-disable-next-line jsx-a11y/label-has-for */}\n            <label className=\"toggle-simple\">\n                <input\n                    checked={isOn}\n                    className=\"toggle-simple-input\"\n                    disabled={isDisabled}\n                    name={name}\n                    onBlur={onBlur}\n                    onChange={onChange}\n                    type=\"checkbox\"\n                    {...rest}\n                />\n                {toggleElements}\n            </label>\n            {description ? <div className=\"toggle-simple-description\">{description}</div> : null}\n        </div>\n    );\n};\n\nexport type ToggleProps = Props;\nexport default Toggle;\n","// extracted by mini-css-extract-plugin","// @flow\n\nimport * as React from 'react';\nimport type { FieldProps } from 'formik';\n\nimport TogglePrimitive from './Toggle';\nimport type { ToggleProps } from './Toggle';\n\ntype Props = ToggleProps & FieldProps;\n\nconst ToggleField = ({ field, form, ...rest }: Props) => {\n    const { value } = field;\n    return <TogglePrimitive {...field} {...rest} isOn={!!value} />;\n};\n\nexport default ToggleField;\n","// @flow\nexport { default } from './Toggle';\nexport { default as ToggleField } from './ToggleField';\n","/**\n * @flow\n * @file Metadata sidebar component\n * @author Box\n */\n\nimport * as React from 'react';\nimport flow from 'lodash/flow';\nimport getProp from 'lodash/get';\nimport noop from 'lodash/noop';\nimport { FormattedMessage } from 'react-intl';\nimport API from '../../api';\nimport EmptyContent from '../../features/metadata-instance-editor/EmptyContent';\nimport InlineError from '../../components/inline-error/InlineError';\nimport Instances from '../../features/metadata-instance-editor/Instances';\nimport LoadingIndicator from '../../components/loading-indicator/LoadingIndicator';\nimport LoadingIndicatorWrapper from '../../components/loading-indicator/LoadingIndicatorWrapper';\nimport messages from '../common/messages';\nimport SidebarContent from './SidebarContent';\nimport TemplateDropdown from '../../features/metadata-instance-editor/TemplateDropdown';\nimport { normalizeTemplates } from '../../features/metadata-instance-editor/metadataUtil';\nimport { EVENT_JS_READY } from '../common/logger/constants';\nimport { isUserCorrectableError } from '../../utils/error';\nimport { mark } from '../../utils/performance';\nimport { withAPIContext } from '../common/api-context';\nimport { withErrorBoundary } from '../common/error-boundary';\nimport { withLogger } from '../common/logger';\nimport {\n    FIELD_IS_EXTERNALLY_OWNED,\n    FIELD_PERMISSIONS,\n    FIELD_PERMISSIONS_CAN_UPLOAD,\n    IS_ERROR_DISPLAYED,\n    ORIGIN_METADATA_SIDEBAR,\n    SIDEBAR_VIEW_METADATA,\n} from '../../constants';\nimport './MetadataSidebar.scss';\n\ntype ExternalProps = {\n    isFeatureEnabled: boolean,\n    selectedTemplateKey?: string,\n    templateFilters?: Array<string> | string,\n};\n\ntype PropsWithoutContext = {\n    elementId: string,\n    fileId: string,\n} & ExternalProps;\n\ntype Props = {\n    api: API,\n} & PropsWithoutContext &\n    ErrorContextProps &\n    WithLoggerProps;\n\ntype State = {\n    editors?: Array<MetadataEditor>,\n    error?: MessageDescriptor,\n    file?: BoxItem,\n    isLoading: boolean,\n    templates?: Array<MetadataTemplate>,\n};\n\nconst MARK_NAME_JS_READY = `${ORIGIN_METADATA_SIDEBAR}_${EVENT_JS_READY}`;\n\nmark(MARK_NAME_JS_READY);\n\nclass MetadataSidebar extends React.PureComponent<Props, State> {\n    state = { isLoading: false };\n\n    static defaultProps = {\n        isFeatureEnabled: true,\n    };\n\n    constructor(props: Props) {\n        super(props);\n        const { logger } = this.props;\n        logger.onReadyMetric({\n            endMarkName: MARK_NAME_JS_READY,\n        });\n    }\n\n    componentDidMount() {\n        this.fetchFile();\n    }\n\n    /**\n     * Common error callback\n     *\n     * @param {Error} error - API error\n     * @param {string} code - error code\n     * @param {Object} [newState] - optional state to set\n     * @return {void}\n     */\n    onApiError = (error: ElementsXhrError, code: string, newState: Object = {}) => {\n        const { onError }: Props = this.props;\n        const { status } = error;\n        const isValidError = isUserCorrectableError(status);\n        this.setState({\n            error: messages.sidebarMetadataEditingErrorContent,\n            isLoading: false,\n            ...newState,\n        });\n        onError(error, code, {\n            error,\n            [IS_ERROR_DISPLAYED]: isValidError,\n        });\n    };\n\n    /**\n     * Checks upload permission\n     *\n     * @return {boolean} - true if metadata can be edited\n     */\n    canEdit(): boolean {\n        const { file }: State = this.state;\n        return getProp(file, FIELD_PERMISSIONS_CAN_UPLOAD, false);\n    }\n\n    /**\n     * Finds the editor we are editing\n     *\n     * @param {number} id - instance id\n     * @return {Object} editor instance\n     */\n    getEditor(id: string): ?MetadataEditor {\n        const { editors = [] }: State = this.state;\n        return editors.find(({ instance }) => instance.id === id);\n    }\n\n    /**\n     * Instance remove success handler\n     *\n     * @param {Object} editor - the editor to remove\n     * @return {void}\n     */\n    onRemoveSuccessHandler(editor: MetadataEditor): void {\n        const { editors = [] }: State = this.state;\n        const clone = editors.slice(0);\n        clone.splice(editors.indexOf(editor), 1);\n        this.setState({ editors: clone });\n    }\n\n    /**\n     * Instance remove handler\n     *\n     * @param {string} id - instance id\n     * @return {void}\n     */\n    onRemove = (id: string): void => {\n        const { api }: Props = this.props;\n        const { file }: State = this.state;\n        const editor = this.getEditor(id);\n\n        if (!editor || !file) {\n            return;\n        }\n\n        api.getMetadataAPI(false).deleteMetadata(\n            file,\n            editor.template,\n            () => this.onRemoveSuccessHandler(editor),\n            this.onApiError,\n        );\n    };\n\n    /**\n     * Instance add success handler\n     *\n     * @param {Object} editor - instance editor\n     * @return {void}\n     */\n    onAddSuccessHandler = (editor: MetadataEditor): void => {\n        const { editors = [] }: State = this.state;\n        const clone = editors.slice(0);\n        clone.push(editor);\n        this.setState({ editors: clone, isLoading: false });\n    };\n\n    /**\n     * Instance add handler\n     *\n     * @param {Object} template - instance template\n     * @return {void}\n     */\n    onAdd = (template: MetadataTemplate) => {\n        const { api }: Props = this.props;\n        const { file }: State = this.state;\n\n        if (!file) {\n            return;\n        }\n\n        this.setState({ isLoading: true });\n        api.getMetadataAPI(false).createMetadata(file, template, this.onAddSuccessHandler, this.onApiError);\n    };\n\n    /**\n     * Instance save success handler\n     *\n     * @param {Object} oldEditor - prior editor\n     * @param {Object} newEditor - updated editor\n     * @return {void}\n     */\n    replaceEditor(oldEditor: MetadataEditor, newEditor: MetadataEditor): void {\n        const { editors = [] }: State = this.state;\n        const clone = editors.slice(0);\n        clone.splice(editors.indexOf(oldEditor), 1, newEditor);\n        this.setState({ editors: clone });\n    }\n\n    /**\n     * Instance save error handler\n     *\n     * @param {Object} oldEditor - prior editor\n     * @param {Object} error - api error\n     * @param {string} code - error code\n     * @return {void}\n     */\n    onSaveErrorHandler(oldEditor: MetadataEditor, error: ElementsXhrError, code: string): void {\n        const clone: MetadataEditor = { ...oldEditor, hasError: true }; // shallow clone suffices for hasError setting\n        this.replaceEditor(oldEditor, clone);\n        this.onApiError(error, code);\n    }\n\n    /**\n     * Instance save handler\n     *\n     * @param {string} id - instance id\n     * @param {Array} ops - json patch ops\n     * @return {void}\n     */\n    onSave = (id: string, ops: JSONPatchOperations): void => {\n        const { api }: Props = this.props;\n        const { file }: State = this.state;\n        const oldEditor = this.getEditor(id);\n\n        if (!oldEditor || !file) {\n            return;\n        }\n\n        api.getMetadataAPI(false).updateMetadata(\n            file,\n            oldEditor.template,\n            ops,\n            (newEditor: MetadataEditor) => {\n                this.replaceEditor(oldEditor, newEditor);\n            },\n            (error: ElementsXhrError, code: string) => {\n                this.onSaveErrorHandler(oldEditor, error, code);\n            },\n        );\n    };\n\n    /**\n     * Instance dirty handler\n     *\n     * @param {string} id - instance id\n     * @param {boolean} isDirty - instance dirty state\n     * @return {void}\n     */\n    onModification = (id: string, isDirty: boolean) => {\n        const oldEditor = this.getEditor(id);\n        if (!oldEditor) {\n            return;\n        }\n        const newEditor = { ...oldEditor, isDirty }; // shallow clone suffices for isDirty setting\n        this.replaceEditor(oldEditor, newEditor);\n    };\n\n    /**\n     * Handles a failed metadata fetch\n     *\n     * @private\n     * @param {Error} e - API error\n     * @param {string} code - error code\n     * @return {void}\n     */\n    fetchMetadataErrorCallback = (e: ElementsXhrError, code: string) => {\n        this.onApiError(e, code, {\n            editors: undefined,\n            error: messages.sidebarMetadataFetchingErrorContent,\n            templates: undefined,\n        });\n    };\n\n    /**\n     * Handles a successful metadata fetch\n     *\n     * @param {Object} metadata - instances and templates\n     * @return {void}\n     */\n    fetchMetadataSuccessCallback = ({\n        editors,\n        templates,\n    }: {\n        editors: Array<MetadataEditor>,\n        templates: Array<MetadataTemplate>,\n    }) => {\n        const { selectedTemplateKey, templateFilters } = this.props;\n        this.setState({\n            editors: editors.slice(0), // cloned for potential editing\n            error: undefined,\n            isLoading: false,\n            templates: normalizeTemplates(templates, selectedTemplateKey, templateFilters),\n        });\n    };\n\n    /**\n     * Fetches the metadata editors\n     *\n     * @return {void}\n     */\n    fetchMetadata(): void {\n        const { api, isFeatureEnabled }: Props = this.props;\n        const { file }: State = this.state;\n\n        if (!file) {\n            return;\n        }\n\n        api.getMetadataAPI(false).getMetadata(\n            file,\n            this.fetchMetadataSuccessCallback,\n            this.fetchMetadataErrorCallback,\n            isFeatureEnabled,\n            { refreshCache: true },\n        );\n    }\n\n    /**\n     * Handles a failed file fetch\n     *\n     * @private\n     * @param {Error} e - API error\n     * @param {string} code - error code\n     * @return {void}\n     */\n    fetchFileErrorCallback = (e: ElementsXhrError, code: string) => {\n        this.onApiError(e, code, { error: messages.sidebarFileFetchingErrorContent, file: undefined });\n    };\n\n    /**\n     * Handles a successful file fetch.\n     * Can be called multiple times when refreshing caches.\n     * On file load we should fetch metadata, but we shouldn't need to fetch\n     * if the file permissions haven't changed from a prior file fetch.\n     * Metadata editors mostly care about upload permission.\n     *\n     * @param {Object} file - the Box file\n     * @return {void}\n     */\n    fetchFileSuccessCallback = (file: BoxItem) => {\n        const { file: currentFile }: State = this.state;\n        const currentCanUpload = getProp(currentFile, FIELD_PERMISSIONS_CAN_UPLOAD, false);\n        const newCanUpload = getProp(file, FIELD_PERMISSIONS_CAN_UPLOAD, false);\n        const shouldFetchMetadata = !currentFile || currentCanUpload !== newCanUpload;\n        const callback = shouldFetchMetadata ? this.fetchMetadata : noop;\n        this.setState({ file }, callback);\n    };\n\n    /**\n     * Fetches a file with the fields needed for metadata sidebar\n     *\n     * @return {void}\n     */\n    fetchFile(): void {\n        const { api, fileId }: Props = this.props;\n        api.getFileAPI().getFile(fileId, this.fetchFileSuccessCallback, this.fetchFileErrorCallback, {\n            fields: [FIELD_IS_EXTERNALLY_OWNED, FIELD_PERMISSIONS],\n            refreshCache: true, // see implications in file success callback\n        });\n    }\n\n    refresh(): void {\n        this.fetchMetadata();\n    }\n\n    render() {\n        const { editors, file, error, isLoading, templates }: State = this.state;\n        const { elementId, selectedTemplateKey }: Props = this.props;\n        const showEditor = !!file && !!templates && !!editors;\n        const showLoadingIndicator = !error && !showEditor;\n        const canEdit = this.canEdit();\n        const showTemplateDropdown = showEditor && canEdit;\n        const showEmptyContent = showEditor && ((editors: any): Array<MetadataEditor>).length === 0;\n\n        return (\n            <SidebarContent\n                actions={\n                    showTemplateDropdown ? (\n                        <TemplateDropdown\n                            hasTemplates={templates && templates.length !== 0}\n                            isDropdownBusy={false}\n                            onAdd={this.onAdd}\n                            // $FlowFixMe checked via showTemplateDropdown & showEditor\n                            templates={templates}\n                            // $FlowFixMe checked via showTemplateDropdown & showEditor\n                            usedTemplates={editors.map(editor => editor.template)}\n                        />\n                    ) : null\n                }\n                className=\"bcs-metadata\"\n                elementId={elementId}\n                sidebarView={SIDEBAR_VIEW_METADATA}\n                title={<FormattedMessage {...messages.sidebarMetadataTitle} />}\n            >\n                {error && (\n                    <InlineError title={<FormattedMessage {...messages.error} />}>\n                        <FormattedMessage {...error} />\n                    </InlineError>\n                )}\n                {showLoadingIndicator && <LoadingIndicator />}\n                {showEditor && (\n                    <LoadingIndicatorWrapper className=\"metadata-instance-editor\" isLoading={isLoading}>\n                        {showEmptyContent ? (\n                            <EmptyContent canAdd={canEdit} />\n                        ) : (\n                            <Instances\n                                editors={editors}\n                                onModification={this.onModification}\n                                onRemove={this.onRemove}\n                                onSave={this.onSave}\n                                selectedTemplateKey={selectedTemplateKey}\n                            />\n                        )}\n                    </LoadingIndicatorWrapper>\n                )}\n            </SidebarContent>\n        );\n    }\n}\n\nexport type MetadataSidebarProps = ExternalProps;\nexport { MetadataSidebar as MetadataSidebarComponent };\nexport default flow([withLogger(ORIGIN_METADATA_SIDEBAR), withErrorBoundary(ORIGIN_METADATA_SIDEBAR), withAPIContext])(\n    MetadataSidebar,\n);\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport Toggle from '../../components/toggle';\nimport { RadioButton, RadioGroup } from '../../components/radio';\nimport Link from '../../components/link/Link';\nimport IconAlertDefault from '../../icons/general/IconAlertDefault';\nimport messages from './messages';\nimport './CascadePolicy.scss';\n\nconst COMMUNITY_LINK = 'https://community.box.com/t5/Organizing-and-Tracking-Content/Metadata/ta-p/30765';\n\ntype Props = {\n    canEdit: boolean,\n    isCascadingEnabled: boolean,\n    isCascadingOverwritten: boolean,\n    isCustomMetadata: boolean,\n    onCascadeModeChange: (value: boolean) => void,\n    onCascadeToggle: (value: boolean) => void,\n    shouldShowCascadeOptions: boolean,\n};\n\nconst CascadePolicy = ({\n    canEdit,\n    isCascadingEnabled,\n    isCascadingOverwritten,\n    isCustomMetadata,\n    onCascadeToggle,\n    onCascadeModeChange,\n    shouldShowCascadeOptions,\n}: Props) => {\n    const readOnlyState = isCascadingEnabled ? (\n        <div className=\"metadata-cascade-notice\">\n            <FormattedMessage {...messages.metadataCascadePolicyEnabledInfo} />\n        </div>\n    ) : null;\n\n    return canEdit ? (\n        <>\n            <div className=\"metadata-cascade-editor\">\n                <div className=\"metadata-cascade-enable\">\n                    <div>\n                        <FormattedMessage tagName=\"strong\" {...messages.enableCascadePolicy} />\n                        {!isCustomMetadata && (\n                            <Toggle\n                                className={`metadata-cascade-toggle ${\n                                    isCascadingEnabled ? 'cascade-on' : 'cascade-off'\n                                }`}\n                                isOn={isCascadingEnabled}\n                                label=\"\"\n                                onChange={e => onCascadeToggle(e.target.checked)}\n                            />\n                        )}\n                    </div>\n                    {!isCustomMetadata ? (\n                        <div className=\"cascade-policy-text\">\n                            <FormattedMessage {...messages.applyCascadePolicyText} />\n                            &nbsp;\n                            <Link className=\"cascade-policy-learnmore-link\" href={COMMUNITY_LINK} target=\"_blank\">\n                                <FormattedMessage {...messages.cascadePolicyLearnMore} />\n                            </Link>\n                        </div>\n                    ) : (\n                        <div>\n                            <FormattedMessage {...messages.cannotApplyCascadePolicyText} />\n                        </div>\n                    )}\n                </div>\n            </div>\n            {shouldShowCascadeOptions && (\n                <div className=\"metadata-cascade-editor\">\n                    <div className=\"metadata-cascading-mode\">\n                        <FormattedMessage {...messages.cascadePolicyModeQuestion} />\n\n                        <div className=\"metadata-operation-not-immediate\">\n                            <IconAlertDefault />\n                            <span>\n                                <FormattedMessage {...messages.operationNotImmediate} />\n                            </span>\n                        </div>\n                        <RadioGroup\n                            className=\"metadata-cascading-options\"\n                            onChange={e => onCascadeModeChange(e.target.value === 'overwrite')}\n                            value={isCascadingOverwritten ? 'overwrite' : 'skip'}\n                        >\n                            <RadioButton\n                                label={<FormattedMessage {...messages.cascadePolicySkipMode} />}\n                                value=\"skip\"\n                            />\n                            <RadioButton\n                                label={<FormattedMessage {...messages.cascadePolicyOverwriteMode} />}\n                                value=\"overwrite\"\n                            />\n                        </RadioGroup>\n                    </div>\n                </div>\n            )}\n        </>\n    ) : (\n        readOnlyState\n    );\n};\n\nexport default CascadePolicy;\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\nimport isEqual from 'lodash/isEqual';\n\nimport CustomNewField from './CustomInstanceNewField';\nimport CustomField from './fields/CustomField';\nimport EmptyContent from './EmptyContent';\nimport { FIELD_TYPE_STRING } from './constants';\n\ntype Props = {\n    canEdit: boolean,\n    data: MetadataFields,\n    onFieldChange?: (key: string, value: MetadataFieldValue, type: string) => void,\n    onFieldRemove?: (key: string) => void,\n};\n\ntype State = {\n    isAddFieldVisible: boolean,\n    properties: MetadataFields,\n};\n\nclass CustomInstance extends React.PureComponent<Props, State> {\n    static defaultProps = {\n        canEdit: true,\n        data: {},\n    };\n\n    static getDerivedStateFromProps({ data }: Props, { properties }: State): any {\n        if (!isEqual(data, properties)) {\n            return {\n                properties: { ...data },\n            };\n        }\n\n        return null;\n    }\n\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            isAddFieldVisible: false,\n            properties: { ...props.data },\n        };\n    }\n\n    /**\n     * Adds/updates a new metadata key value pair\n     *\n     * @param {string} key - metadata key\n     * @param {string} value - metadata value\n     * @return {void}\n     */\n    onFieldChange = (key: string, value: MetadataFieldValue) => {\n        const { canEdit, onFieldChange }: Props = this.props;\n        if (canEdit && onFieldChange) {\n            onFieldChange(key, value, FIELD_TYPE_STRING);\n        }\n    };\n\n    /**\n     * Adds/updates a new metadata key value pair\n     *\n     * @param {string} key - metadata key\n     * @param {string} value - metadata value\n     * @return {void}\n     */\n    onFieldRemove = (key: string) => {\n        const { canEdit, onFieldRemove }: Props = this.props;\n        if (canEdit && onFieldRemove) {\n            onFieldRemove(key);\n        }\n    };\n\n    /**\n     * Shows the add new field field\n     *\n     * @return {void}\n     */\n    onAddFieldToggle = () => {\n        this.setState(prevState => ({\n            isAddFieldVisible: !prevState.isAddFieldVisible,\n        }));\n    };\n\n    render() {\n        const { canEdit }: Props = this.props;\n        const { isAddFieldVisible, properties }: State = this.state;\n        const fields = Object.keys(properties);\n        const canAddFields = canEdit && (isAddFieldVisible || fields.length === 0);\n\n        return (\n            <>\n                {fields.map((key, index) => (\n                    <CustomField\n                        key={key}\n                        canEdit={canEdit}\n                        dataKey={key}\n                        dataValue={properties[key]}\n                        isLast={!isAddFieldVisible && index === fields.length - 1}\n                        onAdd={this.onAddFieldToggle}\n                        onChange={this.onFieldChange}\n                        onRemove={this.onFieldRemove}\n                    />\n                ))}\n                {!canAddFields && fields.length === 0 && <EmptyContent />}\n                {canAddFields && (\n                    <CustomNewField\n                        isCancellable={fields.length !== 0}\n                        onAdd={this.onFieldChange}\n                        onCancel={this.onAddFieldToggle}\n                        properties={this.props.data}\n                    />\n                )}\n            </>\n        );\n    }\n}\n\nexport default CustomInstance;\n","// @flow\nimport * as React from 'react';\nimport { FormattedMessage, injectIntl } from 'react-intl';\n\nimport Button from '../../components/button/Button';\nimport TextInput from '../../components/text-input/TextInput';\nimport Tooltip from '../../components/tooltip/Tooltip';\nimport commonMessages from '../../common/messages';\nimport IconInfo from '../../icons/general/IconInfo';\n\nimport messages from './messages';\nimport './CustomInstanceNewField.scss';\n\ntype Props = {\n    intl: any,\n    isCancellable: boolean,\n    onAdd: (key: string, value: MetadataFieldValue) => void,\n    onCancel: () => void,\n    properties: MetadataFields,\n};\n\ntype State = {\n    error: React.Node,\n    key: string,\n    value: string,\n};\n\nclass CustomInstanceNewField extends React.PureComponent<Props, State> {\n    state: State = {\n        key: '',\n        value: '',\n        error: '',\n    };\n\n    /**\n     * Common change handler\n     *\n     * @param {Event} event - keyboard event\n     * @param {string} attr - key or value\n     * @return {void}\n     */\n    onChange(event: SyntheticKeyboardEvent<HTMLInputElement>, attr: string) {\n        const currentTarget = (event.currentTarget: HTMLInputElement);\n        this.setState({\n            error: '',\n            [attr]: currentTarget.value,\n        });\n    }\n\n    /**\n     * Change handler for the key\n     *\n     * @param {Event} event - keyboard event\n     * @return {void}\n     */\n    onKeyChange = (event: SyntheticKeyboardEvent<HTMLInputElement>) => {\n        this.onChange(event, 'key');\n    };\n\n    /**\n     * Change handler for the value\n     *\n     * @param {Event} event - keyboard event\n     * @return {void}\n     */\n    onValueChange = (event: SyntheticKeyboardEvent<HTMLInputElement>) => {\n        this.onChange(event, 'value');\n    };\n\n    /**\n     * Persists the new metadata added or shows an error\n     *\n     * @return {void}\n     */\n    onAdd = () => {\n        const { key, value }: State = this.state;\n        const { onAdd, properties }: Props = this.props;\n        if (Object.prototype.hasOwnProperty.call(properties, key)) {\n            this.setState({\n                error: <FormattedMessage {...messages.customErrorDuplicateKey} />,\n            });\n        } else if (key.startsWith('$')) {\n            this.setState({\n                error: <FormattedMessage {...messages.customErrorInternalKey} />,\n            });\n        } else if (key) {\n            onAdd(key, value);\n        } else {\n            this.setState({\n                error: <FormattedMessage {...messages.customErrorRequired} />,\n            });\n        }\n    };\n\n    render() {\n        const { intl, isCancellable, onCancel }: Props = this.props;\n        const { key, value, error }: State = this.state;\n        return (\n            <div className=\"custom-new-field\">\n                <div className=\"custom-new-field-header\">\n                    <FormattedMessage tagName=\"h5\" {...messages.customNewField} />\n                    <Tooltip text={<FormattedMessage {...messages.customNewFieldMessage} />}>\n                        <div tabIndex=\"-1\">\n                            <IconInfo color=\"#777\" height={18} width={18} />\n                        </div>\n                    </Tooltip>\n                </div>\n                <TextInput\n                    error={error}\n                    isRequired\n                    label={<FormattedMessage {...messages.customKey} />}\n                    onChange={this.onKeyChange}\n                    placeholder={intl.formatMessage(messages.customKeyPlaceholder)}\n                    type=\"text\"\n                    value={key}\n                />\n                <TextInput\n                    hideOptionalLabel\n                    label={<FormattedMessage {...messages.customValue} />}\n                    onChange={this.onValueChange}\n                    placeholder={intl.formatMessage(messages.customValuePlaceholder)}\n                    type=\"text\"\n                    value={value}\n                />\n                <div className=\"custom-new-field-actions\">\n                    {isCancellable && (\n                        <Button data-resin-target=\"metadata-customfieldcancel\" onClick={onCancel} type=\"button\">\n                            <FormattedMessage {...commonMessages.cancel} />\n                        </Button>\n                    )}\n                    <Button data-resin-target=\"metadata-customfieldadd\" onClick={this.onAdd} type=\"button\">\n                        <FormattedMessage {...messages.customAdd} />\n                    </Button>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport { CustomInstanceNewField as CustomInstanceNewFieldBase };\nexport default injectIntl(CustomInstanceNewField);\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport IconAddMetadataEmptyState from '../../icons/general/IconAddMetadataEmptyState';\n\nimport messages from './messages';\nimport './EmptyContent.scss';\n\ntype Props = {\n    canAdd?: boolean,\n};\n\nconst EmptyContent = ({ canAdd }: Props) => (\n    <div className=\"metadata-instance-editor-no-instances\">\n        <IconAddMetadataEmptyState />\n        <p className=\"metadata-instance-editor-no-instances--call-out\">\n            <FormattedMessage {...messages.noMetadata} />\n        </p>\n        {canAdd && (\n            <p className=\"metadata-instance-editor-no-instances--how-add-template\">\n                <FormattedMessage {...messages.noMetadataAddTemplate} />\n            </p>\n        )}\n    </div>\n);\n\nexport default EmptyContent;\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport Button from '../../components/button/Button';\nimport PlainButton from '../../components/plain-button/PlainButton';\nimport PrimaryButton from '../../components/primary-button/PrimaryButton';\n\nimport messages from './messages';\nimport './Footer.scss';\n\ntype Props = {\n    onCancel: () => void,\n    onRemove: () => void,\n    showSave: boolean,\n};\n\nconst Footer = ({ onCancel, onRemove, showSave }: Props) => (\n    <div className=\"metadata-instance-editor-footer\">\n        <div className=\"metadata-instance-editor-footer-delete\">\n            <PlainButton data-resin-target=\"metadata-instanceremove\" onClick={onRemove} type=\"button\">\n                <FormattedMessage {...messages.metadataRemoveTemplate} />\n            </PlainButton>\n        </div>\n        <div className=\"metadata-instance-editor-footer-save-cancel\">\n            <Button data-resin-target=\"metadata-instancecancel\" onClick={onCancel} type=\"button\">\n                <FormattedMessage {...messages.metadataCancel} />\n            </Button>\n            {showSave && (\n                <PrimaryButton data-resin-target=\"metadata-instancesave\">\n                    <FormattedMessage {...messages.metadataSave} />\n                </PrimaryButton>\n            )}\n        </div>\n    </div>\n);\n\nexport default Footer;\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport classNames from 'classnames';\nimport isEqual from 'lodash/isEqual';\nimport cloneDeep from 'lodash/cloneDeep';\nimport noop from 'lodash/noop';\n\nimport Collapsible from '../../components/collapsible/Collapsible';\nimport Form from '../../components/form-elements/form/Form';\nimport LoadingIndicatorWrapper from '../../components/loading-indicator/LoadingIndicatorWrapper';\nimport PlainButton from '../../components/plain-button/PlainButton';\nimport Tooltip from '../../components/tooltip';\nimport IconMetadataColored from '../../icons/general/IconMetadataColored';\nimport IconAlertCircle from '../../icons/general/IconAlertCircle';\nimport IconEdit from '../../icons/general/IconEdit';\nimport { bdlWatermelonRed } from '../../styles/variables';\nimport { scrollIntoView } from '../../utils/dom';\n\nimport CascadePolicy from './CascadePolicy';\nimport TemplatedInstance from './TemplatedInstance';\nimport CustomInstance from './CustomInstance';\nimport MetadataInstanceConfirmDialog from './MetadataInstanceConfirmDialog';\nimport Footer from './Footer';\nimport messages from './messages';\nimport {\n    FIELD_TYPE_FLOAT,\n    FIELD_TYPE_INTEGER,\n    TEMPLATE_CUSTOM_PROPERTIES,\n    JSON_PATCH_OP_REMOVE,\n    JSON_PATCH_OP_ADD,\n    JSON_PATCH_OP_REPLACE,\n    JSON_PATCH_OP_TEST,\n} from './constants';\nimport { isValidValue } from './fields/validateField';\nimport { isHidden } from './metadataUtil';\nimport { RESIN_TAG_TARGET } from '../../common/variables';\nimport './Instance.scss';\n\ntype Props = {\n    canEdit: boolean,\n    cascadePolicy?: MetadataCascadePolicy, // eslint-disable-line\n    data: MetadataFields,\n    hasError: boolean,\n    id: string,\n    isCascadingPolicyApplicable?: boolean,\n    isDirty: boolean,\n    isOpen: boolean,\n    onModification?: (id: string, isDirty: boolean, type?: string) => void,\n    onRemove?: (id: string) => void,\n    onSave?: (\n        id: string,\n        data: JSONPatchOperations,\n        cascadingPolicy?: MetadataCascadingPolicyData,\n        rawData: Object,\n    ) => void,\n    template: MetadataTemplate,\n};\n\ntype State = {\n    data: Object,\n    errors: { [string]: React.Node },\n    isBusy: boolean,\n    isCascadingEnabled: boolean,\n    isCascadingOverwritten: boolean,\n    isEditing: boolean,\n    shouldConfirmRemove: boolean,\n    shouldShowCascadeOptions: boolean,\n};\n\nconst createFieldKeyToTypeMap = (fields?: Array<MetadataTemplateField> = []) =>\n    fields.reduce((prev, { key, type }) => {\n        prev[key] = type;\n        return prev;\n    }, {});\n\nconst getValue = (data: Object, key: string, type: string) => {\n    const value = data[key];\n\n    switch (type) {\n        case FIELD_TYPE_FLOAT:\n            return parseFloat(value);\n\n        case FIELD_TYPE_INTEGER:\n            return parseInt(value, 10);\n\n        default:\n            return value;\n    }\n};\n\nclass Instance extends React.PureComponent<Props, State> {\n    static defaultProps = {\n        data: {},\n        isDirty: false,\n    };\n\n    constructor(props: Props) {\n        super(props);\n        this.state = this.getState(props);\n        this.fieldKeyToTypeMap = createFieldKeyToTypeMap(props.template.fields);\n    }\n\n    componentDidUpdate({ hasError: prevHasError, isDirty: prevIsDirty }: Props, prevState: State): void {\n        const currentElement = this.collapsibleRef.current;\n        const { hasError, isDirty }: Props = this.props;\n        const { isEditing }: State = prevState;\n\n        if (currentElement && this.state.shouldConfirmRemove) {\n            scrollIntoView(currentElement, {\n                block: 'start',\n                behavior: 'smooth',\n            });\n        }\n\n        if (hasError && hasError !== prevHasError) {\n            // If hasError is true, which means an error occurred while\n            // doing a network operation and hence hide the busy indicator\n            // Saving also disables isEditing, so need to enable that back.\n            // isDirty remains as it was before.\n            this.setState({ isBusy: false, isEditing: true });\n        } else if (prevIsDirty && !isDirty) {\n            // If the form was dirty and now its not dirty\n            // we know a successful save may have happened.\n            // We don't modify isEditing here because we maintain the\n            // prior state for that. If we came here from a save\n            // success then save already disabled isEditing.\n            if (isEditing) {\n                // We are still editing so don't reset it\n                this.setState({ isBusy: false });\n            } else {\n                // For a successfull save we reset cascading overwrite radio\n                this.setState({ isBusy: false, isCascadingOverwritten: false });\n            }\n        }\n    }\n\n    /**\n     * Undo any changes made\n     *\n     * @return {void}\n     */\n    onCancel = (): void => {\n        const { id, onModification }: Props = this.props;\n        this.setState(this.getState(this.props));\n\n        // Callback to parent to tell that something is dirty\n        if (onModification) {\n            onModification(id, false);\n        }\n    };\n\n    /**\n     * Allows a user to confirm metadata instance removal\n     *\n     * @return {void}\n     */\n    onConfirmRemove = (): void => {\n        this.setState({ shouldConfirmRemove: true });\n    };\n\n    /**\n     * Cancel the remove instance attempt\n     *\n     * @return {void}\n     */\n    onConfirmCancel = (): void => {\n        this.setState({ shouldConfirmRemove: false });\n    };\n\n    /**\n     * Removes an instance\n     *\n     * @return {void}\n     */\n    onRemove = (): void => {\n        if (!this.isEditing()) {\n            return;\n        }\n\n        const { id, onRemove }: Props = this.props;\n        if (onRemove) {\n            onRemove(id);\n            this.setState({ isBusy: true });\n        }\n    };\n\n    /**\n     * Saves instance data\n     *\n     * @return {void}\n     */\n    onSave = (): void => {\n        const {\n            cascadePolicy,\n            data: originalData,\n            id,\n            isDirty,\n            isCascadingPolicyApplicable,\n            onSave,\n        }: Props = this.props;\n        const { data: currentData, errors, isCascadingEnabled, isCascadingOverwritten }: State = this.state;\n\n        if (!this.isEditing() || !isDirty || !onSave || Object.keys(errors).length) {\n            return;\n        }\n\n        this.setState({\n            isBusy: true,\n            isEditing: false,\n            shouldShowCascadeOptions: false,\n        });\n        onSave(\n            id,\n            this.createJSONPatch(currentData, originalData),\n            isCascadingPolicyApplicable\n                ? {\n                      canEdit: cascadePolicy ? cascadePolicy.canEdit : false,\n                      id: cascadePolicy ? cascadePolicy.id : undefined,\n                      isEnabled: isCascadingEnabled,\n                      overwrite: isCascadingOverwritten,\n                  }\n                : undefined,\n            cloneDeep(currentData),\n        );\n    };\n\n    /**\n     * Updates a key value in the instance data\n     *\n     * @param {string} key - key to update\n     * @param {FieldValue} value - value to update\n     * @param {string} type - type of field\n     * @return {void}\n     */\n    onFieldChange = (key: string, value: MetadataFieldValue, type: string): void => {\n        const { data, errors }: State = this.state;\n\n        // Don't do anything if data is the same or not in edit mode\n        if (!this.isEditing() || isEqual(data[key], value)) {\n            return;\n        }\n\n        const isValid = isValidValue(type, value);\n        const finalErrors = { ...errors };\n        const finalData = cloneDeep(data);\n        finalData[key] = value;\n\n        if (isValid) {\n            delete finalErrors[key];\n        } else {\n            finalErrors[key] = <FormattedMessage {...messages.invalidInput} />;\n        }\n\n        this.setState({ data: finalData, errors: finalErrors }, () => {\n            this.setDirty(type);\n        });\n    };\n\n    /**\n     * Removes a key from instance data\n     *\n     * @param {string} key - key to remove\n     * @return {void}\n     */\n    onFieldRemove = (key: string): void => {\n        if (!this.isEditing()) {\n            return;\n        }\n\n        const { data, errors }: State = this.state;\n        const finalData = cloneDeep(data);\n        const finalErrors = { ...errors };\n        delete finalData[key];\n        delete finalErrors[key];\n        this.setState({ data: finalData, errors: finalErrors }, this.setDirty);\n    };\n\n    /**\n     * Toggle cascading policy\n     *\n     * @param {boolean} value - true when turned on\n     * @return {void}\n     */\n    onCascadeToggle = (value: boolean) => {\n        const { isCascadingPolicyApplicable }: Props = this.props;\n        if (!isCascadingPolicyApplicable) {\n            return;\n        }\n\n        this.setState(\n            {\n                isCascadingEnabled: value,\n                shouldShowCascadeOptions: value,\n            },\n            this.setDirty,\n        );\n    };\n\n    /**\n     * Changes the cascade mode.\n     * isCascadingOverwritten is slways false to start off.\n     *\n     * @param {boolean} value - true when overwrite policy is chosen\n     * @return {void}\n     */\n    onCascadeModeChange = (value: boolean): void => {\n        const { isCascadingPolicyApplicable }: Props = this.props;\n        if (!isCascadingPolicyApplicable) {\n            return;\n        }\n\n        this.setState(\n            {\n                isCascadingOverwritten: value,\n            },\n            this.setDirty,\n        );\n    };\n\n    /**\n     * Returns the state from props\n     *\n     * @return {Object} - react state\n     */\n    getState(props: Props): State {\n        return {\n            data: cloneDeep(props.data),\n            errors: {},\n            isBusy: false,\n            isCascadingEnabled: this.isCascadingEnabled(props),\n            isCascadingOverwritten: false,\n            isEditing: false,\n            shouldConfirmRemove: false,\n            shouldShowCascadeOptions: false,\n        };\n    }\n\n    /**\n     * Returns the card title with possible error mark\n     *\n     * @return {Object} - react title element\n     */\n    getTitle(): React.Node {\n        const { cascadePolicy = {}, hasError, isCascadingPolicyApplicable, template }: Props = this.props;\n        const isProperties = template.templateKey === TEMPLATE_CUSTOM_PROPERTIES;\n\n        const type = isCascadingPolicyApplicable && cascadePolicy.id ? 'cascade' : 'default';\n\n        return (\n            <span className=\"metadata-instance-editor-instance-title\">\n                <IconMetadataColored type={type} />\n                <span\n                    className={classNames('metadata-instance-editor-instance-title-text', {\n                        'metadata-instance-editor-instance-has-error': hasError,\n                    })}\n                >\n                    {isProperties ? <FormattedMessage {...messages.customTitle} /> : template.displayName}\n                </span>\n                {hasError && <IconAlertCircle color={bdlWatermelonRed} />}\n            </span>\n        );\n    }\n\n    /**\n     * Render the correct delete message to show based on custom metadata and file/folder metadata\n     */\n    renderDeleteMessage = (isFile: boolean, template: Object) => {\n        let message;\n        const isProperties = template.templateKey === TEMPLATE_CUSTOM_PROPERTIES;\n\n        if (isProperties) {\n            message = isFile ? 'fileMetadataRemoveCustomTemplateConfirm' : 'folderMetadataRemoveCustomTemplateConfirm';\n        } else {\n            message = isFile ? 'fileMetadataRemoveTemplateConfirm' : 'folderMetadataRemoveTemplateConfirm';\n        }\n\n        return (\n            <FormattedMessage\n                {...messages[message]}\n                values={{\n                    metadataName: template.displayName,\n                }}\n            />\n        );\n    };\n\n    /**\n     * Get the delete confirmation message base on the template key\n     */\n    getConfirmationMessage(): React.Node {\n        const { template, isCascadingPolicyApplicable }: Props = this.props;\n        const isFile = !isCascadingPolicyApplicable;\n        return this.renderDeleteMessage(isFile, template);\n    }\n\n    /**\n     * Evaluates if the metadata was changed or cascading policy\n     * altered or enabled.\n     *\n     * @return {void}\n     */\n    setDirty = (type?: string): void => {\n        const { id, isCascadingPolicyApplicable, onModification }: Props = this.props;\n        const { data, isCascadingEnabled, isCascadingOverwritten } = this.state;\n        const hasDataChanged = !isEqual(data, this.props.data);\n        let hasCascadingChanged = false;\n\n        if (isCascadingPolicyApplicable) {\n            // isCascadingOverwritten always starts out as false, so true signifies a change\n            hasCascadingChanged = isCascadingOverwritten || isCascadingEnabled !== this.isCascadingEnabled(this.props);\n        }\n\n        // Callback to parent to tell that something is dirty\n        if (onModification) {\n            onModification(id, hasDataChanged || hasCascadingChanged, type);\n        }\n    };\n\n    collapsibleRef: {\n        current: null | HTMLDivElement,\n    } = React.createRef();\n\n    fieldKeyToTypeMap: Object;\n\n    /**\n     * Determines if cascading policy is enabled based on\n     * whether it has an id or not.\n     *\n     * @param {Object} props - component props\n     * @return {boolean} true if cascading policy is enabled\n     */\n    isCascadingEnabled(props: Props) {\n        if (props.cascadePolicy) {\n            return !!props.cascadePolicy.id;\n        }\n        return false;\n    }\n\n    /**\n     * Toggles the edit mode\n     *\n     * @private\n     * @return {void}\n     */\n    toggleIsEditing = (): void => {\n        this.setState(prevState => ({\n            isEditing: !prevState.isEditing,\n        }));\n    };\n\n    /**\n     * Creates JSON Patch operations from the passed in\n     * data while comparing it to the original data from props.\n     *\n     * Only diffs at the root level and primitives.\n     *\n     * @param {*} currentData - the latest changes by the user\n     * @param {*} originalData - the original values\n     * @return {Array} - JSON patch operations\n     */\n    createJSONPatch(currentData: Object, originalData: Object): JSONPatchOperations {\n        const ops = [];\n        const data = cloneDeep(currentData); // clone the data for mutation\n\n        // Iterate over the original data and find keys that have changed.\n        // Also remove them from the data object to only leave new keys.\n        Object.keys(originalData).forEach(key => {\n            const type = this.fieldKeyToTypeMap[key];\n            const originalValue = getValue(originalData, key, type);\n            const path = `/${key}`;\n\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                const value = getValue(data, key, type);\n\n                // Only register changed data\n                if (!isEqual(value, originalValue)) {\n                    // Add a test OP for each replaces\n                    ops.push({\n                        op: JSON_PATCH_OP_TEST,\n                        path,\n                        value: originalValue,\n                    });\n                    ops.push({\n                        op: JSON_PATCH_OP_REPLACE,\n                        path,\n                        value,\n                    });\n                }\n            } else {\n                // Key was removed\n                // Add a test OP for removes\n                ops.push({\n                    op: JSON_PATCH_OP_TEST,\n                    path,\n                    value: originalValue,\n                });\n                ops.push({ op: JSON_PATCH_OP_REMOVE, path });\n            }\n            delete data[key];\n        });\n\n        // Iterate over the remaining keys that are new.\n        Object.keys(data).forEach(key => {\n            const type = this.fieldKeyToTypeMap[key];\n            const value = getValue(data, key, type);\n\n            ops.push({\n                op: JSON_PATCH_OP_ADD,\n                path: `/${key}`,\n                value,\n            });\n        });\n\n        return ops;\n    }\n\n    /**\n     * Utility function to determine if instance is editable\n     *\n     * @return {boolean} true if editable\n     */\n    canEdit(): boolean {\n        const { canEdit, onModification, onRemove, onSave }: Props = this.props;\n        return (\n            canEdit &&\n            typeof onRemove === 'function' &&\n            typeof onSave === 'function' &&\n            typeof onModification === 'function'\n        );\n    }\n\n    /**\n     * Utility function to determine if instance is in edit mode\n     *\n     * @return {boolean} true if editing\n     */\n    isEditing(): boolean {\n        const { isEditing }: State = this.state;\n        return this.canEdit() && isEditing;\n    }\n\n    renderEditButton = () => {\n        const { isDirty }: Props = this.props;\n        const { isBusy }: State = this.state;\n        const canEdit = this.canEdit();\n        const isEditing = this.isEditing();\n        const editClassName = classNames('metadata-instance-editor-instance-edit', {\n            'metadata-instance-editor-instance-is-editing': isEditing,\n        });\n\n        if (canEdit && !isDirty && !isBusy) {\n            return (\n                <Tooltip position=\"top-left\" text={<FormattedMessage {...messages.metadataEditTooltip} />}>\n                    <PlainButton\n                        className={editClassName}\n                        data-resin-target=\"metadata-instanceedit\"\n                        onClick={this.toggleIsEditing}\n                        type=\"button\"\n                    >\n                        <IconEdit />\n                    </PlainButton>\n                </Tooltip>\n            );\n        }\n        return null;\n    };\n\n    render() {\n        const { cascadePolicy = {}, isDirty, isCascadingPolicyApplicable, isOpen, template }: Props = this.props;\n        const { fields = [] } = template;\n        const {\n            data,\n            errors,\n            isBusy,\n            isCascadingEnabled,\n            shouldConfirmRemove,\n            shouldShowCascadeOptions,\n            isCascadingOverwritten,\n        }: State = this.state;\n        const isProperties = template.templateKey === TEMPLATE_CUSTOM_PROPERTIES;\n        const isEditing = this.isEditing();\n\n        if (!template || isHidden(template)) {\n            return null;\n        }\n\n        // Animate short and tall cards at consistent speeds.\n        const animationDuration = (fields.length + 1) * 50;\n\n        return (\n            <div ref={this.collapsibleRef}>\n                <Collapsible\n                    animationDuration={animationDuration}\n                    buttonProps={{\n                        [RESIN_TAG_TARGET]: 'metadata-card',\n                    }}\n                    hasStickyHeader\n                    headerActionItems={this.renderEditButton()}\n                    isBordered\n                    isOpen={isOpen}\n                    title={this.getTitle()}\n                >\n                    {shouldConfirmRemove && (\n                        <LoadingIndicatorWrapper isLoading={isBusy}>\n                            <MetadataInstanceConfirmDialog\n                                confirmationMessage={this.getConfirmationMessage()}\n                                onCancel={this.onConfirmCancel}\n                                onConfirm={this.onRemove}\n                            />\n                        </LoadingIndicatorWrapper>\n                    )}\n                    {!shouldConfirmRemove && (\n                        <LoadingIndicatorWrapper isLoading={isBusy}>\n                            <Form onValidSubmit={isDirty ? this.onSave : noop}>\n                                <div className=\"metadata-instance-editor-instance\">\n                                    {isCascadingPolicyApplicable && (\n                                        <CascadePolicy\n                                            canEdit={isEditing && !!cascadePolicy.canEdit}\n                                            isCascadingEnabled={isCascadingEnabled}\n                                            isCascadingOverwritten={isCascadingOverwritten}\n                                            isCustomMetadata={isProperties}\n                                            onCascadeModeChange={this.onCascadeModeChange}\n                                            onCascadeToggle={this.onCascadeToggle}\n                                            shouldShowCascadeOptions={shouldShowCascadeOptions}\n                                        />\n                                    )}\n                                    {isProperties ? (\n                                        <CustomInstance\n                                            canEdit={isEditing}\n                                            data={data}\n                                            onFieldChange={this.onFieldChange}\n                                            onFieldRemove={this.onFieldRemove}\n                                        />\n                                    ) : (\n                                        <TemplatedInstance\n                                            canEdit={isEditing}\n                                            data={data}\n                                            errors={errors}\n                                            onFieldChange={this.onFieldChange}\n                                            onFieldRemove={this.onFieldRemove}\n                                            template={template}\n                                        />\n                                    )}\n                                </div>\n                                {isEditing && (\n                                    <Footer\n                                        onCancel={this.onCancel}\n                                        onRemove={this.onConfirmRemove}\n                                        showSave={isDirty}\n                                    />\n                                )}\n                            </Form>\n                        </LoadingIndicatorWrapper>\n                    )}\n                </Collapsible>\n            </div>\n        );\n    }\n}\n\nexport default Instance;\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\n\nimport Instance from './Instance';\n\ntype Props = {\n    editors?: Array<MetadataEditor>,\n    isCascadingPolicyApplicable?: boolean,\n    onModification?: (id: string, isDirty: boolean) => void,\n    onRemove?: (id: string) => void,\n    onSave?: (\n        id: string,\n        data: JSONPatchOperations,\n        cascadingPolicy?: MetadataCascadingPolicyData,\n        rawData: Object,\n    ) => void,\n    selectedTemplateKey?: string,\n};\n\nconst Instances = ({\n    isCascadingPolicyApplicable = false,\n    editors = [],\n    onModification,\n    onRemove,\n    onSave,\n    selectedTemplateKey,\n}: Props) =>\n    editors.map<React.Element<typeof Instance>>(\n        ({ isDirty = false, instance, hasError = false, template }: MetadataEditor) => {\n            const { templateKey } = template;\n            const isOpen = editors.length === 1 || templateKey === selectedTemplateKey;\n            return (\n                <Instance\n                    canEdit={instance.canEdit}\n                    cascadePolicy={instance.cascadePolicy}\n                    data={instance.data}\n                    hasError={hasError}\n                    id={instance.id}\n                    isCascadingPolicyApplicable={isCascadingPolicyApplicable}\n                    isDirty={isDirty}\n                    isOpen={isOpen}\n                    key={`${instance.id}-${templateKey}`}\n                    onModification={onModification}\n                    onSave={onSave}\n                    onRemove={onRemove}\n                    template={template}\n                />\n            );\n        },\n    );\n\nexport default Instances;\n","// @flow\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport Button from '../../components/button/Button';\nimport PrimaryButton from '../../components/primary-button/PrimaryButton';\n\nimport messages from './messages';\n\nimport './MetadataInstanceConfirmDialog.scss';\n\ntype Props = {\n    confirmationMessage: string | React.Node,\n    onCancel: Function,\n    onConfirm: Function,\n};\n\nconst MetadataInstanceConfirmDialog = ({ onCancel, onConfirm, confirmationMessage }: Props) => (\n    <div className=\"metadata-instance-confirm-cover\">\n        <div className=\"metadata-instance-confim-container\">\n            <p className=\"metadata-instance-confirm-text\">{confirmationMessage}</p>\n            <div className=\"metadata-instance-confirm-buttons\">\n                <Button data-resin-target=\"metadata-confirmcancel\" onClick={onCancel} type=\"button\">\n                    <FormattedMessage {...messages.metadataCancel} />\n                </Button>\n                <PrimaryButton data-resin-target=\"metadata-confirmremove\" onClick={onConfirm} type=\"button\">\n                    <FormattedMessage {...messages.customRemove} />\n                </PrimaryButton>\n            </div>\n        </div>\n    </div>\n);\n\nexport default MetadataInstanceConfirmDialog;\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\nimport classNames from 'classnames';\nimport isEqual from 'lodash/isEqual';\nimport { FormattedMessage, injectIntl } from 'react-intl';\n\nimport DatalistItem from '../../components/datalist-item';\nimport SelectorDropdown from '../../components/selector-dropdown';\nimport SearchForm from '../../components/search-form/SearchForm';\nimport PlainButton from '../../components/plain-button';\nimport LoadingIndicator from '../../components/loading-indicator';\nimport { Flyout, Overlay } from '../../components/flyout';\n\nimport MenuToggle from '../../components/dropdown-menu/MenuToggle';\nimport messages from './messages';\nimport { TEMPLATE_CUSTOM_PROPERTIES } from './constants';\nimport './TemplateDropdown.scss';\n\ntype Props = {\n    activeTemplate?: ?MetadataTemplate,\n    activeTemplateIcon?: React.Node,\n    className?: string,\n    defaultTemplateIcon?: React.Node,\n    entryButton?: React.Node,\n    intl: any,\n    isDropdownBusy?: boolean,\n    onAdd: (template: MetadataTemplate) => void,\n    onDropdownToggle?: (isDropdownOpen: boolean) => void,\n    templates: Array<MetadataTemplate>,\n    title?: React.Node,\n    usedTemplates: Array<MetadataTemplate>,\n};\n\ntype State = {\n    filterText: string,\n    isDropdownOpen: boolean,\n    templates: Array<MetadataTemplate>,\n};\n\nconst InputContainer = ({ inputProps = {}, ...rest }: { inputProps?: Object }) => (\n    <SearchForm\n        {...inputProps}\n        {...rest}\n        shouldPreventClearEventPropagation\n        data-resin-target=\"metadata-templatesearch\"\n    />\n);\n\nconst getAvailableTemplates = (allTemplates: Array<MetadataTemplate>, usedTemplates: Array<MetadataTemplate>) =>\n    allTemplates.filter(\n        (template: MetadataTemplate) =>\n            usedTemplates.findIndex(\n                (usedTemplate: MetadataTemplate) =>\n                    usedTemplate.templateKey === template.templateKey && usedTemplate.scope === template.scope,\n            ) === -1,\n    );\n\nclass TemplateDropdown extends React.PureComponent<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            isDropdownOpen: false,\n            filterText: '',\n            templates: getAvailableTemplates(props.templates, props.usedTemplates),\n        };\n    }\n\n    /**\n     * Updates the state\n     *\n     * @param {Object} prevProps - next props\n     * @return {void}\n     */\n    componentDidUpdate({ templates: prevTemplates, usedTemplates: prevUsedTemplates }: Props) {\n        const { templates, usedTemplates } = this.props;\n\n        if (!isEqual(prevTemplates, templates) || !isEqual(prevUsedTemplates, usedTemplates)) {\n            this.setState({\n                templates: getAvailableTemplates(templates, usedTemplates),\n            });\n        }\n    }\n\n    getDropdown = () => {\n        const {\n            isDropdownBusy,\n            onAdd,\n            activeTemplate,\n            defaultTemplateIcon,\n            activeTemplateIcon,\n            templates: allTemplates,\n            title,\n            usedTemplates,\n        }: Props = this.props;\n        const { templates }: State = this.state;\n        const hasUnusedTemplates = getAvailableTemplates(allTemplates, usedTemplates).length > 0;\n        const hasTemplates = allTemplates.length > 0;\n        const hasResults = templates.length > 0;\n\n        let indicatorOrMessage = null;\n\n        if (isDropdownBusy) {\n            indicatorOrMessage = (\n                <LoadingIndicator className=\"metadata-instance-editor-template-message template-dropdown-loading-indicator\" />\n            );\n        } else if (!hasTemplates || !hasUnusedTemplates || !hasResults) {\n            let message = { id: '' };\n\n            if (!hasTemplates) {\n                message = messages.metadataTemplatesServerHasNoTemplates;\n            } else if (!hasUnusedTemplates) {\n                message = messages.metadataTemplatesNoRemainingTemplates;\n            } else if (!hasResults) {\n                message = messages.metadataTemplatesNoResults;\n            }\n\n            indicatorOrMessage = (\n                <i className=\"metadata-instance-editor-template-message\">\n                    <FormattedMessage {...message} />\n                </i>\n            );\n        }\n\n        const renderedTemplates = templates.map(template => {\n            const isTemplateSelected = activeTemplate && activeTemplate.id === template.id;\n\n            const buttonClassName = classNames('metadata-template-dropdown-select-template', {\n                'metadata-template-dropdown-is-selected': isTemplateSelected,\n            });\n\n            return (\n                <DatalistItem key={template.id}>\n                    <PlainButton className={buttonClassName} tabIndex=\"-1\" type=\"button\">\n                        {isTemplateSelected ? activeTemplateIcon : defaultTemplateIcon}\n                        {this.getTemplateName(template)}\n                    </PlainButton>\n                </DatalistItem>\n            );\n        });\n\n        return (\n            <>\n                <SelectorDropdown\n                    className=\"metadata-instance-editor-template-dropdown-menu\"\n                    title={title}\n                    isAlwaysOpen\n                    onSelect={(index: number) => {\n                        onAdd(templates[index]);\n                    }}\n                    selector={this.getSelector()}\n                    shouldScroll\n                >\n                    {indicatorOrMessage ? null : renderedTemplates}\n                </SelectorDropdown>\n                {indicatorOrMessage}\n            </>\n        );\n    };\n\n    /**\n     * Returns the input field for the drop down\n     *\n     * @return {React.Node} - input selector\n     */\n    getSelector = () => {\n        const { intl }: Props = this.props;\n        const { filterText }: State = this.state;\n        return (\n            <InputContainer\n                label=\"\"\n                onChange={this.handleUserInput}\n                placeholder={intl.formatMessage(messages.metadataTemplateSearchPlaceholder)}\n                type=\"text\"\n                useClearButton\n                value={filterText}\n            />\n        );\n    };\n\n    /**\n     * Returns template display name.\n     * For custom metadata we have it on the client.\n     *\n     * @return {React.Node} - string or formatted name\n     */\n    getTemplateName(template: MetadataTemplate): React.Node {\n        return template.templateKey === TEMPLATE_CUSTOM_PROPERTIES ? (\n            <FormattedMessage className=\"template-display-name\" {...messages.customTitle} />\n        ) : (\n            <div className=\"template-display-name\">{template.displayName}</div>\n        );\n    }\n\n    /**\n     * Updates the filter text and filters the results\n     *\n     * @param {UserInput} userInput - input value returned from onChangeHandler from SearchForm.js\n     * @return {void}\n     */\n    handleUserInput = (userInput: string) => {\n        const { templates: allTemplates, usedTemplates } = this.props;\n        const filterText = userInput;\n        const templates = getAvailableTemplates(allTemplates, usedTemplates);\n\n        this.setState({\n            filterText,\n            templates: templates.filter(template => {\n                const label: string = ((template.templateKey === TEMPLATE_CUSTOM_PROPERTIES\n                    ? messages.customTitle.defaultMessage\n                    : template.displayName): any);\n                return label.toLowerCase().includes(filterText.toLowerCase());\n            }),\n        });\n    };\n\n    onOpen = () => {\n        const { onDropdownToggle, templates, usedTemplates } = this.props;\n\n        if (onDropdownToggle) {\n            onDropdownToggle(true);\n        }\n\n        this.setState({\n            isDropdownOpen: true,\n            filterText: '',\n            templates: getAvailableTemplates(templates, usedTemplates),\n        });\n    };\n\n    onClose = () => {\n        const { onDropdownToggle } = this.props;\n\n        if (onDropdownToggle) {\n            onDropdownToggle(false);\n        }\n\n        this.setState({ isDropdownOpen: false });\n    };\n\n    renderEntryButton = () => {\n        const { entryButton } = this.props;\n        const { isDropdownOpen } = this.state;\n        const buttonToggleClassName = classNames('lnk', {\n            'is-toggled': isDropdownOpen,\n        });\n        if (entryButton) {\n            return entryButton;\n        }\n        return (\n            <PlainButton data-resin-target=\"metadata-templateaddmenu\" className={buttonToggleClassName} type=\"button\">\n                <MenuToggle>\n                    <FormattedMessage {...messages.metadataTemplateAdd} />\n                </MenuToggle>\n            </PlainButton>\n        );\n    };\n\n    render() {\n        const { className } = this.props;\n        const flyoutClassName = classNames('metadata-instance-editor-template-dropdown-flyout', className);\n\n        return (\n            <Flyout\n                className={flyoutClassName}\n                closeOnClick\n                closeOnClickOutside\n                onClose={this.onClose}\n                onOpen={this.onOpen}\n                position=\"bottom-left\"\n                shouldDefaultFocus\n            >\n                {this.renderEntryButton()}\n                <Overlay>{this.getDropdown()}</Overlay>\n            </Flyout>\n        );\n    }\n}\n\nexport { TemplateDropdown as TemplateDropdownBase };\nexport default injectIntl(TemplateDropdown);\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport Field from './fields/Field';\nimport messages from './messages';\nimport { isHidden } from './metadataUtil';\nimport './TemplatedInstance.scss';\n\ntype Props = {\n    canEdit: boolean,\n    data: MetadataFields,\n    errors: { [string]: React.Node },\n    onFieldChange?: (key: string, value: MetadataFieldValue, type: string) => void,\n    onFieldRemove?: (key: string) => void,\n    template: MetadataTemplate,\n};\n\nconst TemplatedInstance = ({ canEdit, data = {}, errors, onFieldChange, onFieldRemove, template }: Props) => {\n    const { fields = [] } = template;\n    const hasFields = fields.length > 0;\n    const hasVisibleFields = hasFields && fields.some(field => !isHidden(field));\n    const showNoFieldsMessage = !hasFields;\n    const showHiddenFieldsMessage = hasFields && !hasVisibleFields;\n\n    return (\n        <>\n            {hasVisibleFields &&\n                fields.map(field => (\n                    <Field\n                        key={field.id}\n                        canEdit={canEdit}\n                        dataKey={field.key}\n                        dataValue={data[field.key]}\n                        description={field.description}\n                        displayName={field.displayName}\n                        error={errors[field.key]}\n                        isHidden={isHidden(field)} // Checking both isHidden and hidden attributes due to differences in V2 and V3 APIs\n                        onChange={(key: string, value: MetadataFieldValue) => {\n                            if (canEdit && onFieldChange) {\n                                onFieldChange(key, value, field.type);\n                            }\n                        }}\n                        onRemove={(key: string) => {\n                            if (canEdit && onFieldRemove) {\n                                onFieldRemove(key);\n                            }\n                        }}\n                        options={field.options}\n                        type={field.type}\n                    />\n                ))}\n            {showHiddenFieldsMessage && (\n                <div className=\"attributes-hidden-message\">\n                    <FormattedMessage {...messages.allAttributesAreHidden} />\n                </div>\n            )}\n            {showNoFieldsMessage && (\n                <div className=\"no-attributes-message\">\n                    <FormattedMessage {...messages.noAttributesForTemplate} />\n                </div>\n            )}\n        </>\n    );\n};\n\nexport default TemplatedInstance;\n","// extracted by mini-css-extract-plugin","// @flow\n\nexport const FIELD_TYPE_DATE: 'date' = 'date';\nexport const FIELD_TYPE_ENUM: 'enum' = 'enum';\nexport const FIELD_TYPE_INTEGER: 'integer' = 'integer';\nexport const FIELD_TYPE_FLOAT: 'float' = 'float';\nexport const FIELD_TYPE_MULTISELECT: 'multiSelect' = 'multiSelect';\nexport const FIELD_TYPE_STRING: 'string' = 'string';\nexport const TEMPLATE_CUSTOM_PROPERTIES: 'properties' = 'properties';\nexport const JSON_PATCH_OP_ADD: 'add' = 'add';\nexport const JSON_PATCH_OP_REMOVE: 'remove' = 'remove';\nexport const JSON_PATCH_OP_REPLACE: 'replace' = 'replace';\nexport const JSON_PATCH_OP_TEST: 'test' = 'test';\n","// @flow\nimport * as React from 'react';\nimport { injectIntl } from 'react-intl';\n\nimport Button from '../../../components/button/Button';\nimport ButtonGroup from '../../../components/button-group/ButtonGroup';\nimport IconMinus from '../../../icons/general/IconMinusThin';\nimport IconPlus from '../../../icons/general/IconPlusThin';\n\nimport Field from './Field';\nimport messages from '../messages';\nimport './CustomField.scss';\n\ntype Props = {\n    canEdit: boolean,\n    dataKey: string,\n    dataValue: MetadataFieldValue,\n    intl: any,\n    isLast: boolean,\n    onAdd: () => void,\n    onChange: (key: string, value: MetadataFieldValue) => void,\n    onRemove: (key: string) => void,\n};\n\nconst COLOR_999 = '#999';\n\nconst CustomField = ({ intl, canEdit, isLast, dataKey, dataValue, onAdd, onChange, onRemove }: Props) => {\n    const addBtn = (\n        <Button\n            aria-label={intl.formatMessage(messages.customAdd)}\n            data-resin-target=\"metadata-customfieldnew\"\n            onClick={onAdd}\n            type=\"button\"\n        >\n            <IconPlus color={COLOR_999} />\n        </Button>\n    );\n\n    const removeBtn = (\n        <Button\n            aria-label={intl.formatMessage(messages.customRemove)}\n            data-resin-target=\"metadata-customfieldremove\"\n            onClick={() => {\n                if (onRemove) {\n                    onRemove(dataKey);\n                }\n            }}\n            type=\"button\"\n        >\n            <IconMinus color={COLOR_999} />\n        </Button>\n    );\n\n    return (\n        <div className=\"metadata-instance-editor-field-custom\">\n            {/* $FlowFixMe */}\n            <Field\n                canEdit={canEdit}\n                dataKey={dataKey}\n                dataValue={dataValue}\n                displayName={dataKey}\n                onChange={onChange}\n                // Custom metadata doesn't allow removing of props if the value is emptied out, leave it as empty string\n                onRemove={(key: string) => onChange(key, '')}\n                type=\"string\"\n            />\n            {canEdit && (\n                <div className=\"metadata-instance-editor-field-custom-actions\">\n                    {isLast ? (\n                        <ButtonGroup>\n                            {removeBtn}\n                            {addBtn}\n                        </ButtonGroup>\n                    ) : (\n                        removeBtn\n                    )}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport { CustomField as CustomFieldBase };\nexport default injectIntl(CustomField);\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\nimport { injectIntl } from 'react-intl';\n\nimport DatePicker from '../../../components/date-picker';\nimport { convertISOStringToUTCDate } from '../../../utils/datetime';\n\nimport messages from '../messages';\nimport './DateField.scss';\n\ntype Props = {\n    dataKey: string,\n    dataValue?: MetadataFieldValue,\n    description?: string,\n    displayName: string,\n    intl: any,\n    onChange: (key: string, value: MetadataFieldValue) => void,\n    onRemove: (key: string) => void,\n};\n\nconst DateField = ({ dataKey, dataValue, displayName, description, intl, onChange, onRemove }: Props) => (\n    <DatePicker\n        className=\"metadata-instance-editor-field-date\"\n        dateFormat=\"utcISOString\"\n        description={description}\n        displayFormat={{\n            day: 'numeric',\n            month: 'long',\n            year: 'numeric',\n        }}\n        hideOptionalLabel\n        label={displayName}\n        onChange={(date: Date, isoDate: string) => {\n            if (isoDate) {\n                onChange(dataKey, isoDate);\n            } else {\n                onRemove(dataKey);\n            }\n        }}\n        placeholder={intl.formatMessage(messages.metadataFieldSetDate)}\n        value={typeof dataValue === 'string' ? convertISOStringToUTCDate(dataValue) : undefined}\n    />\n);\n\nexport { DateField as DateFieldBase };\nexport default injectIntl(DateField);\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\nimport { injectIntl } from 'react-intl';\n\nimport Label from '../../../components/label/Label';\nimport SingleSelectField from '../../../components/select-field/SingleSelectField';\n\nimport messages from '../messages';\nimport './EnumField.scss';\n\ntype Option = {\n    displayText: string,\n    isSelectable: boolean,\n    value: string,\n};\n\ntype Props = {\n    dataKey: string,\n    dataValue?: MetadataFieldValue,\n    description?: string,\n    displayName: string,\n    intl: any,\n    onChange: (key: string, value: MetadataFieldValue) => void,\n    onRemove: (key: string) => void,\n    options?: Array<MetadataTemplateFieldOption>,\n};\n\nconst EnumField = ({ dataKey, dataValue, displayName, description, intl, onChange, onRemove, options = [] }: Props) => {\n    const selectOptions = options.map(option => ({\n        displayText: option.key,\n        value: option.key,\n        isSelectable: true,\n    }));\n\n    const defaultValue = intl.formatMessage(messages.metadataFieldSelectValue);\n\n    selectOptions.unshift({\n        displayText: defaultValue,\n        value: defaultValue,\n        isSelectable: false,\n    });\n\n    return (\n        <div className=\"metadata-instance-editor-field-enum\">\n            <Label text={displayName}>\n                {!!description && <i className=\"metadata-instance-editor-field-enum-desc\">{description}</i>}\n                <SingleSelectField\n                    isScrollable\n                    onChange={(option: Option) => {\n                        if (option.isSelectable) {\n                            onChange(dataKey, option.value);\n                        } else if (onRemove) {\n                            onRemove(dataKey);\n                        }\n                    }}\n                    options={selectOptions}\n                    selectedValue={\n                        // Conditional to make flow happy, dataValue should never be an array\n                        Array.isArray(dataValue) ? dataValue.join(', ') : dataValue || defaultValue\n                    }\n                />\n            </Label>\n        </div>\n    );\n};\n\nexport { EnumField as EnumFieldBase };\nexport default injectIntl(EnumField);\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport InlineError from '../../../components/inline-error/InlineError';\n\nimport TextField from './TextField';\nimport EnumField from './EnumField';\nimport DateField from './DateField';\nimport FloatField from './FloatField';\nimport IntegerField from './IntegerField';\nimport MultiSelectField from './MultiSelectField';\nimport ReadOnlyField from './ReadOnlyField';\nimport messages from '../messages';\n\nimport {\n    FIELD_TYPE_ENUM,\n    FIELD_TYPE_FLOAT,\n    FIELD_TYPE_INTEGER,\n    FIELD_TYPE_STRING,\n    FIELD_TYPE_DATE,\n    FIELD_TYPE_MULTISELECT,\n} from '../constants';\n\ntype Props = {\n    canEdit: boolean,\n    dataKey: string,\n    dataValue?: MetadataFieldValue,\n    description?: string,\n    displayName: string,\n    error?: React.Node,\n    isHidden?: boolean,\n    onChange?: (key: string, value: MetadataFieldValue) => void,\n    onRemove?: (key: string) => void,\n    options?: Array<MetadataTemplateFieldOption>,\n    type: MetadataFieldType,\n};\n\nconst Field = ({\n    dataKey,\n    dataValue,\n    displayName,\n    description,\n    error,\n    isHidden,\n    canEdit,\n    onChange,\n    onRemove,\n    options,\n    type,\n}: Props) => {\n    if (isHidden) {\n        return null;\n    }\n\n    if (!canEdit) {\n        return <ReadOnlyField dataValue={dataValue} description={description} displayName={displayName} type={type} />;\n    }\n\n    if (!onChange || !onRemove) {\n        throw new Error('Need to have onChange and onRemove');\n    }\n\n    switch (type) {\n        case FIELD_TYPE_STRING:\n            return (\n                <TextField\n                    dataKey={dataKey}\n                    dataValue={dataValue}\n                    description={description}\n                    displayName={displayName}\n                    onChange={onChange}\n                    onRemove={onRemove}\n                />\n            );\n\n        case FIELD_TYPE_FLOAT:\n            return (\n                <FloatField\n                    dataKey={dataKey}\n                    dataValue={dataValue}\n                    description={description}\n                    displayName={displayName}\n                    error={error}\n                    onChange={onChange}\n                    onRemove={onRemove}\n                    type={type}\n                />\n            );\n\n        case FIELD_TYPE_INTEGER:\n            return (\n                <IntegerField\n                    dataKey={dataKey}\n                    dataValue={dataValue}\n                    description={description}\n                    displayName={displayName}\n                    error={error}\n                    onChange={onChange}\n                    onRemove={onRemove}\n                    type={type}\n                />\n            );\n\n        case FIELD_TYPE_ENUM:\n            return (\n                <EnumField\n                    dataKey={dataKey}\n                    dataValue={dataValue}\n                    description={description}\n                    displayName={displayName}\n                    onChange={onChange}\n                    onRemove={onRemove}\n                    options={options}\n                />\n            );\n\n        case FIELD_TYPE_MULTISELECT:\n            return (\n                <MultiSelectField\n                    dataKey={dataKey}\n                    dataValue={dataValue}\n                    description={description}\n                    displayName={displayName}\n                    onChange={onChange}\n                    onRemove={onRemove}\n                    options={options}\n                />\n            );\n\n        case FIELD_TYPE_DATE:\n            return (\n                <DateField\n                    dataKey={dataKey}\n                    dataValue={dataValue}\n                    description={description}\n                    displayName={displayName}\n                    onChange={onChange}\n                    onRemove={onRemove}\n                />\n            );\n\n        default:\n            return (\n                <InlineError title={type}>\n                    <FormattedMessage {...messages.invalidMetadataFieldType} />\n                </InlineError>\n            );\n    }\n};\n\nexport default Field;\n","// @flow\nimport * as React from 'react';\n\nimport TextField from './TextField';\nimport { isValidValue } from './validateField';\n\ntype Props = {\n    dataKey: string,\n    dataValue?: MetadataFieldValue,\n    description?: string,\n    displayName: string,\n    error?: React.Node,\n    onChange: (key: string, value: MetadataFieldValue) => void,\n    onRemove: (key: string) => void,\n    type: string,\n};\n\nconst FloatField = ({ dataKey, dataValue, displayName, description, error, onChange, onRemove, type }: Props) => (\n    <TextField\n        dataKey={dataKey}\n        dataValue={dataValue}\n        description={description}\n        displayName={displayName}\n        error={error}\n        onChange={(key: string, value: MetadataFieldValue) => {\n            if (isValidValue(type, value)) {\n                onChange(key, value);\n            }\n        }}\n        onRemove={onRemove}\n    />\n);\n\nexport default FloatField;\n","// @flow\nimport * as React from 'react';\n\nimport TextField from './TextField';\nimport { isValidValue } from './validateField';\n\ntype Props = {\n    dataKey: string,\n    dataValue?: MetadataFieldValue,\n    description?: string,\n    displayName: string,\n    error?: React.Node,\n    onChange: (key: string, value: MetadataFieldValue) => void,\n    onRemove: (key: string) => void,\n    type: string,\n};\n\nconst IntegerField = ({ dataKey, dataValue, displayName, description, error, onChange, onRemove, type }: Props) => (\n    <TextField\n        dataKey={dataKey}\n        dataValue={dataValue}\n        description={description}\n        displayName={displayName}\n        error={error}\n        onChange={(key: string, value: MetadataFieldValue) => {\n            if (isValidValue(type, value)) {\n                onChange(key, value);\n            }\n        }}\n        onRemove={onRemove}\n    />\n);\n\nexport default IntegerField;\n","// @flow\nimport * as React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nimport Label from '../../../components/label/Label';\nimport MultiSelect from '../../../components/select-field/MultiSelectField';\nimport type { SelectOptionProp } from '../../../components/select-field/props';\n\nimport messages from '../messages';\n\nimport './MultiSelectField.scss';\n\ntype Props = {\n    dataKey: string,\n    dataValue?: MetadataFieldValue,\n    description?: string,\n    displayName: string,\n    onChange: (key: string, value: MetadataFieldValue) => void,\n    onRemove: (key: string) => void,\n    options?: Array<MetadataTemplateFieldOption>,\n};\n\nconst MultiSelectField = ({\n    dataKey,\n    dataValue,\n    displayName,\n    description,\n    onChange,\n    onRemove,\n    options = [],\n}: Props) => {\n    const placeholder = <FormattedMessage {...messages.metadataFieldMultiSelectValue} />;\n\n    return (\n        <div className=\"metadata-instance-editor-field-multi-select\">\n            <Label text={displayName}>\n                {!!description && <i className=\"metadata-instance-editor-field-multi-select-desc\">{description}</i>}\n                <MultiSelect\n                    isScrollable\n                    onChange={(selectedOptions: Array<SelectOptionProp>) => {\n                        if (selectedOptions.length) {\n                            onChange(dataKey, selectedOptions.map(({ value }) => value));\n                        } else {\n                            onRemove(dataKey);\n                        }\n                    }}\n                    options={options.map(option => ({\n                        displayText: option.key,\n                        value: option.key,\n                    }))}\n                    placeholder={placeholder}\n                    selectedValues={dataValue}\n                />\n            </Label>\n        </div>\n    );\n};\n\nexport { MultiSelectField as MultiSelectFieldBase };\nexport default MultiSelectField;\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\nimport { FormattedMessage, FormattedDate } from 'react-intl';\n\nimport { convertISOStringToUTCDate } from '../../../utils/datetime';\n\nimport { FIELD_TYPE_DATE } from '../constants';\nimport messages from '../messages';\nimport './ReadOnlyField.scss';\n\ntype Props = {\n    dataValue?: MetadataFieldValue,\n    description?: string,\n    displayName: string,\n    type: MetadataFieldType,\n};\n\nconst ReadOnlyField = ({ dataValue, description, displayName, type }: Props) => {\n    let value = <FormattedMessage tagName=\"i\" {...messages.metadataFieldNoValue} />;\n\n    if (dataValue || typeof dataValue === 'number') {\n        if (typeof dataValue === 'string' && type === FIELD_TYPE_DATE) {\n            value = (\n                <FormattedDate day=\"numeric\" month=\"long\" value={convertISOStringToUTCDate(dataValue)} year=\"numeric\" />\n            );\n        } else if (Array.isArray(dataValue)) {\n            value = dataValue.join(', ');\n        } else {\n            value = dataValue;\n        }\n    }\n\n    return (\n        <dl className=\"metadata-instance-editor-field-read-only\">\n            <dt>{displayName}</dt>\n            {!!description && <i className=\"metadata-instance-editor-field-read-only-desc\">{description}</i>}\n            <dd>{value}</dd>\n        </dl>\n    );\n};\n\nexport default ReadOnlyField;\n","// extracted by mini-css-extract-plugin","// @flow\nimport * as React from 'react';\nimport { injectIntl } from 'react-intl';\n\nimport TextInput from '../../../components/text-input';\n\nimport messages from '../messages';\nimport './TextField.scss';\n\ntype Props = {\n    dataKey: string,\n    dataValue?: MetadataFieldValue,\n    description?: string,\n    displayName: string,\n    error?: React.Node,\n    intl: any,\n    onChange: (key: string, value: MetadataFieldValue) => void,\n    onRemove: (key: string) => void,\n    type?: string,\n};\n\nconst TextField = ({\n    dataKey,\n    dataValue,\n    displayName,\n    description,\n    error,\n    intl,\n    onChange,\n    onRemove,\n    type = 'text',\n}: Props) => {\n    let value = '';\n\n    if (typeof dataValue === 'number') {\n        value = dataValue;\n    } else if (dataValue) {\n        value = dataValue;\n    }\n\n    return (\n        <TextInput\n            className=\"metadata-instance-editor-field-text\"\n            description={description}\n            error={error}\n            hideOptionalLabel\n            label={displayName}\n            name={dataKey}\n            onChange={(event: SyntheticKeyboardEvent<HTMLInputElement>) => {\n                const currentTarget = (event.currentTarget: HTMLInputElement);\n                if (currentTarget.value) {\n                    onChange(dataKey, currentTarget.value);\n                } else {\n                    onRemove(dataKey);\n                }\n            }}\n            placeholder={intl.formatMessage(messages.metadataFieldSetValue)}\n            type={type}\n            value={value}\n        />\n    );\n};\n\nexport { TextField as TextFieldBase };\nexport default injectIntl(TextField);\n","// extracted by mini-css-extract-plugin","// @flow\nimport { FIELD_TYPE_FLOAT, FIELD_TYPE_INTEGER } from '../constants';\n\nconst floatRegex = /^[-+]?[0-9]*\\.?[0-9]*$/;\nconst integerRegex = /^[-+]?[0-9]+$/;\n\nconst floatValidator = (value: string) => !!value.match(floatRegex);\nconst integerValidator = (value: string) => !!value.match(integerRegex);\n\nconst isValidValue = (type: string, value: MetadataFieldValue) => {\n    if (type === FIELD_TYPE_FLOAT && typeof value === 'string') {\n        return floatValidator(value);\n    }\n\n    if (type === FIELD_TYPE_INTEGER && typeof value === 'string') {\n        return integerValidator(value);\n    }\n\n    return true;\n};\n\n// eslint-disable-next-line import/prefer-default-export\nexport { isValidValue };\n","import { defineMessages } from 'react-intl';\n\nconst messages = defineMessages({\n    customTitle: {\n        defaultMessage: 'Custom Metadata',\n        description: 'title of the custom metadata card',\n        id: 'boxui.metadataInstanceEditor.customTitle',\n    },\n    customAdd: {\n        defaultMessage: 'Add',\n        description: 'Label for the add button for custom metadata',\n        id: 'boxui.metadataInstanceEditor.customAdd',\n    },\n    customRemove: {\n        defaultMessage: 'Remove',\n        description: 'Label for the remove button for custom metadata',\n        id: 'boxui.metadataInstanceEditor.customRemove',\n    },\n    customKey: {\n        defaultMessage: 'Key',\n        description: 'Label for the key field for custom metadata',\n        id: 'boxui.metadataInstanceEditor.customKey',\n    },\n    customKeyPlaceholder: {\n        defaultMessage: 'e.g. Order Number',\n        description: 'Placeholder for the key field for custom metadata',\n        id: 'boxui.metadataInstanceEditor.customKeyPlaceholder',\n    },\n    customValue: {\n        defaultMessage: 'Value',\n        description: 'Label for the value field for custom metadata',\n        id: 'boxui.metadataInstanceEditor.customValue',\n    },\n    customValuePlaceholder: {\n        defaultMessage: 'e.g. 42',\n        description: 'Placeholder for the value field for custom metadata',\n        id: 'boxui.metadataInstanceEditor.customValuePlaceholder',\n    },\n    customNewField: {\n        defaultMessage: 'New Field',\n        description: 'Title for the new field section for custom metadata',\n        id: 'boxui.metadataInstanceEditor.customNewField',\n    },\n    customNewFieldMessage: {\n        defaultMessage: 'Add a custom metadata field. Other people will be able to see and search for this field.',\n        description: 'Description for the new field section for custom metadata',\n        id: 'boxui.metadataInstanceEditor.customNewFieldMessage',\n    },\n    customErrorRequired: {\n        defaultMessage: 'A key is required.',\n        description: 'Error enforcing required key for custom metadata',\n        id: 'boxui.metadataInstanceEditor.customErrorRequired',\n    },\n    customErrorDuplicateKey: {\n        defaultMessage: 'A field with that key already exists.',\n        description: 'Error enforcing unique key for custom metadata',\n        id: 'boxui.metadataInstanceEditor.customErrorDuplicateKey',\n    },\n    customErrorInternalKey: {\n        defaultMessage: 'Keys cannot begin with a $.',\n        description: 'Error enforcing non internal key for custom metadata',\n        id: 'boxui.metadataInstanceEditor.customErrorInternalKey',\n    },\n    invalidInput: {\n        defaultMessage: 'Invalid Input!',\n        description: 'Error message displayed if the user enters a badly formatted value in metadata text box',\n        id: 'boxui.metadataInstanceEditor.invalidValue',\n    },\n    invalidMetadataFieldType: {\n        defaultMessage: 'Invalid metadata field type!',\n        description: 'Error message displayed if the template has an field type we dont recognize',\n        id: 'boxui.metadataInstanceEditor.invalidMetadataFieldType',\n    },\n    metadataEditTooltip: {\n        defaultMessage: 'Edit Metadata',\n        description: 'Text that shows in a tooltip above the edit pencil button.',\n        id: 'boxui.metadataInstanceEditor.editTooltip',\n    },\n    metadataFieldNoValue: {\n        defaultMessage: 'No Value',\n        description: 'Text to indicate no value exists',\n        id: 'boxui.metadataInstanceEditor.fieldNoValue',\n    },\n    metadataFieldSelectValue: {\n        defaultMessage: 'Select Value',\n        description: 'Text to indicate to select a value from drop down list',\n        id: 'boxui.metadataInstanceEditor.fieldSelectValue',\n    },\n    metadataFieldMultiSelectValue: {\n        defaultMessage: 'Select Values',\n        description: 'Text to indicate to select one or more values from drop down list',\n        id: 'boxui.metadataInstanceEditor.fieldMultiSelectValue',\n    },\n    metadataFieldSetValue: {\n        defaultMessage: 'Set Value',\n        description: 'Text to indicate to set a value',\n        id: 'boxui.metadataInstanceEditor.fieldSetValue',\n    },\n    metadataFieldSetDate: {\n        defaultMessage: 'Set Date',\n        description: 'Text to indicate to set a date',\n        id: 'boxui.metadataInstanceEditor.fieldSetDate',\n    },\n    metadataRemoveTemplate: {\n        defaultMessage: 'Remove',\n        description: 'Label to remove a template',\n        id: 'boxui.metadataInstanceEditor.removeTemplate',\n    },\n    fileMetadataRemoveTemplateConfirm: {\n        defaultMessage: 'Are you sure you want to delete \"{metadataName}\" and all of its values from this file?',\n        description:\n            'Message for users who may attempt to remove a metadata instance for a file, which is non-recoverable',\n        id: 'boxui.metadataInstanceEditor.fileMetadataRemoveTemplateConfirm',\n    },\n    folderMetadataRemoveTemplateConfirm: {\n        defaultMessage:\n            'Are you sure you want to delete \"{metadataName}\" and all of its values? Any metadata template values already applied to files in this folder will not be deleted.',\n        description:\n            'Message for users who may attempt to remove a metadata instance for a folder, which is non-recoverable',\n        id: 'boxui.metadataInstanceEditor.folderMetadataRemoveTemplateConfirm',\n    },\n    fileMetadataRemoveCustomTemplateConfirm: {\n        defaultMessage: 'Are you sure you want to delete this custom metadata and all of its values from this file?',\n        description:\n            'Message for users who may attempt to remove a custom metadata instance for a file. Also non-recoverable',\n        id: 'boxui.metadataInstanceEditor.fileMetadataRemoveCustomTemplateConfirm',\n    },\n    folderMetadataRemoveCustomTemplateConfirm: {\n        defaultMessage:\n            'Are you sure you want to delete this custom metadata and all of its values? Any metadata template values already applied to files in this folder will not be deleted.',\n        description:\n            'Message for users who may attempt to remove a custom metadata instance for a folder. Also non-recoverable',\n        id: 'boxui.metadataInstanceEditor.folderMetadataRemoveCustomTemplateConfirm',\n    },\n    metadataTemplateSearchPlaceholder: {\n        defaultMessage: 'Search all templates',\n        description: 'Placeholder to search for all templates',\n        id: 'boxui.metadataInstanceEditor.templateSearchPlaceholder',\n    },\n    metadataTemplateAdd: {\n        defaultMessage: 'Add',\n        description: 'Label to add a template',\n        id: 'boxui.metadataInstanceEditor.templateAdd',\n    },\n    metadataTemplatesTitle: {\n        defaultMessage: 'Templates',\n        description: 'Overall title of metadata',\n        id: 'boxui.metadataInstanceEditor.templatesTitle',\n    },\n    metadataTemplatesNoResults: {\n        defaultMessage: 'No Results',\n        description: 'Text to indicate no templates found by searching',\n        id: 'boxui.metadataInstanceEditor.templatesNoResults',\n    },\n    metadataTemplatesFetchFailed: {\n        defaultMessage: 'Sorry! We could not fetch templates. Please contact your administrator',\n        description: 'Text to indicate that we failed to fetch templates',\n        id: 'boxui.metadataInstanceEditor.templatesFetchFailed',\n    },\n    metadataTemplatesNoRemainingTemplates: {\n        defaultMessage: 'All templates have been added',\n        description: 'Text to indicate that all the templates have been added',\n        id: 'boxui.metadataInstanceEditor.templatesNoRemainingTemplates',\n    },\n    metadataTemplatesServerHasNoTemplates: {\n        defaultMessage: 'Zero templates',\n        description: 'Text to indicate that the server has no templates',\n        id: 'boxui.metadataInstanceEditor.templatesServerHasNoTemplates',\n    },\n    metadataSave: {\n        defaultMessage: 'Save',\n        description: 'Label for save button',\n        id: 'boxui.metadataInstanceEditor.metadataSave',\n    },\n    metadataCancel: {\n        defaultMessage: 'Cancel',\n        description: 'Label for cancel button',\n        id: 'boxui.metadataInstanceEditor.metadataCancel',\n    },\n    metadataCascadePolicyEnabledInfo: {\n        defaultMessage:\n            'This template and its values are being cascaded to all items in this folder and its subfolders.',\n        description: 'Informational text shown in metadata modal when cascading is turned on for current folder',\n        id: 'boxui.metadataInstanceEditor.metadataCascadePolicyEnabledInfo',\n    },\n    noMetadata: {\n        defaultMessage: 'No Metadata Applied',\n        description: 'Text to display when no metadata is applied to folder',\n        id: 'boxui.metadataInstanceEditor.noMetadata',\n    },\n    noMetadataAddTemplate: {\n        defaultMessage: \"Click 'Add' in the top right to add metadata to this item\",\n        description: 'Instructions to create metadata for the selected folder',\n        id: 'boxui.metadataInstanceEditor.noMetadataAddTemplate',\n    },\n    enableCascadePolicy: {\n        defaultMessage: 'Enable Cascade Policy',\n        description: 'Label for enable cascade policy toggle switch',\n        id: 'boxui.metadataInstanceEditor.enableCascadePolicy',\n    },\n    applyCascadePolicyText: {\n        defaultMessage:\n            'Apply template and its values to all new and existing items in this folder and its subfolders.',\n        description: 'Informational text below enable cascade policy toggle switch',\n        id: 'boxui.metadataInstanceEditor.applyCascadePolicyText',\n    },\n    cannotApplyCascadePolicyText: {\n        defaultMessage: 'Cascade policy cannot be applied to custom metadata at this time.',\n        description:\n            'Informational text below enable cascade policy toggle switch indicating that cascade policy cannot be applied',\n        id: 'boxui.metadataInstanceEditor.cannotApplyCascadePolicyText',\n    },\n    cascadePolicyLearnMore: {\n        defaultMessage: 'Learn more',\n        description: 'Tooltip text a user can use to learn more about cascading metadata policy',\n        id: 'boxui.metadataInstanceEditor.cascadePolicyLearnMore',\n    },\n    cascadePolicyModeQuestion: {\n        defaultMessage:\n            'In the case of conflicts when applying this template and its values to existing items, what would you like to do? This is a one time action.',\n        description:\n            'Tooltip text that asks the user what they want to do when applying cascading to their metadata policy',\n        id: 'boxui.metadataInstanceEditor.cascadePolicyModeQuestion',\n    },\n    cascadePolicySkipMode: {\n        defaultMessage: 'Skip and keep all existing template values',\n        description: 'Label for radio button that selects skip mode for cascading policy',\n        id: 'boxui.metadataInstanceEditor.cascadePolicySkipMode',\n    },\n    cascadePolicyOverwriteMode: {\n        defaultMessage: 'Overwrite all existing template values',\n        description: 'Label for radio button that selects overwrite mode for cascading policy',\n        id: 'boxui.metadataInstanceEditor.cascadePolicyOverwriteMode',\n    },\n    allAttributesAreHidden: {\n        defaultMessage: 'All attributes in this template have been hidden.',\n        description:\n            'Informational text below collapsible header indicating that all fields for this template are hidden',\n        id: 'boxui.metadataInstanceEditor.allAttributesAreHidden',\n    },\n    noAttributesForTemplate: {\n        defaultMessage: 'There are no attributes in this template.',\n        description:\n            'Informational text below collapsible header indicating that there are no attributes for this template',\n        id: 'boxui.metadataInstanceEditor.noAttributesForTemplate',\n    },\n    operationNotImmediate: {\n        defaultMessage: 'This operation is not immediate and may take some time.',\n        description:\n            'Informational text below cascade policy description and explains to the user that the policy will take some time to take effect.',\n        id: 'boxui.metadataInstanceEditor.operationNotImmediate',\n    },\n});\n\nexport default messages;\n","// @flow\n\nconst isHidden = (obj: MetadataTemplate | MetadataTemplateField): boolean => {\n    return !!obj.isHidden || !!obj.hidden;\n};\n\n/**\n * Utility function for converting a string or array of strings into a Set object\n * @param templateFilters - Array<string> | string\n * @returns {Set<T>}\n */\nconst normalizeTemplateFilters = (templateFilters: Array<string> | string): Set<string> => {\n    return typeof templateFilters === 'string' ? new Set([templateFilters]) : new Set(templateFilters);\n};\n\n/**\n * Utility function for cloning an array of metadata templates and filtering the templates and fields if necessary\n * @param templates Array<MetadataTemplate>\n * @param selectedTemplateKey - string\n * @param templateFilters - Array<string> | string\n * @returns {Array<T>}\n */\nconst normalizeTemplates = (\n    templates: Array<MetadataTemplate>,\n    selectedTemplateKey?: string,\n    templateFilters?: Array<string> | string,\n): Array<MetadataTemplate> => {\n    if (!selectedTemplateKey) {\n        return [...templates];\n    }\n    const clonedTemplates = templates.filter(template => template.templateKey === selectedTemplateKey);\n    const fields = clonedTemplates[0] ? clonedTemplates[0].fields : null;\n    if (templateFilters && fields) {\n        const normalizedFilters = normalizeTemplateFilters(templateFilters);\n        clonedTemplates[0].fields = fields.filter(field => normalizedFilters.has(field.id));\n    }\n    return clonedTemplates;\n};\n\nexport { isHidden, normalizeTemplates, normalizeTemplateFilters };\n","// @flow\nimport * as React from 'react';\n\nimport AccessibleSVG from '../accessible-svg';\n\ntype Props = {\n    className?: string,\n    color?: string,\n    /** A text-only string describing the icon if it's not purely decorative for accessibility */\n    title?: string | React.Element<any>,\n    width?: number,\n};\n\nconst IconAddMetadataEmptyState = ({ className = '', color = '#0061D5', title, width = 140 }: Props) => (\n    <AccessibleSVG\n        className={`icon-add-metadata-empty-state ${className}`}\n        title={title}\n        viewBox=\"0 0 140 105\"\n        width={width}\n    >\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <path\n                d=\"M92 1.134V.492a.501.501 0 0 1 1-.002v.644c.152.088.278.214.366.366h.644a.5.5 0 0 1 .49.5c0 .276-.215.5-.49.5h-.644a1.005 1.005 0 0 1-.366.366v.644a.5.5 0 0 1-.5.49.506.506 0 0 1-.5-.505v-.629a1.005 1.005 0 0 1-.366-.366h-.644a.5.5 0 0 1-.49-.5c0-.276.215-.5.49-.5h.644c.088-.152.214-.278.366-.366zm-90.5 83.5v-.642a.501.501 0 0 1 1-.002v.644c.152.088.278.214.366.366h.644a.5.5 0 0 1 .49.5c0 .276-.215.5-.49.5h-.644a1.005 1.005 0 0 1-.366.366v.644a.5.5 0 0 1-.5.49.506.506 0 0 1-.5-.505v-.629A1.005 1.005 0 0 1 1.134 86H.49a.5.5 0 0 1-.49-.5c0-.276.215-.5.49-.5h.644c.088-.152.214-.278.366-.366zm136 5.5v-.642a.501.501 0 0 1 1-.002v.644c.152.088.278.214.366.366h.644a.5.5 0 0 1 .49.5c0 .276-.215.5-.49.5h-.644a1.005 1.005 0 0 1-.366.366v.644a.5.5 0 0 1-.5.49.506.506 0 0 1-.5-.505v-.629a1.005 1.005 0 0 1-.366-.366h-.644a.5.5 0 0 1-.49-.5c0-.276.215-.5.49-.5h.644c.088-.152.214-.278.366-.366zm-29-78v-.642a.501.501 0 0 1 1-.002v.644c.152.088.278.214.366.366h.644a.5.5 0 0 1 .49.5c0 .276-.215.5-.49.5h-.644a1.005 1.005 0 0 1-.366.366v.644a.5.5 0 0 1-.5.49.506.506 0 0 1-.5-.505v-.629a1.005 1.005 0 0 1-.366-.366h-.644a.5.5 0 0 1-.49-.5c0-.276.215-.5.49-.5h.644c.088-.152.214-.278.366-.366zm-80 3.5v-.642a.501.501 0 0 1 1-.002v.644c.152.088.278.214.366.366h.644a.5.5 0 0 1 .49.5c0 .276-.215.5-.49.5h-.644a1.005 1.005 0 0 1-.366.366v.644a.5.5 0 0 1-.5.49.506.506 0 0 1-.5-.505v-.629a1.005 1.005 0 0 1-.366-.366h-.644a.5.5 0 0 1-.49-.5c0-.276.215-.5.49-.5h.644c.088-.152.214-.278.366-.366zm-5.563 8.075v-.402a.313.313 0 0 1 .625 0v.402a.628.628 0 0 1 .23.229h.401c.17 0 .307.144.307.312a.308.308 0 0 1-.307.313h-.402a.628.628 0 0 1-.229.228v.402a.313.313 0 0 1-.625.004v-.406a.628.628 0 0 1-.228-.229h-.402A.313.313 0 0 1 22 24.25c0-.173.134-.313.307-.313h.402a.628.628 0 0 1 .229-.228zm-11.5 79v-.402a.313.313 0 0 1 .626 0v.402a.628.628 0 0 1 .228.228h.402c.17 0 .307.145.307.313a.308.308 0 0 1-.307.313h-.402a.628.628 0 0 1-.229.228v.402a.313.313 0 0 1-.624.004v-.406a.628.628 0 0 1-.23-.228h-.401a.313.313 0 0 1-.307-.313c0-.173.134-.313.307-.313h.402a.628.628 0 0 1 .229-.228z\"\n                fill={color}\n            />\n            <path\n                d=\"M17 54c0-3.866 3.133-7 6.992-7h106.016c3.861 0 6.992 3.142 6.992 7 0 3.866-3.133 7-6.992 7H23.992C20.131 61 17 57.858 17 54zm-6 20c0-3.866 3.133-7 6.992-7h106.016c3.861 0 6.992 3.142 6.992 7 0 3.866-3.133 7-6.992 7H17.992C14.131 81 11 77.858 11 74zM5 94c0-3.866 3.133-7 6.992-7h106.016c3.861 0 6.992 3.142 6.992 7 0 3.866-3.133 7-6.992 7H11.992C8.131 101 5 97.858 5 94z\"\n                fill={color}\n                fillOpacity=\".1\"\n            />\n            <path\n                d=\"M130 61a7 7 0 1 1 0-14 7 7 0 0 1 0 14zm-6 20a7 7 0 1 1 0-14 7 7 0 0 1 0 14zm0-2a5 5 0 1 0 0-10 5 5 0 0 0 0 10zm-6 22a7 7 0 1 1 0-14 7 7 0 0 1 0 14z\"\n                fill={color}\n            />\n            <path\n                d=\"M117.944 95.189l3.215-3.832a.996.996 0 0 1 1.407-.121c.423.355.475.99.126 1.406l-3.861 4.6a.993.993 0 0 1-1.4.128l-3.078-2.583a.993.993 0 0 1-.116-1.403 1 1 0 0 1 1.401-.13l2.306 1.935zm12-40l3.215-3.832a.996.996 0 0 1 1.407-.121c.423.355.475.99.126 1.406l-3.861 4.6a.993.993 0 0 1-1.4.128l-3.078-2.583a.993.993 0 0 1-.116-1.403 1 1 0 0 1 1.401-.13l2.306 1.935z\"\n                fill=\"#FFF\"\n            />\n            <path\n                d=\"M25 38.49c0-.823.668-1.49 1.509-1.49H54.77c.833 0 1.788.605 2.139 1.365l3.207 6.942c.348.754-.036 1.365-.86 1.365H26.491c-.824 0-1.491-.665-1.491-1.49V38.49z\"\n                fill=\"#FFF\"\n                stroke={color}\n                strokeWidth=\"2\"\n            />\n            <path\n                d=\"M27 40.49c0-.823.668-1.49 1.494-1.49h25.164c.825 0 1.751.62 2.07 1.386l2.869 6.9c.318.766-.096 1.386-.933 1.386H28.51A1.498 1.498 0 0 1 27 47.182V40.49z\"\n                fill=\"#22A7F0\"\n                fillOpacity=\".1\"\n            />\n            <rect fill=\"#FFF\" height=\"53.197\" rx=\"1.5\" stroke={color} strokeWidth=\"2\" width=\"80\" x=\"25\" y=\"43\" />\n            <path\n                d=\"M27 82.214c0-.827.657-1.34 1.475-1.185 0 0 3.614 1.268 23.858 1.268 12.585 0 18.165 3.312 25.334 3.312 14.499 0 23.954-4.331 23.954-4.331.762-.31 1.379.115 1.379.936v10.284c0 .827-.68 1.497-1.501 1.497H28.501A1.503 1.503 0 0 1 27 92.498V82.214z\"\n                fill={color}\n                fillOpacity=\".1\"\n            />\n        </g>\n    </AccessibleSVG>\n);\n\nexport default IconAddMetadataEmptyState;\n","// @flow\nimport * as React from 'react';\n\nimport AccessibleSVG from '../accessible-svg';\n\ntype Props = {\n    className?: string,\n    color?: string,\n    height?: number,\n    /** A text-only string describing the icon if it's not purely decorative for accessibility */\n    title?: string | React.Element<any>,\n    width?: number,\n};\n\nconst IconAlertCircle = ({ className = '', color = '#FFFFFF', height = 20, title, width = 20 }: Props) => (\n    <AccessibleSVG\n        className={`icon-alert-circle ${className}`}\n        height={height}\n        title={title}\n        viewBox=\"0 0 20 20\"\n        width={width}\n    >\n        <g fill=\"none\" fillRule=\"evenodd\" transform=\"translate(1 1)\">\n            <circle className=\"stroke-color\" cx=\"9\" cy=\"9\" r=\"9\" stroke={color} />\n            <rect className=\"fill-color\" fill={color} height=\"6\" rx=\"1\" width=\"2\" x=\"8\" y=\"4\" />\n            <circle className=\"fill-color\" cx=\"9\" cy=\"13\" fill={color} r=\"1\" />\n        </g>\n    </AccessibleSVG>\n);\n\nexport default IconAlertCircle;\n","// @flow\nimport * as React from 'react';\n\nimport AccessibleSVG from '../accessible-svg';\n\ntype Props = {\n    className?: string,\n    color?: string,\n    height?: number,\n    /** A text-only string describing the icon if it's not purely decorative for accessibility */\n    title?: string | React.Element<any>,\n    width?: number,\n};\n\nconst IconCheck = ({ className = '', color = '#000000', height = 24, title, width = 24 }: Props) => (\n    <AccessibleSVG\n        className={`icon-check ${className}`}\n        height={height}\n        title={title}\n        viewBox=\"0 0 24 24\"\n        width={width}\n    >\n        <path d=\"M0 0h24v24H0z\" fill=\"none\" />\n        <path className=\"fill-color\" d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\" fill={color} />\n    </AccessibleSVG>\n);\n\nexport default IconCheck;\n","// @flow\nimport * as React from 'react';\n\nimport AccessibleSVG from '../accessible-svg';\n\ntype Props = {\n    className?: string,\n    color?: string,\n    height?: number,\n    /** A text-only string describing the icon if it's not purely decorative for accessibility */\n    title?: string | React.Element<any>,\n    width?: number,\n};\n\nconst IconEdit = ({ className = '', color = '#999', height = 14, title, width = 14 }: Props) => (\n    <AccessibleSVG className={`icon-edit ${className}`} height={height} title={title} viewBox=\"0 0 14 14\" width={width}>\n        <path\n            className=\"fill-color\"\n            d=\"M3.21 7.89l6.47-6.48a2 2 0 0 1 2.88 2.78h-.05L6 10.72 3.21 7.89zM2.24 9l2.83 2.83L1.67 13c-.52.18-.79-.1-.62-.61z\"\n            fill={color}\n        />\n    </AccessibleSVG>\n);\n\nexport default IconEdit;\n","// @flow\nimport * as React from 'react';\n\nimport { bdlBoxBlue, bdlPurpleRain } from '../../styles/variables';\nimport AccessibleSVG from '../accessible-svg';\n\ntype Props = {\n    className?: string,\n    color?: string,\n    height?: number,\n    title?: string | React.Element<any>,\n    type?: 'cascade' | 'default',\n    width?: number,\n};\n\nconst IconMetadataColored = ({ className = '', color, title, type, width = 16, height = 16 }: Props) => {\n    let fill;\n\n    if (color) {\n        fill = color;\n    } else if (type === 'cascade') {\n        fill = bdlPurpleRain;\n    } else if (type === 'default') {\n        fill = bdlBoxBlue;\n    } else {\n        fill = bdlBoxBlue;\n    }\n\n    return (\n        <AccessibleSVG\n            className={`icon-metadata ${className}`}\n            height={height}\n            title={title}\n            viewBox=\"0 0 16 16\"\n            width={width}\n        >\n            <path\n                className=\"fill-color\"\n                d=\"M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16zm-2.515-5.879L6.2 7.263l1.376 2.202a.5.5 0 0 0 .848 0L9.8 7.263l.715 2.858a.5.5 0 0 0 .97-.242l-1-4a.5.5 0 0 0-.909-.144L8 8.257 6.424 5.735a.5.5 0 0 0-.91.144l-1 4a.5.5 0 0 0 .971.242z\"\n                fill={fill}\n                fillRule=\"evenodd\"\n            />\n        </AccessibleSVG>\n    );\n};\n\nexport default IconMetadataColored;\n","// @flow\nimport * as React from 'react';\n\nimport AccessibleSVG from '../accessible-svg';\n\ntype Props = {\n    className?: string,\n    color?: string,\n    height?: number,\n    /** A text-only string describing the icon if it's not purely decorative for accessibility */\n    title?: string | React.Element<any>,\n    width?: number,\n};\n\nconst IconMinusThin = ({ className = '', color = '#222', height = 1, title, width = 9 }: Props) => (\n    <AccessibleSVG\n        className={`icon-minus-thin ${className}`}\n        height={height}\n        title={title}\n        viewBox=\"0 0 9 1\"\n        width={width}\n    >\n        <path className=\"fill-color\" d=\"M0 0h9v1H0z\" fill={color} fillRule=\"evenodd\" />\n    </AccessibleSVG>\n);\n\nexport default IconMinusThin;\n","// @flow\nimport * as React from 'react';\n\nimport AccessibleSVG from '../accessible-svg';\n\ntype Props = {\n    className?: string,\n    color?: string,\n    height?: number,\n    /** A text-only string describing the icon if it's not purely decorative for accessibility */\n    title?: string | React.Element<any>,\n    width?: number,\n};\n\nconst IconPlusThin = ({ className = '', color = '#222', height = 9, title, width = 9 }: Props) => (\n    <AccessibleSVG\n        className={`icon-plus-thin ${className}`}\n        height={height}\n        title={title}\n        viewBox=\"0 0 9 9\"\n        width={width}\n    >\n        <path className=\"fill-color\" d=\"M5 4V0H4v4H0v1h4v4h1V5h4V4H5z\" fill={color} fillRule=\"evenodd\" />\n    </AccessibleSVG>\n);\n\nexport default IconPlusThin;\n","// @flow\nimport * as React from 'react';\n\nimport AccessibleSVG from '../accessible-svg';\nimport { bdlGray40 } from '../../styles/variables';\n\ntype Props = {\n    className?: string,\n    color?: string,\n    height?: number,\n    /** A text-only string describing the icon if it's not purely decorative for accessibility */\n    title?: string | React.Element<any>,\n    width?: number,\n};\n\nconst IconSearch = ({ className = 'icon-search', color = bdlGray40, height = 14, title, width = 14 }: Props) => (\n    <AccessibleSVG\n        className={`icon-search ${className}`}\n        height={height}\n        title={title}\n        viewBox=\"0 0 14 14\"\n        width={width}\n    >\n        <path\n            className=\"fill-color\"\n            d=\"M13.7,12.1L11.6,10l-1.1-0.2c0.9-1,1.4-2.4,1.4-3.9c0-3.3-2.7-6-6-6C2.7,0,0,2.7,0,6s2.7,6,6,6 c1.5,0,2.9-0.6,4-1.5l0.2,1l2.1,2.1c0.4,0.4,1,0.4,1.4,0l0,0C14.1,13.1,14.1,12.5,13.7,12.1z M6,10.4c-2.5,0-4.5-2-4.5-4.5 s2-4.5,4.5-4.5s4.5,2,4.5,4.5S8.4,10.4,6,10.4z\"\n            fill={color}\n            fillRule=\"evenodd\"\n        />\n    </AccessibleSVG>\n);\n\nexport default IconSearch;\n"],"sourceRoot":""}